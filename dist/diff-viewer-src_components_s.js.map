{"version":3,"file":"diff-viewer-src_components_s.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAA0C;AACM;AACK;AACe;AAClB;;AAElD;AACA;AACA;AACA;AACO,IAAMK,UAAU;EAAA,SAAAA,WAAA;IAAAC,eAAA,OAAAD,UAAA;EAAA;EAAA,OAAAE,YAAA,CAAAF,UAAA;IAAAG,GAAA;IAAAC,KAAA;IACnB;AACJ;AACA;AACA;AACA;IACI,SAAOC,uBAAuBA,CAAA,EAA0D;MAAA,IAAzDC,WAAW,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAGR,4DAAS,CAACW,KAAK,CAACC,kBAAkB,CAACC,IAAI,CAAC,CAAC;MAClF;MACA,IAAMC,kBAAkB,GAAGf,yEAAkB,CAACgB,WAAW,CAAC,CAAC;MAE3D,IAAMC,SAAS,GAAGnB,qDAAQ,CAACoB,UAAU,CAACV,WAAW,CAAC;MAElD,IAAI,CAACS,SAAS,EAAE;QACZ;QACA,IAAME,aAAa,GAAGC,QAAQ,CAACC,cAAc,CAACb,WAAW,CAAC;QAC1D,IAAMc,oBAAoB,GAAGF,QAAQ,CAACG,aAAa,CAAC,GAAG,GAAGf,WAAW,CAAC;QAEtEX,+CAAK,CAAC2B,GAAG,CAAC,kDAAkD,EAAE;UAC1DH,cAAc,EAAE,CAAC,CAACF,aAAa;UAC/BI,aAAa,EAAE,CAAC,CAACD;QACrB,CAAC,EAAE,CAAC,CAAC;QAELzB,+CAAK,CAAC4B,IAAI,CAAC,yCAAyC,EAAE,IAAI,EAAE,CAAC,CAAC;QAC9D,OAAO,KAAK;MAChB;;MAEA;MACA,IAAMC,WAAW,GAAGT,SAAS,CAACU,gBAAgB,CAAC,KAAK,CAAC;MAErD,IAAI,CAACD,WAAW,IAAIA,WAAW,CAAChB,MAAM,KAAK,CAAC,EAAE;QAC1Cb,+CAAK,CAAC2B,GAAG,CAAC,6CAA6C,EAAE,IAAI,EAAE,CAAC,CAAC;QACjE,OAAO,KAAK;MAChB;;MAEA;MACAE,WAAW,CAACE,OAAO,CAAC,UAAAC,GAAG,EAAI;QACvB;QACA,IAAIA,GAAG,CAACN,aAAa,CAACtB,4DAAS,CAAC6B,IAAI,CAACC,MAAM,CAAC,EAAE;UAC1C;QACJ;;QAEA;QACA,IAAMC,MAAM,GAAGlC,qDAAQ,CAACmC,aAAa,CAAC,QAAQ,EAAE,IAAI,EAAEhC,4DAAS,CAAC6B,IAAI,CAACC,MAAM,CAACjB,IAAI,CAAC,CAAC,EAAE;UAChFoB,IAAI,EAAE,QAAQ;UACdC,KAAK,EAAEpB,kBAAkB,CAACqB,GAAG,CAAC,UAAU;QAC5C,CAAC,CAAC;;QAEF;QACAJ,MAAM,CAACK,SAAS,oBAAAC,MAAA,CAAmBrC,4DAAS,CAAC6B,IAAI,CAACS,IAAI,CAACzB,IAAI,CAAC,CAAC,8BAAAwB,MAAA,CAAyBrC,4DAAS,CAAC6B,IAAI,CAACU,IAAI,CAAC1B,IAAI,CAAC,CAAC,SAAAwB,MAAA,CAAKvB,kBAAkB,CAACqB,GAAG,CAAC,MAAM,CAAC,YAAS;;QAE5J;QACAP,GAAG,CAACY,KAAK,CAACC,QAAQ,GAAG,UAAU;;QAE/B;QACA,IAAMC,MAAM,GAAGd,GAAG,CAACN,aAAa,CAAC,MAAM,CAAC;QACxC,IAAIoB,MAAM,EAAE;UACRd,GAAG,CAACe,YAAY,CAACZ,MAAM,EAAEW,MAAM,CAAC;QACpC,CAAC,MAAM;UACH;UACAd,GAAG,CAACgB,WAAW,CAACb,MAAM,CAAC;QAC3B;;QAEA;QACAA,MAAM,CAACc,gBAAgB,CAAC,OAAO,EAAE,UAASC,CAAC,EAAE;UACzCA,CAAC,CAACC,cAAc,CAAC,CAAC;UAClBD,CAAC,CAACE,eAAe,CAAC,CAAC;UAEnB,IAAMN,MAAM,GAAGd,GAAG,CAACN,aAAa,CAAC,MAAM,CAAC;UACxC,IAAI,CAACoB,MAAM,EAAE;;UAEb;UACA;UACAzC,UAAU,CAACgD,kBAAkB,GAAGP,MAAM;;UAEtC;UACA,IAAIQ,UAAU;UACd,IAAIR,MAAM,CAACS,YAAY,CAAC,oBAAoB,CAAC,EAAE;YAC3CD,UAAU,GAAGjD,UAAU,CAACmD,mBAAmB,CAACV,MAAM,CAACW,YAAY,CAAC,oBAAoB,CAAC,CAAC;YACtFzD,+CAAK,CAAC2B,GAAG,CAAC,gDAAgD,EAAE,IAAI,EAAE,CAAC,CAAC;UACxE,CAAC,MAAM;YACH2B,UAAU,GAAGR,MAAM,CAACY,WAAW,IAAI,EAAE;YACrCJ,UAAU,GAAGA,UAAU,CAACK,OAAO,CAAC,QAAQ,EAAE,IAAI,CAAC;YAC/C3D,+CAAK,CAAC2B,GAAG,CAAC,kDAAkD,EAAE,IAAI,EAAE,CAAC,CAAC;UAC1E;UAEA3B,+CAAK,CAAC2B,GAAG,CAAC,2BAA2B,GAAG2B,UAAU,CAACzC,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;;UAEnE;UACA;UACAR,UAAU,CAACuD,oBAAoB,CAACN,UAAU,CAAC;;UAE3C;UACAjD,UAAU,CAACwD,oBAAoB,CAAC1B,MAAM,CAAC;QAC3C,CAAC,CAAC;MACN,CAAC,CAAC;MAEFnC,+CAAK,CAAC2B,GAAG,sCAAAc,MAAA,CAAsCZ,WAAW,CAAChB,MAAM,mBAAgB,IAAI,EAAE,CAAC,CAAC;MACzF,OAAO,IAAI;IACf;;IAEA;AACJ;AACA;AACA;AACA;EAJI;IAAAL,GAAA;IAAAC,KAAA,EAKA,SAAOoD,oBAAoBA,CAAC1B,MAAM,EAAE;MAChCA,MAAM,CAAC2B,SAAS,CAACC,GAAG,CAAC3D,4DAAS,CAAC6B,IAAI,CAAC+B,UAAU,CAAC/C,IAAI,CAAC,CAAC,CAAC;MACtD,IAAMgD,QAAQ,GAAG9B,MAAM,CAACT,aAAa,KAAAe,MAAA,CAAKrC,4DAAS,CAAC6B,IAAI,CAACU,IAAI,CAAC1B,IAAI,CAAC,CAAC,CAAE,CAAC;MACvE,IAAIgD,QAAQ,EAAE;QACVA,QAAQ,CAACP,WAAW,GAAG,qBAAqB;MAChD;MAEAQ,UAAU,CAAC,YAAM;QACb/B,MAAM,CAAC2B,SAAS,CAACK,MAAM,CAAC/D,4DAAS,CAAC6B,IAAI,CAAC+B,UAAU,CAAC/C,IAAI,CAAC,CAAC,CAAC;QACzD,IAAIgD,QAAQ,EAAE;UACVA,QAAQ,CAACP,WAAW,GAAG,MAAM;QACjC;MACJ,CAAC,EAAE,IAAI,CAAC;IACZ;;IAEA;AACJ;AACA;AACA;AACA;EAJI;IAAAlD,GAAA;IAAAC,KAAA,EAKA,SAAO2D,gBAAgBA,CAACjC,MAAM,EAAE;MAC5BA,MAAM,CAAC2B,SAAS,CAACC,GAAG,CAAC3D,4DAAS,CAAC6B,IAAI,CAACoC,MAAM,CAACpD,IAAI,CAAC,CAAC,CAAC;MAClD,IAAMgD,QAAQ,GAAG9B,MAAM,CAACT,aAAa,KAAAe,MAAA,CAAKrC,4DAAS,CAAC6B,IAAI,CAACU,IAAI,CAAC1B,IAAI,CAAC,CAAC,CAAE,CAAC;MACvE,IAAIgD,QAAQ,EAAE;QACVA,QAAQ,CAACP,WAAW,GAAG,SAAS;MACpC;MAEAQ,UAAU,CAAC,YAAM;QACb/B,MAAM,CAAC2B,SAAS,CAACK,MAAM,CAAC/D,4DAAS,CAAC6B,IAAI,CAACoC,MAAM,CAACpD,IAAI,CAAC,CAAC,CAAC;QACrD,IAAIgD,QAAQ,EAAE;UACVA,QAAQ,CAACP,WAAW,GAAG,MAAM;QACjC;MACJ,CAAC,EAAE,IAAI,CAAC;IACZ;;IAEA;AACJ;AACA;AACA;AACA;EAJI;IAAAlD,GAAA;IAAAC,KAAA,EAKA,SAAOmD,oBAAoBA,CAACU,IAAI,EAAE;MAC9B;MACA,IAAMC,YAAY,GAAGrE,6DAAY,CAACiB,WAAW,CAAC,CAAC;;MAE/C;MACA,IAAMqD,OAAO,GAAGD,YAAY,CAACE,eAAe,CAACH,IAAI,CAAC;;MAElD;MACAC,YAAY,CAACG,IAAI,CAACF,OAAO,CAAC;MAE1BxE,+CAAK,CAAC2B,GAAG,CAAC,uCAAuC,EAAE,IAAI,EAAE,CAAC,CAAC;IAC/D;;IAEA;AACJ;AACA;AACA;AACA;EAJI;IAAAnB,GAAA;IAAAC,KAAA,EAKA,SAAOkE,gBAAgBA,CAACxC,MAAM,EAAE;MAC5BA,MAAM,CAACK,SAAS,GAAGvC,qDAAQ,CAAC2E,WAAW,CAAC,sBAAsB,EAAE;QAAEC,OAAO,EAAEzE,4DAAS,CAAC0E,OAAO,CAACC,YAAY,CAAC9D,IAAI,CAAC;MAAE,CAAC,CAAC,GAAG,aAAa;MACnIkB,MAAM,CAAC2B,SAAS,CAACK,MAAM,CAAC/D,4DAAS,CAAC0E,OAAO,CAACE,cAAc,CAAC/D,IAAI,CAAC,CAAC,EAAEb,4DAAS,CAAC0E,OAAO,CAACG,cAAc,CAAChE,IAAI,CAAC,CAAC,CAAC;MACzGkB,MAAM,CAAC2B,SAAS,CAACC,GAAG,CAAC3D,4DAAS,CAAC0E,OAAO,CAACI,aAAa,CAACjE,IAAI,CAAC,CAAC,CAAC;MAE5DiD,UAAU,CAAC,YAAM;QACb/B,MAAM,CAACK,SAAS,GAAGvC,qDAAQ,CAAC2E,WAAW,CAAC,MAAM,EAAE;UAAEC,OAAO,EAAEzE,4DAAS,CAAC0E,OAAO,CAACC,YAAY,CAAC9D,IAAI,CAAC;QAAE,CAAC,CAAC,GAAG,WAAW;QACjHkB,MAAM,CAAC2B,SAAS,CAACK,MAAM,CAAC/D,4DAAS,CAAC0E,OAAO,CAACI,aAAa,CAACjE,IAAI,CAAC,CAAC,CAAC;QAC/DkB,MAAM,CAAC2B,SAAS,CAACC,GAAG,CAAC3D,4DAAS,CAAC0E,OAAO,CAACE,cAAc,CAAC/D,IAAI,CAAC,CAAC,CAAC;MACjE,CAAC,EAAE,IAAI,CAAC;IACZ;;IAEA;AACJ;AACA;AACA;AACA;AACA;EALI;IAAAT,GAAA;IAAAC,KAAA,EAMA,SAAO+C,mBAAmBA,CAAC2B,IAAI,EAAE;MAC7B,IAAI,CAACA,IAAI,EAAE,OAAO,EAAE;MAEpB,IAAMC,QAAQ,GAAG7D,QAAQ,CAACa,aAAa,CAAC,UAAU,CAAC;MACnDgD,QAAQ,CAAC5C,SAAS,GAAG2C,IAAI;MACzB,OAAOC,QAAQ,CAAC3E,KAAK;IACzB;EAAC;AAAA;;;;;;;;;;;;;;;;;;;;;;;;ACrMqC;AACQ;AACF;AACoB;;AAEpE;AACA;AACA;AACA;AACA;AACO,IAAM4E,gBAAgB;EACzB;AACJ;AACA;EACI,SAAAA,iBAAaC,UAAU,EAAE;IAAA,IAAAC,kBAAA,EAAAC,aAAA;IAAAlF,eAAA,OAAA+E,gBAAA;IACrB;IACA,IAAIC,UAAU,IAAIA,UAAU,CAACG,OAAO,EAAE;MAClC,IAAI,CAACH,UAAU,GAAGA,UAAU;MAC5B,IAAI,CAACG,OAAO,GAAGH,UAAU,CAACG,OAAO;IACrC,CAAC,MAAM;MACH,IAAI,CAACH,UAAU,GAAG,IAAI;MACtB,IAAI,CAACG,OAAO,GAAGH,UAAU,IAAI,CAAC,CAAC;IACnC;IAEA,IAAI,CAAClE,SAAS,GAAG,IAAI;IACrB,IAAI,CAACsE,QAAQ,GAAG;MACZC,aAAa,EAAE,IAAI;MACnBC,aAAa,EAAE,IAAI;MACnBC,aAAa,EAAE;IACnB,CAAC;;IAED;IACA,IAAI,CAAC3E,kBAAkB,GAAGf,yEAAkB,CAACgB,WAAW,CAAC,CAAC;;IAE1D;IACA,IAAI2E,kBAAkB;;IAEtB;IACA,IAAMC,eAAe,GAAG,CAAC,GAAAR,kBAAA,GAACS,MAAM,CAACC,UAAU,cAAAV,kBAAA,eAAjBA,kBAAA,CAAmBW,YAAY;IACzD,IAAMC,sBAAsB,GAAG,CAAC,GAAAX,aAAA,GAAC,IAAI,CAACC,OAAO,cAAAD,aAAA,eAAZA,aAAA,CAAcU,YAAY;IAE3D,IAAI,IAAI,CAAChF,kBAAkB,CAACkF,aAAa,CAAC,CAAC,EAAE;MACzCN,kBAAkB,GAAG,oBAAoB;IAC7C,CAAC,MAAM,IAAIC,eAAe,EAAE;MACxBD,kBAAkB,GAAG,mBAAmB;IAC5C,CAAC,MAAM,IAAIK,sBAAsB,EAAE;MAC/BL,kBAAkB,GAAG,SAAS;IAClC,CAAC,MAAM;MACHA,kBAAkB,GAAG,MAAM;IAC/B;IAEA,IAAMO,IAAI,GAAG,IAAI,CAACnF,kBAAkB,CAACoF,WAAW,CAAC,CAAC;IAElDtG,+CAAK,CAAC2B,GAAG,qCAAAc,MAAA,CAAoC4D,IAAI,2BAAA5D,MAAA,CAAuBqD,kBAAkB,GACjF,IAAI,CAAC5E,kBAAkB,CAACqF,kBAAkB,CAAC,CAAC,EAAE,CAAC,CAAC;EAC7D;;EAEA;AACJ;AACA;AACA;EAHI,OAAAhG,YAAA,CAAA8E,gBAAA;IAAA7E,GAAA;IAAAC,KAAA,EAIA,SAAA+F,aAAaA,CAAClB,UAAU,EAAE;MACtB,IAAIA,UAAU,IAAIA,UAAU,CAACG,OAAO,EAAE;QAClC,IAAI,CAACH,UAAU,GAAGA,UAAU;QAC5B,IAAI,CAACG,OAAO,GAAGH,UAAU,CAACG,OAAO;QACjCzF,+CAAK,CAAC2B,GAAG,CAAC,gDAAgD,EAAE,IAAI,EAAE,CAAC,CAAC;QACpE,OAAO,IAAI;MACf;MACA,OAAO,KAAK;IAChB;;IAEA;AACJ;AACA;AACA;EAHI;IAAAnB,GAAA;IAAAC,KAAA,EAIA,SAAAgG,eAAeA,CAAA,EAAG;MAAA,IAAAC,mBAAA,EAAAC,cAAA;MACd;MACA,IAAI,IAAI,CAACzF,kBAAkB,IAAI,IAAI,CAACA,kBAAkB,CAACkF,aAAa,CAAC,CAAC,EAAE;QACpEpG,+CAAK,CAAC2B,GAAG,CAAC,8DAA8D,EAAE,IAAI,CAACT,kBAAkB,CAACqF,kBAAkB,CAAC,CAAC,EAAE,CAAC,CAAC;QAC1H,OAAO,IAAI,CAACrF,kBAAkB,CAACqF,kBAAkB,CAAC,CAAC;MACvD;;MAEA;MACA,IAAI,CAAAG,mBAAA,GAAAV,MAAM,CAACC,UAAU,cAAAS,mBAAA,eAAjBA,mBAAA,CAAmBR,YAAY,IAAIU,OAAA,CAAOZ,MAAM,CAACC,UAAU,CAACC,YAAY,MAAK,QAAQ,EAAE;QACvFlG,+CAAK,CAAC2B,GAAG,CAAC,+EAA+E,EAAEqE,MAAM,CAACC,UAAU,CAACC,YAAY,EAAE,CAAC,CAAC;QAC7H,IAAI,CAAChF,kBAAkB,CAAC2F,UAAU,CAC9Bb,MAAM,CAACC,UAAU,CAACI,IAAI,IAAI,IAAI,EAC9BL,MAAM,CAACC,UAAU,CAACC,YACtB,CAAC;QACD,OAAO,IAAI,CAAChF,kBAAkB,CAACqF,kBAAkB,CAAC,CAAC;MACvD;;MAEA;MACA,IAAI,CAAAI,cAAA,OAAI,CAAClB,OAAO,cAAAkB,cAAA,eAAZA,cAAA,CAAcT,YAAY,IAAIU,OAAA,CAAO,IAAI,CAACnB,OAAO,CAACS,YAAY,MAAK,QAAQ,EAAE;QAC7ElG,+CAAK,CAAC2B,GAAG,CAAC,yDAAyD,EAAE,IAAI,CAAC8D,OAAO,CAACS,YAAY,EAAE,CAAC,CAAC;QAClG,OAAO,IAAI,CAACT,OAAO,CAACS,YAAY;MACpC;MAEAlG,+CAAK,CAAC2B,GAAG,CAAC,6DAA6D,EAAE,IAAI,EAAE,CAAC,CAAC;MACjF,OAAO,CAAC,CAAC;IACb;;IAEA;AACJ;AACA;AACA;EAHI;IAAAnB,GAAA;IAAAC,KAAA,EAIA,SAAAoG,UAAUA,CAAA,EAAkD;MAAA,IAAjDC,iBAAiB,GAAAlG,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAGR,4DAAS,CAAC2G,SAAS,CAACC,OAAO;MACtDhH,+CAAK,CAAC2B,GAAG,CAAC,8CAA8C,EAAE,IAAI,EAAE,CAAC,CAAC;MAElE,IAAI,CAACP,SAAS,GAAGG,QAAQ,CAACG,aAAa,CAACoF,iBAAiB,CAAC;MAE1D,IAAI,CAAC,IAAI,CAAC1F,SAAS,EAAE;QACjBpB,+CAAK,CAACiH,KAAK,CAAC,+CAA+C,EAAE,IAAI,EAAE,CAAC,CAAC;QACrE,OAAO,KAAK;MAChB;;MAEA;MACA,IAAI,CAACC,qBAAqB,CAAC,CAAC;MAC5B,IAAI,CAACC,qBAAqB,CAAC,CAAC;MAC5B,IAAI,CAACC,qBAAqB,CAAC,CAAC;MAE5BpH,+CAAK,CAAC2B,GAAG,CAAC,2CAA2C,EAAE,IAAI,EAAE,CAAC,CAAC;MAC/D,OAAO,IAAI;IACf;;IAEA;AACJ;AACA;EAFI;IAAAnB,GAAA;IAAAC,KAAA,EAGA,SAAA0G,qBAAqBA,CAAA,EAAG;MACpBnH,+CAAK,CAAC2B,GAAG,CAAC,6CAA6C,EAAE,IAAI,EAAE,CAAC,CAAC;;MAEjE;MACA,IAAM0F,eAAe,GAAGjH,4DAAS,CAACkH,KAAK,CAACC,QAAQ,CAACtG,IAAI,CAAC,CAAC;MACvD,IAAMuG,cAAc,GAAGpH,4DAAS,CAACkH,KAAK,CAACG,iBAAiB,CAACxG,IAAI,CAAC,CAAC;MAC/D,IAAMyG,aAAa,GAAGtH,4DAAS,CAACkH,KAAK,CAACK,MAAM,CAAC1G,IAAI,CAAC,CAAC;;MAEnD;MACA,IAAM0E,aAAa,GAAGpE,QAAQ,CAACa,aAAa,CAAC,KAAK,CAAC;MACnDuD,aAAa,CAACiC,EAAE,GAAGP,eAAe;MAClC1B,aAAa,CAACkC,SAAS,MAAApF,MAAA,CAAMrC,4DAAS,CAAC0E,OAAO,CAACgD,IAAI,CAAC7G,IAAI,CAAC,CAAC,OAAAwB,MAAA,CAAIrC,4DAAS,CAAC0E,OAAO,CAACiD,uBAAuB,CAAC9G,IAAI,CAAC,CAAC,OAAAwB,MAAA,CAAIrC,4DAAS,CAAC0E,OAAO,CAACkD,SAAS,CAAC/G,IAAI,CAAC,CAAC,CAAE;MACtJ0E,aAAa,CAAC/C,KAAK,CAACqF,OAAO,GAAG,+CAA+C;;MAE7E;MACA,IAAMC,eAAe,GAAG3G,QAAQ,CAACa,aAAa,CAAC,KAAK,CAAC;MACrD8F,eAAe,CAACL,SAAS,GAAGzH,4DAAS,CAAC+H,cAAc,CAACnB,OAAO,CAAC/F,IAAI,CAAC,CAAC;;MAEnE;MACA,IAAMmH,OAAO,GAAGnI,qDAAQ,CAAC2E,WAAW,CAAC,KAAK,EAAE;QAAEC,OAAO,EAAEzE,4DAAS,CAAC0E,OAAO,CAACC,YAAY,CAAC9D,IAAI,CAAC;MAAE,CAAC,CAAC;MAC/F,IAAMoH,QAAQ,GAAGpI,qDAAQ,CAAC2E,WAAW,CAAC,MAAM,EAAE;QAAEC,OAAO,EAAEzE,4DAAS,CAAC0E,OAAO,CAACwD,cAAc,CAACrH,IAAI,CAAC;MAAE,CAAC,CAAC;;MAEnG;MACAiH,eAAe,CAAC1F,SAAS,kCAAAC,MAAA,CACNrC,4DAAS,CAAC+H,cAAc,CAACI,KAAK,CAACtH,IAAI,CAAC,CAAC,OAAAwB,MAAA,CAAIrC,4DAAS,CAAC0E,OAAO,CAACC,YAAY,CAAC9D,IAAI,CAAC,CAAC,SAAAwB,MAAA,CAAK2F,OAAO,0CAAA3F,MAAA,CACzFrC,4DAAS,CAAC+H,cAAc,CAACK,OAAO,CAACvH,IAAI,CAAC,CAAC,eAAAwB,MAAA,CAAUiF,aAAa,yDAAAjF,MAAA,CAC7CiF,aAAa,iDAAAjF,MAAA,CAC3BrC,4DAAS,CAAC+H,cAAc,CAACM,MAAM,CAACxH,IAAI,CAAC,CAAC,OAAAwB,MAAA,CAAIrC,4DAAS,CAAC+H,cAAc,CAACO,YAAY,CAACzH,IAAI,CAAC,CAAC,kEAAAwB,MAAA,CAE1FrC,4DAAS,CAAC+H,cAAc,CAACI,KAAK,CAACtH,IAAI,CAAC,CAAC,OAAAwB,MAAA,CAAIrC,4DAAS,CAAC0E,OAAO,CAACwD,cAAc,CAACrH,IAAI,CAAC,CAAC,UAAAwB,MAAA,CAAM4F,QAAQ,sBAChH;;MAED;MACA1C,aAAa,CAAC3C,WAAW,CAACkF,eAAe,CAAC;;MAE1C;MACA,IAAMS,gBAAgB,GAAGpH,QAAQ,CAACa,aAAa,CAAC,KAAK,CAAC;MACtDuG,gBAAgB,CAACf,EAAE,GAAGJ,cAAc;MACpCmB,gBAAgB,CAAC/F,KAAK,CAACgG,OAAO,GAAG,MAAM;MACvCD,gBAAgB,CAAC/F,KAAK,CAACC,QAAQ,GAAG,UAAU;MAC5C8F,gBAAgB,CAAC/F,KAAK,CAACiG,MAAM,GAAG,MAAM;;MAEtC;MACA,IAAI,CAACzH,SAAS,CAAC4B,WAAW,CAAC2C,aAAa,CAAC;;MAEzC;MACApE,QAAQ,CAACuH,IAAI,CAAC9F,WAAW,CAAC2F,gBAAgB,CAAC;;MAE3C;MACA,IAAI,CAACjD,QAAQ,CAACC,aAAa,GAAGA,aAAa;MAC3C,IAAI,CAACD,QAAQ,CAACqD,qBAAqB,GAAGJ,gBAAgB;;MAEtD;MACA,IAAMK,QAAQ,GAAG,IAAIC,gBAAgB,CAAC,UAACC,SAAS,EAAK;QACjDA,SAAS,CAACnH,OAAO,CAAC,YAAM;UACpB,IAAM6D,aAAa,GAAGrE,QAAQ,CAACC,cAAc,CAACpB,4DAAS,CAAC+I,IAAI,CAACpC,SAAS,CAAC9F,IAAI,CAAC,CAAC,CAAC;UAC9E,IAAI2E,aAAa,IAAIA,aAAa,CAAC9B,SAAS,CAACsF,QAAQ,CAAC,QAAQ,CAAC,EAAE;YAC7D;YACA,IAAIzD,aAAa,EAAE;cACfA,aAAa,CAAC/C,KAAK,CAACqF,OAAO,GAAG,+CAA+C;YACjF;YACA;YACAe,QAAQ,CAACK,UAAU,CAAC,CAAC;UACzB;QACJ,CAAC,CAAC;MACN,CAAC,CAAC;;MAEF;MACA,IAAMC,eAAe,GAAG,IAAI,CAAClI,SAAS,IAAIG,QAAQ,CAACuH,IAAI;MACvDE,QAAQ,CAACO,OAAO,CAACD,eAAe,EAAE;QAC9BE,OAAO,EAAE,IAAI;QACbC,SAAS,EAAE,IAAI;QACfC,UAAU,EAAE,IAAI;QAChBC,eAAe,EAAE,CAAC,OAAO;MAC7B,CAAC,CAAC;IACN;;IAEA;AACJ;AACA;EAFI;IAAAnJ,GAAA;IAAAC,KAAA,EAGA,SAAAyG,qBAAqBA,CAAA,EAAG;MAAA,IAAA0C,KAAA;MACpB5J,+CAAK,CAAC2B,GAAG,CAAC,6CAA6C,EAAE,IAAI,EAAE,CAAC,CAAC;;MAEjE;MACA,IAAMkI,eAAe,GAAGzJ,4DAAS,CAAC+I,IAAI,CAACpC,SAAS,CAAC9F,IAAI,CAAC,CAAC;MACvD,IAAM6I,QAAQ,GAAG1J,4DAAS,CAAC+I,IAAI,CAACY,MAAM,CAAC9I,IAAI,CAAC,CAAC;;MAE7C;MACA,IAAM2E,aAAa,GAAGrE,QAAQ,CAACa,aAAa,CAAC,KAAK,CAAC;MACnDwD,aAAa,CAACgC,EAAE,GAAGiC,eAAe;;MAElC;MACA,IAAMG,aAAa,GAAGzI,QAAQ,CAACa,aAAa,CAAC,KAAK,CAAC;MACnD4H,aAAa,CAACpC,EAAE,GAAGkC,QAAQ;MAC3BE,aAAa,CAACnC,SAAS,GAAGzH,4DAAS,CAAC0E,OAAO,CAACmF,YAAY,CAAChJ,IAAI,CAAC,CAAC;MAC/D+I,aAAa,CAACpH,KAAK,CAACgG,OAAO,GAAG,MAAM;;MAEpC;MACA,IAAMI,QAAQ,GAAG,IAAIC,gBAAgB,CAAC,UAACC,SAAS,EAAK;QACjDA,SAAS,CAACnH,OAAO,CAAC,UAACmI,QAAQ,EAAK;UAC5B,IAAIA,QAAQ,CAAC7H,IAAI,KAAK,YAAY,IAC9B6H,QAAQ,CAACC,aAAa,KAAK,OAAO,IAClCH,aAAa,CAACpH,KAAK,CAACgG,OAAO,KAAK,MAAM,EAAE;YACxC;YACA,IAAIgB,KAAI,CAAClE,QAAQ,CAACC,aAAa,EAAE;cAC7BiE,KAAI,CAAClE,QAAQ,CAACC,aAAa,CAAC/C,KAAK,CAACgG,OAAO,GAAG,MAAM;YACtD;UACJ;QACJ,CAAC,CAAC;MACN,CAAC,CAAC;;MAEF;MACAI,QAAQ,CAACO,OAAO,CAACS,aAAa,EAAE;QAAEN,UAAU,EAAE;MAAK,CAAC,CAAC;;MAErD;MACA9D,aAAa,CAAC5C,WAAW,CAACgH,aAAa,CAAC;;MAExC;MACA,IAAI,CAAC5I,SAAS,CAAC4B,WAAW,CAAC4C,aAAa,CAAC;;MAEzC;MACA,IAAI,CAACF,QAAQ,CAACE,aAAa,GAAGA,aAAa;;MAE3C;MACA,IAAMwE,aAAa,GAAG7I,QAAQ,CAACC,cAAc,CAACsI,QAAQ,CAAC;MACvD9J,+CAAK,CAAC2B,GAAG,sCAAAc,MAAA,CAAsCqH,QAAQ,8BAAArH,MAAA,CAA2B,CAAC,CAAC2H,aAAa,GAAI,IAAI,EAAE,CAAC,CAAC;IACjH;;IAEA;AACJ;AACA;EAFI;IAAA5J,GAAA;IAAAC,KAAA,EAGA,SAAA2G,qBAAqBA,CAAA,EAAG;MACpBpH,+CAAK,CAAC2B,GAAG,CAAC,4DAA4D,EAAE,IAAI,EAAE,CAAC,CAAC;;MAEhF;MACA,IAAMuE,YAAY,GAAG,IAAI,CAACO,eAAe,CAAC,CAAC;;MAE3C;MACA,IAAM4D,eAAe,GAAGjK,4DAAS,CAACkK,KAAK,CAACC,cAAc,CAACtJ,IAAI,CAAC,CAAC;MAC7D,IAAMuJ,cAAc,GAAGpK,4DAAS,CAACkK,KAAK,CAACG,kBAAkB,CAACxJ,IAAI,CAAC,CAAC;MAChE,IAAMyJ,YAAY,GAAGtK,4DAAS,CAACkK,KAAK,CAACK,WAAW,CAAC1J,IAAI,CAAC,CAAC;MACvD,IAAM2J,YAAY,GAAGxK,4DAAS,CAACkK,KAAK,CAACO,WAAW,CAAC5J,IAAI,CAAC,CAAC;MACvD,IAAM6J,UAAU,GAAG1K,4DAAS,CAACkK,KAAK,CAACS,oBAAoB,CAAC9J,IAAI,CAAC,CAAC;MAC9D,IAAM+J,aAAa,GAAG5K,4DAAS,CAACkK,KAAK,CAACW,YAAY,CAAChK,IAAI,CAAC,CAAC;;MAEzD;MACA,IAAM4E,aAAa,GAAGtE,QAAQ,CAACa,aAAa,CAAC,KAAK,CAAC;MACnDyD,aAAa,CAACgC,SAAS,MAAApF,MAAA,CAAMrC,4DAAS,CAACkK,KAAK,CAACY,gBAAgB,CAACjK,IAAI,CAAC,CAAC,OAAAwB,MAAA,CAAIrC,4DAAS,CAAC0E,OAAO,CAACgD,IAAI,CAAC7G,IAAI,CAAC,CAAC,OAAAwB,MAAA,CAAIrC,4DAAS,CAAC0E,OAAO,CAACqG,kBAAkB,CAAClK,IAAI,CAAC,CAAC,OAAAwB,MAAA,CAAIrC,4DAAS,CAAC0E,OAAO,CAACiD,uBAAuB,CAAC9G,IAAI,CAAC,CAAC,OAAAwB,MAAA,CAAIrC,4DAAS,CAAC0E,OAAO,CAACsG,UAAU,CAACnK,IAAI,CAAC,CAAC,OAAAwB,MAAA,CAAIrC,4DAAS,CAAC0E,OAAO,CAACkD,SAAS,CAAC/G,IAAI,CAAC,CAAC,CAAE;;MAEvR;MACA,IAAMoK,cAAc,GAAG9J,QAAQ,CAACa,aAAa,CAAC,KAAK,CAAC;MAEpD,IAAMkJ,aAAa,GAAG/J,QAAQ,CAACa,aAAa,CAAC,QAAQ,CAAC;MACtDkJ,aAAa,CAAC1D,EAAE,GAAGyC,eAAe;MAClCiB,aAAa,CAACzD,SAAS,MAAApF,MAAA,CAAMrC,4DAAS,CAAC0E,OAAO,CAAC5C,MAAM,CAACjB,IAAI,CAAC,CAAC,OAAAwB,MAAA,CAAIrC,4DAAS,CAAC0E,OAAO,CAACyG,WAAW,CAACtK,IAAI,CAAC,CAAC,CAAE;MACtGqK,aAAa,CAACjJ,IAAI,GAAG,QAAQ;MAC7BiJ,aAAa,CAAC9I,SAAS,MAAAC,MAAA,CAAMxC,qDAAQ,CAAC2E,WAAW,CAAC,KAAK,EAAE;QAAEC,OAAO,EAAEzE,4DAAS,CAAC0E,OAAO,CAACC,YAAY,CAAC9D,IAAI,CAAC;MAAE,CAAC,CAAC,EAAAwB,MAAA,CAAGyD,YAAY,CAACsF,OAAO,IAAI,SAAS,CAAE;MAElJH,cAAc,CAACrI,WAAW,CAACsI,aAAa,CAAC;;MAEzC;MACA,IAAMG,YAAY,GAAGlK,QAAQ,CAACa,aAAa,CAAC,KAAK,CAAC;MAClDqJ,YAAY,CAAC5D,SAAS,MAAApF,MAAA,CAAMrC,4DAAS,CAAC0E,OAAO,CAACgD,IAAI,CAAC7G,IAAI,CAAC,CAAC,OAAAwB,MAAA,CAAIrC,4DAAS,CAAC0E,OAAO,CAACqG,kBAAkB,CAAClK,IAAI,CAAC,CAAC,CAAE;;MAE1G;MACA,IAAMyK,WAAW,GAAGnK,QAAQ,CAACa,aAAa,CAAC,KAAK,CAAC;MACjDsJ,WAAW,CAAC7D,SAAS,MAAApF,MAAA,CAAMrC,4DAAS,CAAC0E,OAAO,CAACgD,IAAI,CAAC7G,IAAI,CAAC,CAAC,OAAAwB,MAAA,CAAIrC,4DAAS,CAAC0E,OAAO,CAAC6G,mBAAmB,CAAC1K,IAAI,CAAC,CAAC,OAAAwB,MAAA,CAAIrC,4DAAS,CAAC0E,OAAO,CAAC8G,YAAY,CAAC3K,IAAI,CAAC,CAAC,CAAE;MACnJ;MACAyK,WAAW,CAAC5H,SAAS,CAACC,GAAG,CAAC,iBAAiB,CAAC;;MAE5C;MACA,IAAM8H,YAAY,GAAGtK,QAAQ,CAACa,aAAa,CAAC,QAAQ,CAAC;MACrDyJ,YAAY,CAACjE,EAAE,GAAG4C,cAAc;MAChCqB,YAAY,CAAChE,SAAS,MAAApF,MAAA,CAAMrC,4DAAS,CAAC0E,OAAO,CAAC5C,MAAM,CAACjB,IAAI,CAAC,CAAC,OAAAwB,MAAA,CAAIrC,4DAAS,CAAC0E,OAAO,CAACgH,WAAW,CAAC7K,IAAI,CAAC,CAAC,8BAA2B;MAC9H4K,YAAY,CAACxJ,IAAI,GAAG,QAAQ,CAAC,CAAC;;MAE9B,IAAM0J,UAAU,GAAGxK,QAAQ,CAACa,aAAa,CAAC,MAAM,CAAC;MACjD2J,UAAU,CAACnE,EAAE,GAAG8C,YAAY;MAC5BqB,UAAU,CAACvJ,SAAS,GAAGvC,qDAAQ,CAAC2E,WAAW,CAAC,aAAa,EAAE;QAAEC,OAAO,EAAEzE,4DAAS,CAAC0E,OAAO,CAACC,YAAY,CAAC9D,IAAI,CAAC;MAAE,CAAC,CAAC;MAE9G,IAAM+K,UAAU,GAAGzK,QAAQ,CAACa,aAAa,CAAC,MAAM,CAAC;MACjD4J,UAAU,CAACpE,EAAE,GAAGgD,YAAY;MAC5BoB,UAAU,CAACC,YAAY,CAAC,OAAO,EAAE/F,YAAY,CAACgG,qBAAqB,IAAI,8CAA8C,CAAC;MACtHF,UAAU,CAACtI,WAAW,GAAGwC,YAAY,CAACiG,cAAc,IAAI,kBAAkB;MAE1EN,YAAY,CAAC7I,WAAW,CAAC+I,UAAU,CAAC;MACpCF,YAAY,CAAC7I,WAAW,CAACgJ,UAAU,CAAC;;MAEpC;MACA,IAAMI,QAAQ,GAAG7K,QAAQ,CAACa,aAAa,CAAC,QAAQ,CAAC;MACjDgK,QAAQ,CAACxE,EAAE,GAAGkD,UAAU;MACxBsB,QAAQ,CAACvE,SAAS,MAAApF,MAAA,CAAMrC,4DAAS,CAAC0E,OAAO,CAACuH,WAAW,CAACpL,IAAI,CAAC,CAAC,mDAAgD;MAC5G;;MAEA;MACAyK,WAAW,CAAC1I,WAAW,CAAC6I,YAAY,CAAC;MACrCH,WAAW,CAAC1I,WAAW,CAACoJ,QAAQ,CAAC;;MAEjC;MACA,IAAME,WAAW,GAAG/K,QAAQ,CAACa,aAAa,CAAC,QAAQ,CAAC;MACpDkK,WAAW,CAAC1E,EAAE,GAAGoD,aAAa;MAC9BsB,WAAW,CAACzE,SAAS,MAAApF,MAAA,CAAMrC,4DAAS,CAAC0E,OAAO,CAAC5C,MAAM,CAACjB,IAAI,CAAC,CAAC,OAAAwB,MAAA,CAAIrC,4DAAS,CAAC0E,OAAO,CAACE,cAAc,CAAC/D,IAAI,CAAC,CAAC,gBAAa;MAClHqL,WAAW,CAACjK,IAAI,GAAG,QAAQ;MAC3BiK,WAAW,CAAC9J,SAAS,GAAG,CAAC0D,YAAY,CAACqG,UAAU,IAAI,aAAa,QAAA9J,MAAA,CAAQxC,qDAAQ,CAAC2E,WAAW,CAAC,kBAAkB,EAAE;QAAEC,OAAO,EAAEzE,4DAAS,CAAC0E,OAAO,CAACwD,cAAc,CAACrH,IAAI,CAAC;MAAE,CAAC,CAAC,CAAE;MACzKqL,WAAW,CAAC1J,KAAK,CAAC4J,UAAU,GAAG,QAAQ;MACvCF,WAAW,CAAC1J,KAAK,CAACgG,OAAO,GAAG,aAAa;MACzC0D,WAAW,CAAC1J,KAAK,CAAC6J,UAAU,GAAG,QAAQ;;MAEvC;MACAhB,YAAY,CAACzI,WAAW,CAAC0I,WAAW,CAAC;MACrCD,YAAY,CAACzI,WAAW,CAACsJ,WAAW,CAAC;;MAErC;MACAzG,aAAa,CAAC7C,WAAW,CAACqI,cAAc,CAAC;MACzCxF,aAAa,CAAC7C,WAAW,CAACyI,YAAY,CAAC;;MAEvC;MACA,IAAI,CAACrK,SAAS,CAAC4B,WAAW,CAAC6C,aAAa,CAAC;;MAEzC;MACA,IAAI,CAACH,QAAQ,CAACG,aAAa,GAAGA,aAAa;MAE3C7F,+CAAK,CAAC2B,GAAG,CAAC,2GAA2G,EAAE,IAAI,EAAE,CAAC,CAAC;IACnI;;IAEA;AACJ;AACA;EAFI;IAAAnB,GAAA;IAAAC,KAAA,EAGA,SAAAiM,gBAAgBA,CAAA,EAAG;MACf,IAAM/D,gBAAgB,GAAG,IAAI,CAACjD,QAAQ,CAACqD,qBAAqB;MAC5D,IAAMpD,aAAa,GAAG,IAAI,CAACD,QAAQ,CAACC,aAAa;MAEjD,IAAIgD,gBAAgB,IAAIhD,aAAa,EAAE;QACnC;QACA,IAAMgH,OAAO,GAAGxM,yEAAkB,CAACgB,WAAW,CAAC,CAAC,CAACoB,GAAG,CAAC,cAAc,EAAE,kBAAkB,CAAC;;QAExF;QACAoG,gBAAgB,CAACnG,SAAS,gGAAAC,MAAA,CAEdkK,OAAO,0BAClB;;QAED;QACAhE,gBAAgB,CAACd,SAAS,GAAG,8BAA8B;;QAE3D;QACA,IAAM+E,IAAI,GAAGjH,aAAa,CAACkH,qBAAqB,CAAC,CAAC;QAClD,IAAMC,SAAS,GAAG9G,MAAM,CAAC+G,WAAW,IAAIxL,QAAQ,CAACyL,eAAe,CAACF,SAAS;;QAE1E;QACAnE,gBAAgB,CAAC/F,KAAK,CAACqK,GAAG,GAAIL,IAAI,CAACK,GAAG,GAAGH,SAAS,GAAG,EAAE,GAAI,IAAI;;QAE/D;QACAnE,gBAAgB,CAAC/F,KAAK,CAACgG,OAAO,GAAG,MAAM;MAC3C;IACJ;;IAEA;AACJ;AACA;EAFI;IAAApI,GAAA;IAAAC,KAAA,EAGA,SAAAyM,gBAAgBA,CAAA,EAAG;MACf,IAAMvE,gBAAgB,GAAG,IAAI,CAACjD,QAAQ,CAACqD,qBAAqB;MAC5D,IAAIJ,gBAAgB,EAAE;QAClBA,gBAAgB,CAAC/F,KAAK,CAACgG,OAAO,GAAG,MAAM;MAC3C;IACJ;;IAEA;AACJ;AACA;EAFI;IAAApI,GAAA;IAAAC,KAAA,EAGA,SAAA0M,OAAOA,CAAA,EAAG;MACNnN,+CAAK,CAAC2B,GAAG,CAAC,4CAA4C,EAAE,IAAI,EAAE,CAAC,CAAC;;MAEhE;MACA,IAAI,CAACuL,gBAAgB,CAAC,CAAC;;MAEvB;MACA,IAAI,IAAI,CAACxH,QAAQ,CAACC,aAAa,IAAI,IAAI,CAACD,QAAQ,CAACC,aAAa,CAACyH,UAAU,EAAE;QACvE,IAAI,CAAC1H,QAAQ,CAACC,aAAa,CAACyH,UAAU,CAACC,WAAW,CAAC,IAAI,CAAC3H,QAAQ,CAACC,aAAa,CAAC;MACnF;MAEA,IAAI,IAAI,CAACD,QAAQ,CAACE,aAAa,IAAI,IAAI,CAACF,QAAQ,CAACE,aAAa,CAACwH,UAAU,EAAE;QACvE,IAAI,CAAC1H,QAAQ,CAACE,aAAa,CAACwH,UAAU,CAACC,WAAW,CAAC,IAAI,CAAC3H,QAAQ,CAACE,aAAa,CAAC;MACnF;MAEA,IAAI,IAAI,CAACF,QAAQ,CAACG,aAAa,IAAI,IAAI,CAACH,QAAQ,CAACG,aAAa,CAACuH,UAAU,EAAE;QACvE,IAAI,CAAC1H,QAAQ,CAACG,aAAa,CAACuH,UAAU,CAACC,WAAW,CAAC,IAAI,CAAC3H,QAAQ,CAACG,aAAa,CAAC;MACnF;;MAEA;MACA,IAAI,CAACH,QAAQ,GAAG;QACZC,aAAa,EAAE,IAAI;QACnBC,aAAa,EAAE,IAAI;QACnBC,aAAa,EAAE;MACnB,CAAC;;MAED;MACA,IAAI,CAACP,UAAU,GAAG,IAAI;MAEtBtF,+CAAK,CAAC2B,GAAG,CAAC,2CAA2C,EAAE,IAAI,EAAE,CAAC,CAAC;IACnE;EAAC;AAAA;;;;;;;;;;;;;;;;;;;;;;AC5aqC;AACQ;;AAElD;AACA;AACA;AACO,IAAM2L,iBAAiB;EAC1B;AACJ;AACA;EACI,SAAAA,kBAAYhI,UAAU,EAAE;IAAAhF,eAAA,OAAAgN,iBAAA;IACpB,IAAI,CAAChI,UAAU,GAAGA,UAAU;EAChC;;EAEA;AACJ;AACA;EAFI,OAAA/E,YAAA,CAAA+M,iBAAA;IAAA9M,GAAA;IAAAC,KAAA,EAGA,SAAA8M,qBAAqBA,CAAA,EAAG;MAAA,IAAA3D,KAAA;MACpB;MACA,IAAM4D,UAAU,GAAG,IAAI,CAACC,oBAAoB,CAAC,CAAC;MAC9ClM,QAAQ,CAACyL,eAAe,CAACpK,KAAK,CAAC8K,WAAW,CAAC,eAAe,KAAAjL,MAAA,CAAK+K,UAAU,OAAI,CAAC;;MAE9E;MACA,IAAMG,KAAK,GAAG,IAAI,CAACrI,UAAU,CAAClE,SAAS,CAACU,gBAAgB,CAAC1B,4DAAS,CAAC+I,IAAI,CAACyE,IAAI,CAAC;MAE7ED,KAAK,CAAC5L,OAAO,CAAC,UAAA8L,IAAI,EAAI;QAClBjE,KAAI,CAACkE,gBAAgB,CAACD,IAAI,CAAC;MAC/B,CAAC,CAAC;;MAEF;MACA,IAAI,CAACE,wBAAwB,CAAC,CAAC;;MAE/B;MACA,IAAI,CAACC,uBAAuB,CAAC,CAAC;IAClC;;IAEA;AACJ;AACA;AACA;EAHI;IAAAxN,GAAA;IAAAC,KAAA,EAIA,SAAAqN,gBAAgBA,CAACD,IAAI,EAAE;MAAA,IAAAI,MAAA;MACnB;MACA,IAAMC,OAAO,GAAGL,IAAI,CAACnM,aAAa,CAACtB,4DAAS,CAAC+I,IAAI,CAACgF,YAAY,CAAC;MAC/D,IAAI,CAACD,OAAO,EAAE;;MAEd;MACA,IAAME,gBAAgB,GAAGF,OAAO,CAACxM,aAAa,CAACtB,4DAAS,CAAC+I,IAAI,CAACkF,aAAa,CAAC;MAC5E,IAAI,CAACD,gBAAgB,EAAE;QACnBpO,+CAAK,CAAC4B,IAAI,CAAC,iDAAiD,EAAE,IAAI,EAAE,CAAC,CAAC;QACtE;MACJ;;MAEA;MACA,IAAI0M,UAAU,GAAGT,IAAI,CAACnM,aAAa,aAAAe,MAAA,CAAarC,4DAAS,CAACmO,KAAK,CAACC,MAAM,CAAE,CAAC;MACzE,IAAI,CAACF,UAAU,EAAE;QACbA,UAAU,GAAG/M,QAAQ,CAACa,aAAa,CAAC,KAAK,CAAC;QAC1CkM,UAAU,CAACzG,SAAS,GAAGzH,4DAAS,CAACmO,KAAK,CAACC,MAAM,CAACvN,IAAI,CAAC,CAAC;QACpD4M,IAAI,CAAC7K,WAAW,CAACsL,UAAU,CAAC;MAChC;;MAEA;MACA,IAAMG,UAAU,GAAGP,OAAO,CAACpM,gBAAgB,CACvC,GAAAW,MAAA,CAAGrC,4DAAS,CAAC+I,IAAI,CAACuF,YAAY,sDAAAjM,MAAA,CAC3BrC,4DAAS,CAAC+I,IAAI,CAACwF,gBAAgB,gDAA2C,MAAAlM,MAAA,CAC1ErC,4DAAS,CAAC+I,IAAI,CAACyF,kBAAkB,8CACxC,CAAC;;MAED;MACA,IAAMC,WAAW,GAAG,CAAC,CAAC;MACtBJ,UAAU,CAAC1M,OAAO,CAAC,UAAA+M,IAAI,EAAI;QACvB,IAAMC,OAAO,GAAGD,IAAI,CAACE,OAAO,CAACD,OAAO;QACpC,IAAI,CAACF,WAAW,CAACE,OAAO,CAAC,EAAE;UACvBF,WAAW,CAACE,OAAO,CAAC,GAAG,EAAE;QAC7B;QACAF,WAAW,CAACE,OAAO,CAAC,CAACE,IAAI,CAACH,IAAI,CAAC;MACnC,CAAC,CAAC;;MAEF;MACAI,MAAM,CAACC,IAAI,CAACN,WAAW,CAAC,CAAC9M,OAAO,CAAC,UAAAgN,OAAO,EAAI;QACxC;QACAF,WAAW,CAACE,OAAO,CAAC,CAACK,IAAI,CAAC,UAACC,CAAC,EAAEC,CAAC,EAAK;UAChC,IAAMC,QAAQ,GAAGC,QAAQ,CAACH,CAAC,CAACL,OAAO,CAACS,MAAM,CAACC,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC;UAChE,IAAMC,QAAQ,GAAGJ,QAAQ,CAACF,CAAC,CAACN,OAAO,CAACS,MAAM,CAACC,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC;UAChE,OAAOJ,QAAQ,GAAGK,QAAQ;QAC9B,CAAC,CAAC;;QAEF;QACA,IAAMC,SAAS,GAAGhB,WAAW,CAACE,OAAO,CAAC,CAAC,CAAC,CAAC;QAEzC,IAAIc,SAAS,EAAE;UACX5B,MAAI,CAAC6B,iBAAiB,CAACD,SAAS,EAAEvB,UAAU,CAAC;QACjD;MACJ,CAAC,CAAC;;MAEF;MACA,IAAIF,gBAAgB,EAAE;QAClB,IAAM2B,WAAW,GAAG3B,gBAAgB,CAAC4B,YAAY;QACjDnC,IAAI,CAACmB,OAAO,CAACe,WAAW,GAAGA,WAAW;MAC1C;;MAEA;MACA7B,OAAO,CAACjL,gBAAgB,CAAC,QAAQ,EAAE,YAAM;QACrC;QACAgN,qBAAqB,CAAC,YAAM;UACxB3B,UAAU,CAAC1L,KAAK,CAACsN,SAAS,kBAAAzN,MAAA,CAAkByL,OAAO,CAACpB,SAAS,QAAK;QACtE,CAAC,CAAC;;QAEF;QACA,IAAIoB,OAAO,CAACiC,UAAU,GAAG,CAAC,EAAE;UACxBtC,IAAI,CAAC/J,SAAS,CAACC,GAAG,CAAC3D,4DAAS,CAACgQ,MAAM,CAACC,QAAQ,CAACpP,IAAI,CAAC,CAAC,CAAC;QACxD,CAAC,MAAM;UACH4M,IAAI,CAAC/J,SAAS,CAACK,MAAM,CAAC/D,4DAAS,CAACgQ,MAAM,CAACC,QAAQ,CAACpP,IAAI,CAAC,CAAC,CAAC;QAC3D;MACJ,CAAC,EAAE;QAAEqP,OAAO,EAAE;MAAK,CAAC,CAAC;;MAErB;MACAhC,UAAU,CAAC1L,KAAK,CAACsN,SAAS,kBAAAzN,MAAA,CAAkByL,OAAO,CAACpB,SAAS,QAAK;IACtE;;IAEA;AACJ;AACA;AACA;EAHI;IAAAtM,GAAA;IAAAC,KAAA,EAIA,SAAAqP,iBAAiBA,CAAChB,IAAI,EAAER,UAAU,EAAE;MAChC,IAAMmB,MAAM,GAAGX,IAAI,CAACE,OAAO,CAACS,MAAM;MAClC,IAAI,CAACA,MAAM,EAAE;;MAEb;MACA,IAAIc,MAAM,GAAGjC,UAAU,CAAC5M,aAAa,IAAAe,MAAA,CAAIrC,4DAAS,CAACmO,KAAK,CAACiC,MAAM,sBAAA/N,MAAA,CAAkBgN,MAAM,QAAI,CAAC;;MAE5F;MACA,IAAI,CAACc,MAAM,EAAE;QACTA,MAAM,GAAGhP,QAAQ,CAACa,aAAa,CAAC,KAAK,CAAC;QACtCmO,MAAM,CAAC1I,SAAS,GAAGzH,4DAAS,CAACmO,KAAK,CAACiC,MAAM,CAACvP,IAAI,CAAC,CAAC;;QAEhD;QACA,IAAI6N,IAAI,CAAChL,SAAS,CAACsF,QAAQ,CAAChJ,4DAAS,CAAC+I,IAAI,CAACwF,gBAAgB,CAAC1N,IAAI,CAAC,CAAC,CAAC,EAAE;UACjEsP,MAAM,CAACzM,SAAS,CAACC,GAAG,CAAC3D,4DAAS,CAACmO,KAAK,CAACkC,kBAAkB,CAACxP,IAAI,CAAC,CAAC,CAAC;QACnE;;QAEA;QACAsP,MAAM,CAACvB,OAAO,CAACS,MAAM,GAAGA,MAAM;;QAE9B;QACA,IAAMiB,UAAU,GAAGjB,MAAM,CAACC,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,CAAC,CAAC;QAC1CY,MAAM,CAACvB,OAAO,CAAC2B,SAAS,GAAGD,UAAU;QACrCH,MAAM,CAAC3N,KAAK,CAAC8K,WAAW,CAAC,cAAc,EAAEgD,UAAU,CAAC;;QAEpD;QACA;;QAEA;QACApC,UAAU,CAACtL,WAAW,CAACuN,MAAM,CAAC;MAClC;IACJ;;IAEA;AACJ;AACA;AACA;AACA;EAJI;IAAA/P,GAAA;IAAAC,KAAA,EAKA,SAAAgN,oBAAoBA,CAAA,EAAG;MACnB;MACA,IAAMmD,eAAe,GAAG,IAAI,CAACtL,UAAU,CAAClE,SAAS,CAACU,gBAAgB,CAAC1B,4DAAS,CAACyQ,IAAI,CAACC,WAAW,CAAC;MAE9F,IAAI,CAACF,eAAe,IAAIA,eAAe,CAAC/P,MAAM,KAAK,CAAC,EAAE;QAClDb,+CAAK,CAAC2B,GAAG,CAAC,qEAAqE,EAAE,IAAI,EAAE,CAAC,CAAC;QACzF,OAAO,IAAI,CAAC,CAAC;MACjB;;MAEA;MACA,IAAMoP,OAAO,GAAG,EAAE;MAClB,IAAMC,UAAU,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAEN,eAAe,CAAC/P,MAAM,CAAC;MAEtD,KAAK,IAAIsQ,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGH,UAAU,EAAEG,CAAC,EAAE,EAAE;QACjCJ,OAAO,CAAC9B,IAAI,CAAC2B,eAAe,CAACO,CAAC,CAAC,CAACtE,qBAAqB,CAAC,CAAC,CAACuE,MAAM,CAAC;MACnE;;MAEA;MACAL,OAAO,CAAC3B,IAAI,CAAC,UAACC,CAAC,EAAEC,CAAC;QAAA,OAAKD,CAAC,GAAGC,CAAC;MAAA,EAAC;MAC7B,IAAM+B,YAAY,GAAGN,OAAO,CAACE,IAAI,CAACK,KAAK,CAACP,OAAO,CAAClQ,MAAM,GAAG,CAAC,CAAC,CAAC;MAE5Db,+CAAK,CAAC2B,GAAG,wCAAAc,MAAA,CAAwCsO,OAAO,CAACQ,IAAI,CAAC,IAAI,CAAC,sBAAA9O,MAAA,CAAmB4O,YAAY,SAAM,IAAI,EAAE,CAAC,CAAC;MAEhH,OAAOA,YAAY;IACvB;;IAEA;AACJ;AACA;AACA;EAHI;IAAA7Q,GAAA;IAAAC,KAAA,EAIA,SAAAuN,uBAAuBA,CAAA,EAAG;MAAA,IAAAwD,MAAA;MACtB;MACA,IAAIC,WAAW;;MAEf;MACAzL,MAAM,CAAC/C,gBAAgB,CAAC,QAAQ,EAAE,YAAM;QACpCyO,YAAY,CAACD,WAAW,CAAC;QACzBA,WAAW,GAAGvN,UAAU,CAAC,YAAM;UAC3BsN,MAAI,CAACzD,wBAAwB,CAAC,CAAC;QACnC,CAAC,EAAE,GAAG,CAAC;MACX,CAAC,CAAC;;MAEF;MACA,IAAI,CAACA,wBAAwB,CAAC,CAAC;IACnC;;IAEA;AACJ;AACA;AACA;EAHI;IAAAvN,GAAA;IAAAC,KAAA,EAIA,SAAAsN,wBAAwBA,CAAA,EAAG;MACvB,IAAMJ,KAAK,GAAG,IAAI,CAACrI,UAAU,CAAClE,SAAS,CAACU,gBAAgB,CAAC1B,4DAAS,CAAC+I,IAAI,CAACyE,IAAI,CAAC;MAC7E,IAAMmD,OAAO,GAAG,CAAC,CAAC,CAAC,CAAC;;MAEpBpD,KAAK,CAAC5L,OAAO,CAAC,UAAA8L,IAAI,EAAI;QAClB,IAAMK,OAAO,GAAGL,IAAI,CAACnM,aAAa,CAACtB,4DAAS,CAAC+I,IAAI,CAACgF,YAAY,CAAC;QAC/D,IAAMG,UAAU,GAAGT,IAAI,CAACnM,aAAa,CAACtB,4DAAS,CAACmO,KAAK,CAACC,MAAM,CAAC;QAC7D,IAAMJ,gBAAgB,GAAGF,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAExM,aAAa,CAACtB,4DAAS,CAAC+I,IAAI,CAACkF,aAAa,CAAC;QAE7E,IAAIC,UAAU,IAAIF,gBAAgB,EAAE;UAChC,IAAM2B,WAAW,GAAG3B,gBAAgB,CAAC4B,YAAY;UACjD,IAAM2B,aAAa,GAAGnC,QAAQ,CAAClB,UAAU,CAAC1L,KAAK,CAACwO,MAAM,CAAC,IAAI,CAAC;;UAE5D;UACA,IAAIH,IAAI,CAACW,GAAG,CAACD,aAAa,GAAG5B,WAAW,CAAC,GAAG,CAAC,EAAE;YAC3CzB,UAAU,CAAC1L,KAAK,CAACwO,MAAM,MAAA3O,MAAA,CAAMsN,WAAW,OAAI;YAC5CgB,OAAO,CAAClD,IAAI,CAACmB,OAAO,CAAC6C,IAAI,IAAI,MAAM,CAAC,GAAG9B,WAAW;UACtD;QACJ;MACJ,CAAC,CAAC;;MAEF;MACA,IAAIb,MAAM,CAACC,IAAI,CAAC4B,OAAO,CAAC,CAAClQ,MAAM,GAAG,CAAC,EAAE;QACjCb,+CAAK,CAAC2B,GAAG,CAAC,iDAAiD,EAAEoP,OAAO,EAAE,CAAC,CAAC;MAC5E;IACJ;EAAC;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;AC5OqC;AACM;AACE,CAAC;;AAEnD;AACA;AACA;AACO,IAAMe,aAAa;EACtB;AACJ;AACA;EACI,SAAAA,cAAYxM,UAAU,EAAE;IAAAhF,eAAA,OAAAwR,aAAA;IACpB,IAAI,CAACxM,UAAU,GAAGA,UAAU;IAC5B,IAAI,CAACyM,SAAS,GAAG,CAAC;EACtB;;EAEA;AACJ;AACA;EAFI,OAAAxR,YAAA,CAAAuR,aAAA;IAAAtR,GAAA;IAAAC,KAAA,EAGA,SAAAoG,UAAUA,CAAA,EAAG;MAAA,IAAA+C,KAAA;MACT;MACA,IAAI,CAACoI,eAAe,CAAC,CAAC;;MAEtB;MACAhM,MAAM,CAAC/C,gBAAgB,CAAC,QAAQ,EAAE,YAAM;QACpC2G,KAAI,CAACoI,eAAe,CAAC,CAAC;MAC1B,CAAC,CAAC;;MAEF;MACA,IAAI,CAACC,kBAAkB,CAAC,CAAC;MAEzBjS,+CAAK,CAAC2B,GAAG,CAAC,4BAA4B,EAAE,IAAI,EAAE,CAAC,CAAC;IACpD;;IAEA;AACJ;AACA;EAFI;IAAAnB,GAAA;IAAAC,KAAA,EAGA,SAAAuR,eAAeA,CAAA,EAAG;MACd;MACA,IAAMrE,KAAK,GAAG1N,qDAAQ,CAACiS,WAAW,CAAC9R,4DAAS,CAAC+I,IAAI,CAACyE,IAAI,EAAE,IAAI,CAACtI,UAAU,CAAClE,SAAS,CAAC;MAClF,IAAI,CAACuM,KAAK,IAAIA,KAAK,CAAC9M,MAAM,KAAK,CAAC,EAAE;MAElC,IAAMgN,IAAI,GAAGF,KAAK,CAAC,CAAC,CAAC;MACrB,IAAMwE,QAAQ,GAAGtE,IAAI,CAACuE,WAAW;MAEjC,IAAID,QAAQ,KAAK,IAAI,CAACJ,SAAS,EAAE;QAC7B,IAAI,CAACA,SAAS,GAAGI,QAAQ;;QAEzB;QACA,IAAI,CAACE,cAAc,CAAC,mBAAmB,KAAA5P,MAAA,CAAK,IAAI,CAACsP,SAAS,OAAI,CAAC;QAE/D/R,+CAAK,CAAC2B,GAAG,uCAAAc,MAAA,CAAuC,IAAI,CAACsP,SAAS,SAAM,IAAI,EAAE,CAAC,CAAC;MAChF;IACJ;;IAEA;AACJ;AACA;AACA;AACA;EAJI;IAAAvR,GAAA;IAAAC,KAAA,EAKA,SAAA4R,cAAcA,CAACpR,IAAI,EAAER,KAAK,EAAE;MACxBc,QAAQ,CAACyL,eAAe,CAACpK,KAAK,CAAC8K,WAAW,CAACzM,IAAI,EAAER,KAAK,CAAC;IAC3D;;IAEA;AACJ;AACA;EAFI;IAAAD,GAAA;IAAAC,KAAA,EAGA,SAAAwR,kBAAkBA,CAAA,EAAG;MAAA,IAAAhE,MAAA;MACjB;MACA,IAAMjF,QAAQ,GAAG,IAAIC,gBAAgB,CAAC,UAACC,SAAS,EAAK;QACjD,IAAIoJ,YAAY,GAAG,KAAK;QAAC,IAAAC,SAAA,GAAAC,0BAAA,CAEFtJ,SAAS;UAAAuJ,KAAA;QAAA;UAAhC,KAAAF,SAAA,CAAAG,CAAA,MAAAD,KAAA,GAAAF,SAAA,CAAAI,CAAA,IAAAC,IAAA,GAAkC;YAAA,IAAvB1I,QAAQ,GAAAuI,KAAA,CAAAhS,KAAA;YACf,IAAIyJ,QAAQ,CAAC7H,IAAI,KAAK,WAAW,IAC5B6H,QAAQ,CAAC7H,IAAI,KAAK,YAAY,KAC7B6H,QAAQ,CAACC,aAAa,KAAK,OAAO,IAAID,QAAQ,CAACC,aAAa,KAAK,OAAO,CAAE,EAAE;cAC9EmI,YAAY,GAAG,IAAI;cACnB;YACJ;UACJ;QAAC,SAAAO,GAAA;UAAAN,SAAA,CAAArP,CAAA,CAAA2P,GAAA;QAAA;UAAAN,SAAA,CAAAO,CAAA;QAAA;QAED,IAAIR,YAAY,EAAE;UACdrE,MAAI,CAAC+D,eAAe,CAAC,CAAC;QAC1B;MACJ,CAAC,CAAC;;MAEF;MACAhJ,QAAQ,CAACO,OAAO,CAAC,IAAI,CAACjE,UAAU,CAAClE,SAAS,EAAE;QACxCqI,SAAS,EAAE,IAAI;QACfD,OAAO,EAAE,IAAI;QACbE,UAAU,EAAE,IAAI;QAChBC,eAAe,EAAE,CAAC,OAAO,EAAE,OAAO;MACtC,CAAC,CAAC;;MAEF;MACA,IAAI,CAACX,QAAQ,GAAGA,QAAQ;MAExBhJ,+CAAK,CAAC2B,GAAG,CAAC,8CAA8C,EAAE,IAAI,EAAE,CAAC,CAAC;IACtE;;IAEA;AACJ;AACA;EAFI;IAAAnB,GAAA;IAAAC,KAAA,EAGA,SAAA0M,OAAOA,CAAA,EAAG;MACN,IAAI,IAAI,CAACnE,QAAQ,EAAE;QACf,IAAI,CAACA,QAAQ,CAACK,UAAU,CAAC,CAAC;QAC1B,IAAI,CAACL,QAAQ,GAAG,IAAI;MACxB;MAEAhJ,+CAAK,CAAC2B,GAAG,CAAC,0BAA0B,EAAE,IAAI,EAAE,CAAC,CAAC;IAClD;EAAC;AAAA;;;;;;;;;;;;;;;;;;;;;;AC9GqC;AACQ;;AAElD;AACA;AACA;AACO,IAAMoR,kBAAkB;EAC3B;AACJ;AACA;EACI,SAAAA,mBAAYzN,UAAU,EAAE;IAAAhF,eAAA,OAAAyS,kBAAA;IACpB,IAAI,CAACzN,UAAU,GAAGA,UAAU;IAC5B,IAAI,CAAC0N,SAAS,GAAG,KAAK;EAC1B;;EAEA;AACJ;AACA;EAFI,OAAAzS,YAAA,CAAAwS,kBAAA;IAAAvS,GAAA;IAAAC,KAAA,EAGA,SAAAwS,0BAA0BA,CAAA,EAAG;MAAA,IAAArJ,KAAA;MACzB;MACA,IAAM+D,KAAK,GAAG,IAAI,CAACrI,UAAU,CAAClE,SAAS,CAACU,gBAAgB,CAAC1B,4DAAS,CAAC+I,IAAI,CAACyE,IAAI,CAAC;MAE7E,IAAID,KAAK,CAAC9M,MAAM,KAAK,CAAC,EAAE;QACpBb,+CAAK,CAAC2B,GAAG,+DAAAc,MAAA,CAA+DkL,KAAK,CAAC9M,MAAM,GAAI,IAAI,EAAE,CAAC,CAAC;QAChG;MACJ;MAEA,IAAMqS,QAAQ,GAAGvF,KAAK,CAAC,CAAC,CAAC;MACzB,IAAMwF,SAAS,GAAGxF,KAAK,CAAC,CAAC,CAAC;;MAE1B;MACA,IAAMyF,WAAW,GAAGF,QAAQ,CAACxR,aAAa,CAACtB,4DAAS,CAAC+I,IAAI,CAACgF,YAAY,CAAC;MACvE,IAAMkF,YAAY,GAAGF,SAAS,CAACzR,aAAa,CAACtB,4DAAS,CAAC+I,IAAI,CAACgF,YAAY,CAAC;MAEzE,IAAI,CAACiF,WAAW,IAAI,CAACC,YAAY,EAAE;QAC/BrT,+CAAK,CAAC2B,GAAG,CAAC,oEAAoE,EAAE,IAAI,EAAE,CAAC,CAAC;QACxF;MACJ;;MAEA;MACA,IAAI,CAACyR,WAAW,GAAGA,WAAW;MAC9B,IAAI,CAACC,YAAY,GAAGA,YAAY;;MAEhC;MACAD,WAAW,CAACnQ,gBAAgB,CAAC,QAAQ,EAAE;QAAA,OAAM2G,KAAI,CAAC0J,aAAa,CAACF,WAAW,EAAEC,YAAY,CAAC;MAAA,GAAE;QAAE/C,OAAO,EAAE;MAAK,CAAC,CAAC;MAC9G+C,YAAY,CAACpQ,gBAAgB,CAAC,QAAQ,EAAE;QAAA,OAAM2G,KAAI,CAAC0J,aAAa,CAACD,YAAY,EAAED,WAAW,CAAC;MAAA,GAAE;QAAE9C,OAAO,EAAE;MAAK,CAAC,CAAC;;MAE/G;MACAtK,MAAM,CAAC/C,gBAAgB,CAAC,QAAQ,EAAE,YAAM;QACpC2G,KAAI,CAAC2J,kBAAkB,CAACH,WAAW,CAAC;QACpCxJ,KAAI,CAAC2J,kBAAkB,CAACF,YAAY,CAAC;MACzC,CAAC,CAAC;MAEFrT,+CAAK,CAAC2B,GAAG,CAAC,2EAA2E,EAAE,IAAI,EAAE,CAAC,CAAC;IACnG;;IAEA;AACJ;AACA;AACA;EAHI;IAAAnB,GAAA;IAAAC,KAAA,EAIA,SAAA6S,aAAaA,CAACE,aAAa,EAAEC,aAAa,EAAE;MAAA,IAAAxF,MAAA;MACxC;MACA,IAAI,CAAC,IAAI,CAAC+E,SAAS,EAAE;QACjB,IAAI,CAACA,SAAS,GAAG,IAAI;;QAErB;QACAS,aAAa,CAAC3G,SAAS,GAAG0G,aAAa,CAAC1G,SAAS;;QAEjD;QACA2G,aAAa,CAACtD,UAAU,GAAGqD,aAAa,CAACrD,UAAU;QAEnD,IAAI,CAACoD,kBAAkB,CAACC,aAAa,CAAC;;QAEtC;QACAtP,UAAU,CAAC,YAAM;UACb+J,MAAI,CAAC+E,SAAS,GAAG,KAAK;QAC1B,CAAC,EAAE,EAAE,CAAC;MACV;IACJ;;IAEA;AACJ;AACA;AACA;EAHI;IAAAxS,GAAA;IAAAC,KAAA,EAIA,SAAA8S,kBAAkBA,CAACG,cAAc,EAAE;MAC/B,IAAMC,WAAW,GAAGD,cAAc,CAAC5P,SAAS,CAACsF,QAAQ,CAAChJ,4DAAS,CAACgQ,MAAM,CAACC,QAAQ,CAACpP,IAAI,CAAC,CAAC,CAAC;MACvF,IAAM2S,UAAU,GAAGF,cAAc,CAACvD,UAAU,GAAG,CAAC;;MAEhD;MACA,IAAIwD,WAAW,KAAKC,UAAU,EAAE;QAC5B,IAAIA,UAAU,EAAE;UACZF,cAAc,CAAC5P,SAAS,CAACC,GAAG,CAAC3D,4DAAS,CAACgQ,MAAM,CAACC,QAAQ,CAACpP,IAAI,CAAC,CAAC,CAAC;QAClE,CAAC,MAAM;UACHyS,cAAc,CAAC5P,SAAS,CAACK,MAAM,CAAC/D,4DAAS,CAACgQ,MAAM,CAACC,QAAQ,CAACpP,IAAI,CAAC,CAAC,CAAC;QACrE;MACJ;IACJ;EAAC;AAAA","sources":["webpack://diff-files/./src/components/syntax/CopyButton.js","webpack://diff-files/./src/components/viewer/BrowserUIManager.js","webpack://diff-files/./src/components/viewer/IconMarkerManager.js","webpack://diff-files/./src/components/viewer/LayoutManager.js","webpack://diff-files/./src/components/viewer/ScrollSynchronizer.js"],"sourcesContent":["import { Debug } from '../../utils/Debug';\nimport { DOMUtils } from '../../utils/DOMUtils';\nimport { ModalManager } from '../modal/ModalManager';\nimport { TranslationManager } from '../../utils/TranslationManager';\nimport Selectors from '../../constants/Selectors';\n\n/**\n * Adds copy buttons to code blocks in the preview modal\n * This implementation uses a fallback strategy for maximum browser compatibility\n */\nexport class CopyButton {\n    /**\n     * Initialize copy buttons for code blocks\n     * @param {string} containerId - ID of the container element\n     * @returns {boolean} Success status\n     */\n    static addCopyButtonsToPreview(containerId = Selectors.MODAL.PREVIEW_CONTENT_ID.name()) {\n        // Get instance of TranslationManager\n        const translationManager = TranslationManager.getInstance();\n\n        const container = DOMUtils.getElement(containerId);\n\n        if (!container) {\n            // Try direct DOM methods too\n            const directElement = document.getElementById(containerId);\n            const querySelectorElement = document.querySelector('#' + containerId);\n\n            Debug.log('CopyButton: Alternative container lookup results', {\n                getElementById: !!directElement,\n                querySelector: !!querySelectorElement\n            }, 2);\n\n            Debug.warn('CopyButton: Preview container not found', null, 2);\n            return false;\n        }\n\n        // Find all code blocks within the container\n        const preElements = container.querySelectorAll('pre');\n\n        if (!preElements || preElements.length === 0) {\n            Debug.log('CopyButton: No code blocks found in preview', null, 3);\n            return false;\n        }\n\n        // Add copy button to each pre element\n        preElements.forEach(pre => {\n            // Check if button already exists\n            if (pre.querySelector(Selectors.COPY.BUTTON)) {\n                return;\n            }\n\n            // Create copy button\n            const button = DOMUtils.createElement('button', null, Selectors.COPY.BUTTON.name(), {\n                type: 'button',\n                title: translationManager.get('copyCode')\n            });\n\n            // Add copy button content\n            button.innerHTML = `<span class=\"${Selectors.COPY.ICON.name()}\"></span><span class=\"${Selectors.COPY.TEXT.name()}\">${translationManager.get('copy')}</span>`;\n\n            // Position the button within the pre element\n            pre.style.position = 'relative';\n\n            // Find code element and insert button before it\n            const codeEl = pre.querySelector('code');\n            if (codeEl) {\n                pre.insertBefore(button, codeEl);\n            } else {\n                // Fallback to appending if no code element found\n                pre.appendChild(button);\n            }\n\n            // Add click event with progressive fallback\n            button.addEventListener('click', function(e) {\n                e.preventDefault();\n                e.stopPropagation();\n\n                const codeEl = pre.querySelector('code');\n                if (!codeEl) return;\n\n                // Store reference to the code element for later use\n                // This is important to maintain context during asynchronous operations\n                CopyButton._sourceCodeElement = codeEl;\n\n                // Get text content - use most reliable method\n                let textToCopy;\n                if (codeEl.hasAttribute('data-original-code')) {\n                    textToCopy = CopyButton._decodeHTMLEntities(codeEl.getAttribute('data-original-code'));\n                    Debug.log('CopyButton: Using original code from attribute', null, 3);\n                } else {\n                    textToCopy = codeEl.textContent || '';\n                    textToCopy = textToCopy.replace(/\\n\\n+/g, '\\n');\n                    Debug.log('CopyButton: Using text content from code element', null, 3);\n                }\n\n                Debug.log('CopyButton: Text length: ' + textToCopy.length, null, 3);\n\n                // Go straight to the most reliable method - manual copy\n                // This ensures consistent behavior across all browsers\n                CopyButton._showManualCopyModal(textToCopy);\n\n                // Show visual feedback that copy operation was initiated\n                CopyButton._showProcessingState(button);\n            });\n        });\n\n        Debug.log(`CopyButton: Added copy buttons to ${preElements.length} code blocks`, null, 2);\n        return true;\n    }\n\n    /**\n     * Show processing state on button\n     * @param {HTMLElement} button - Button element to update\n     * @private\n     */\n    static _showProcessingState(button) {\n        button.classList.add(Selectors.COPY.PROCESSING.name());\n        const textSpan = button.querySelector(`.${Selectors.COPY.TEXT.name()}`);\n        if (textSpan) {\n            textSpan.textContent = 'Open Copy Dialog...';\n        }\n\n        setTimeout(() => {\n            button.classList.remove(Selectors.COPY.PROCESSING.name());\n            if (textSpan) {\n                textSpan.textContent = 'Copy';\n            }\n        }, 1000);\n    }\n\n    /**\n     * Show copied state on button\n     * @param {HTMLElement} button - Button element to update\n     * @private\n     */\n    static _showCopiedState(button) {\n        button.classList.add(Selectors.COPY.COPIED.name());\n        const textSpan = button.querySelector(`.${Selectors.COPY.TEXT.name()}`);\n        if (textSpan) {\n            textSpan.textContent = 'Copied!';\n        }\n\n        setTimeout(() => {\n            button.classList.remove(Selectors.COPY.COPIED.name());\n            if (textSpan) {\n                textSpan.textContent = 'Copy';\n            }\n        }, 2000);\n    }\n\n    /**\n     * Show a modal dialog with text for manual copying using ModalManager\n     * @param {string} text - Text to copy\n     * @private\n     */\n    static _showManualCopyModal(text) {\n        // Get singleton instance of ModalManager\n        const modalManager = ModalManager.getInstance();\n\n        // Create the copy modal and get its ID\n        const modalId = modalManager.createCopyModal(text);\n\n        // Open the modal\n        modalManager.open(modalId);\n\n        Debug.log('CopyButton: Showing manual copy modal', null, 2);\n    }\n\n    /**\n     * Show copy failure on button\n     * @param {HTMLElement} button - Button element to update\n     * @private\n     */\n    static _showCopyFailure(button) {\n        button.innerHTML = DOMUtils.getIconHtml('exclamation-triangle', { classes: Selectors.UTILITY.MARGIN_END_2.name() }) + 'Copy Failed';\n        button.classList.remove(Selectors.UTILITY.BUTTON_PRIMARY.name(), Selectors.UTILITY.BUTTON_SUCCESS.name());\n        button.classList.add(Selectors.UTILITY.BUTTON_DANGER.name());\n\n        setTimeout(() => {\n            button.innerHTML = DOMUtils.getIconHtml('copy', { classes: Selectors.UTILITY.MARGIN_END_2.name() }) + 'Try Again';\n            button.classList.remove(Selectors.UTILITY.BUTTON_DANGER.name());\n            button.classList.add(Selectors.UTILITY.BUTTON_PRIMARY.name());\n        }, 2000);\n    }\n\n    /**\n     * Decode HTML entities in a string\n     * @param {string} html - String with HTML entities\n     * @returns {string} Decoded string\n     * @private\n     */\n    static _decodeHTMLEntities(html) {\n        if (!html) return '';\n\n        const textarea = document.createElement('textarea');\n        textarea.innerHTML = html;\n        return textarea.value;\n    }\n}\n","import { Debug } from '../../utils/Debug';\nimport Selectors from '../../constants/Selectors';\nimport { DOMUtils } from '../../utils/DOMUtils';\nimport { TranslationManager } from '../../utils/TranslationManager';\n\n/**\n * Manages browser UI generation for file-browser.php\n * This component handles the dynamic generation of UI elements that were previously\n * hardcoded in the PHP file, ensuring proper use of selectors and translations.\n */\nexport class BrowserUIManager {\n    /**\n     * @param {DiffViewer|Object} diffViewer - Parent diff viewer instance or options object\n     */\n    constructor (diffViewer) {\n        // Handle both DiffViewer instance or options object\n        if (diffViewer && diffViewer.options) {\n            this.diffViewer = diffViewer;\n            this.options = diffViewer.options;\n        } else {\n            this.diffViewer = null;\n            this.options = diffViewer || {};\n        }\n\n        this.container = null;\n        this.elements = {\n            themeSwitcher: null,\n            diffContainer: null,\n            mergeControls: null\n        };\n\n        // Get the translation manager instance\n        this.translationManager = TranslationManager.getInstance();\n\n        // Log translation state for debugging\n        let translationsSource;\n\n        // Extract nested ternary operations into separate statements\n        const hasWindowConfig = !!window.diffConfig?.translations;\n        const hasOptionsTranslations = !!this.options?.translations;\n\n        if (this.translationManager.isInitialized()) {\n            translationsSource = 'TranslationManager';\n        } else if (hasWindowConfig) {\n            translationsSource = 'window.diffConfig';\n        } else if (hasOptionsTranslations) {\n            translationsSource = 'options';\n        } else {\n            translationsSource = 'none';\n        }\n\n        const lang = this.translationManager.getLanguage();\n\n        Debug.log(`BrowserUIManager: Created with \"${lang}\" translations from ${translationsSource}`,\n                 this.translationManager.getAllTranslations(), 2);\n    }\n\n    /**\n     * Set the DiffViewer instance\n     * @param {DiffViewer} diffViewer - The DiffViewer instance\n     */\n    setDiffViewer(diffViewer) {\n        if (diffViewer && diffViewer.options) {\n            this.diffViewer = diffViewer;\n            this.options = diffViewer.options;\n            Debug.log('BrowserUIManager: Updated DiffViewer reference', null, 3);\n            return true;\n        }\n        return false;\n    }\n\n    /**\n     * Get translations from options\n     * @returns {Object} Translations object\n     */\n    getTranslations() {\n        // First, try to get translations from the TranslationManager\n        if (this.translationManager && this.translationManager.isInitialized()) {\n            Debug.log('BrowserUIManager: Using translations from TranslationManager', this.translationManager.getAllTranslations(), 3);\n            return this.translationManager.getAllTranslations();\n        }\n\n        // Second, try to auto-initialize TranslationManager with window.diffConfig\n        if (window.diffConfig?.translations && typeof window.diffConfig.translations === 'object') {\n            Debug.log('BrowserUIManager: Auto-initializing TranslationManager from window.diffConfig', window.diffConfig.translations, 3);\n            this.translationManager.initialize(\n                window.diffConfig.lang || 'en',\n                window.diffConfig.translations\n            );\n            return this.translationManager.getAllTranslations();\n        }\n\n        // Fall back to local options if nothing else works\n        if (this.options?.translations && typeof this.options.translations === 'object') {\n            Debug.log('BrowserUIManager: Using translations from local options', this.options.translations, 3);\n            return this.options.translations;\n        }\n\n        Debug.log('BrowserUIManager: No translations found, using empty object', null, 3);\n        return {};\n    }\n\n    /**\n     * Initialize UI components\n     * @param {string} containerSelector - Container element selector\n     */\n    initialize(containerSelector = Selectors.CONTAINER.WRAPPER) {\n        Debug.log('BrowserUIManager: Initializing UI components', null, 2);\n\n        this.container = document.querySelector(containerSelector);\n\n        if (!this.container) {\n            Debug.error('BrowserUIManager: Container element not found', null, 2);\n            return false;\n        }\n\n        // Change the order of generation - create diff container first\n        this.generateDiffContainer();\n        this.generateThemeSwitcher();\n        this.generateMergeControls();\n\n        Debug.log('BrowserUIManager: UI components generated', null, 2);\n        return true;\n    }\n\n    /**\n     * Generate theme switcher UI\n     */\n    generateThemeSwitcher() {\n        Debug.log('BrowserUIManager: Generating theme switcher', null, 3);\n\n        // Get the ID without the # prefix for createElement\n        const themeSwitcherId = Selectors.THEME.SWITCHER.name();\n        const themeLoadingId = Selectors.THEME.LOADING_INDICATOR.name();\n        const themeToggleId = Selectors.THEME.TOGGLE.name();\n\n        // Create theme switcher element\n        const themeSwitcher = document.createElement('div');\n        themeSwitcher.id = themeSwitcherId;\n        themeSwitcher.className = `${Selectors.UTILITY.FLEX.name()} ${Selectors.UTILITY.JUSTIFY_CONTENT_BETWEEN.name()} ${Selectors.UTILITY.PADDING_2.name()}`;\n        themeSwitcher.style.cssText = 'display: none !important; position: relative;';\n\n        // Create theme switcher wrapper\n        const switcherWrapper = document.createElement('div');\n        switcherWrapper.className = Selectors.THEME_SWITCHER.WRAPPER.name();\n\n        // Get SVG icons for light/dark mode\n        const sunIcon = DOMUtils.getIconHtml('sun', { classes: Selectors.UTILITY.MARGIN_END_2.name() });\n        const moonIcon = DOMUtils.getIconHtml('moon', { classes: Selectors.UTILITY.MARGIN_START_2.name() });\n\n        // Create theme switcher content with toggle\n        switcherWrapper.innerHTML = `\n            <span class=\"${Selectors.THEME_SWITCHER.LABEL.name()} ${Selectors.UTILITY.MARGIN_END_2.name()}\">${sunIcon}</span>\n            <label class=\"${Selectors.THEME_SWITCHER.CONTROL.name()}\" for=\"${themeToggleId}\">\n                <input type=\"checkbox\" id=\"${themeToggleId}\" checked>\n                <span class=\"${Selectors.THEME_SWITCHER.SLIDER.name()} ${Selectors.THEME_SWITCHER.SLIDER_ROUND.name()}\"></span>\n            </label>\n            <span class=\"${Selectors.THEME_SWITCHER.LABEL.name()} ${Selectors.UTILITY.MARGIN_START_2.name()} \">${moonIcon}</span>\n        `;\n\n        // Append elements to theme switcher\n        themeSwitcher.appendChild(switcherWrapper);\n\n        // Create a separate container for the loader outside the theme switcher hierarchy\n        const loadingContainer = document.createElement('div');\n        loadingContainer.id = themeLoadingId;\n        loadingContainer.style.display = 'none';\n        loadingContainer.style.position = 'absolute';\n        loadingContainer.style.zIndex = '1000';\n\n        // Append theme switcher to container\n        this.container.appendChild(themeSwitcher);\n\n        // Append loading container to body for proper positioning\n        document.body.appendChild(loadingContainer);\n\n        // Store reference\n        this.elements.themeSwitcher = themeSwitcher;\n        this.elements.themeLoadingContainer = loadingContainer;\n\n        // Watch for the vdm-diff__container to have 'loaded' class\n        const observer = new MutationObserver((mutations) => {\n            mutations.forEach(() => {\n                const diffContainer = document.getElementById(Selectors.DIFF.CONTAINER.name());\n                if (diffContainer && diffContainer.classList.contains('loaded')) {\n                    // If the container is loaded, make the theme switcher visible\n                    if (themeSwitcher) {\n                        themeSwitcher.style.cssText = 'display: flex !important; position: relative;';\n                    }\n                    // Disconnect the observer once we've made the change\n                    observer.disconnect();\n                }\n            });\n        });\n\n        // Start observing the container's parent element for child changes\n        const containerParent = this.container || document.body;\n        observer.observe(containerParent, {\n            subtree: true,\n            childList: true,\n            attributes: true,\n            attributeFilter: ['class']\n        });\n    }\n\n    /**\n     * Generate diff container UI\n     */\n    generateDiffContainer() {\n        Debug.log('BrowserUIManager: Generating diff container', null, 3);\n\n        // Get IDs without the # prefix for createElement\n        const diffContainerId = Selectors.DIFF.CONTAINER.name();\n        const viewerId = Selectors.DIFF.VIEWER.name();\n\n        // Create diff container\n        const diffContainer = document.createElement('div');\n        diffContainer.id = diffContainerId;\n\n        // Create viewer element\n        const viewerElement = document.createElement('div');\n        viewerElement.id = viewerId;\n        viewerElement.className = Selectors.UTILITY.MARGIN_TOP_2.name();\n        viewerElement.style.display = 'none';\n\n        // Set up a mutation observer to watch for display changes on the viewer element\n        const observer = new MutationObserver((mutations) => {\n            mutations.forEach((mutation) => {\n                if (mutation.type === 'attributes' &&\n                    mutation.attributeName === 'style' &&\n                    viewerElement.style.display !== 'none') {\n                    // If viewer becomes visible, show the theme switcher\n                    if (this.elements.themeSwitcher) {\n                        this.elements.themeSwitcher.style.display = 'flex';\n                    }\n                }\n            });\n        });\n\n        // Start observing the viewer element for style changes\n        observer.observe(viewerElement, { attributes: true });\n\n        // Append elements to diff container\n        diffContainer.appendChild(viewerElement);\n\n        // Append diff container to container\n        this.container.appendChild(diffContainer);\n\n        // Store reference and log creation\n        this.elements.diffContainer = diffContainer;\n\n        // Verify the element was created\n        const createdViewer = document.getElementById(viewerId);\n        Debug.log(`BrowserUIManager: Viewer element (${viewerId}) created successfully: ${!!createdViewer}`, null, 3);\n    }\n\n    /**\n     * Generate merge controls UI using translations from DiffViewer\n     */\n    generateMergeControls() {\n        Debug.log('BrowserUIManager: Generating merge controls structure only', null, 3);\n\n        // Get translations from options\n        const translations = this.getTranslations();\n\n        // Get IDs without the # prefix for createElement\n        const previewButtonId = Selectors.MERGE.BUTTON_PREVIEW.name();\n        const toggleButtonId = Selectors.MERGE.DESTINATION_TOGGLE.name();\n        const toggleIconId = Selectors.MERGE.TOGGLE_ICON.name();\n        const toggleTextId = Selectors.MERGE.TOGGLE_TEXT.name();\n        const dropdownId = Selectors.MERGE.DESTINATION_DROPDOWN.name();\n        const applyButtonId = Selectors.MERGE.BUTTON_APPLY.name();\n\n        // Create merge controls container\n        const mergeControls = document.createElement('div');\n        mergeControls.className = `${Selectors.MERGE.CONTROLS_ACTIONS.name()} ${Selectors.UTILITY.FLEX.name()} ${Selectors.UTILITY.ALIGN_ITEMS_CENTER.name()} ${Selectors.UTILITY.JUSTIFY_CONTENT_BETWEEN.name()} ${Selectors.UTILITY.MARGIN_Y_2.name()} ${Selectors.UTILITY.PADDING_2.name()}`;\n\n        // Create preview button section\n        const previewSection = document.createElement('div');\n\n        const previewButton = document.createElement('button');\n        previewButton.id = previewButtonId;\n        previewButton.className = `${Selectors.UTILITY.BUTTON.name()} ${Selectors.UTILITY.BUTTON_INFO.name()}`;\n        previewButton.type = 'button';\n        previewButton.innerHTML = `${DOMUtils.getIconHtml('eye', { classes: Selectors.UTILITY.MARGIN_END_2.name() })}${translations.preview || 'Preview'}`;\n\n        previewSection.appendChild(previewButton);\n\n        // Create merge controls section\n        const mergeSection = document.createElement('div');\n        mergeSection.className = `${Selectors.UTILITY.FLEX.name()} ${Selectors.UTILITY.ALIGN_ITEMS_CENTER.name()}`;\n\n        // Create a group for toggle button and dropdown - using input-group styling approach\n        const toggleGroup = document.createElement('div');\n        toggleGroup.className = `${Selectors.UTILITY.FLEX.name()} ${Selectors.UTILITY.ALIGN_ITEMS_STRETCH.name()} ${Selectors.UTILITY.MARGIN_END_3.name()}`;\n        // Add class for styling instead of inline style\n        toggleGroup.classList.add('vdm-input-group');\n\n        // Create destination toggle button\n        const toggleButton = document.createElement('button');\n        toggleButton.id = toggleButtonId;\n        toggleButton.className = `${Selectors.UTILITY.BUTTON.name()} ${Selectors.UTILITY.BUTTON_FLAT.name()} vdm-input-group__prepend`;\n        toggleButton.type = 'button'; // Explicitly set type to button\n\n        const toggleIcon = document.createElement('span');\n        toggleIcon.id = toggleIconId;\n        toggleIcon.innerHTML = DOMUtils.getIconHtml('plus-circle', { classes: Selectors.UTILITY.MARGIN_END_2.name() });\n\n        const toggleText = document.createElement('span');\n        toggleText.id = toggleTextId;\n        toggleText.setAttribute('title', translations.saveToOriginalTooltip || 'Replace the current file with merged content');\n        toggleText.textContent = translations.saveToOriginal || 'Save to original';\n\n        toggleButton.appendChild(toggleIcon);\n        toggleButton.appendChild(toggleText);\n\n        // Create empty destination dropdown - IMPORTANT CHANGE: No options added\n        const dropdown = document.createElement('select');\n        dropdown.id = dropdownId;\n        dropdown.className = `${Selectors.UTILITY.FORM_SELECT.name()} vdm-input-group__append vdm-select-auto-width`;\n        // No options are added here - This will be handled by MergeUIController\n\n        // Add toggle button and dropdown to the toggle group with no spacing between them\n        toggleGroup.appendChild(toggleButton);\n        toggleGroup.appendChild(dropdown);\n\n        // Create apply merge button\n        const applyButton = document.createElement('button');\n        applyButton.id = applyButtonId;\n        applyButton.className = `${Selectors.UTILITY.BUTTON.name()} ${Selectors.UTILITY.BUTTON_PRIMARY.name()} vdm-nowrap`;\n        applyButton.type = 'button';\n        applyButton.innerHTML = (translations.applyMerge || 'Apply Merge') + ` ${DOMUtils.getIconHtml('file-circle-plus', { classes: Selectors.UTILITY.MARGIN_START_2.name() })}`;\n        applyButton.style.whiteSpace = 'nowrap';\n        applyButton.style.display = 'inline-flex';\n        applyButton.style.alignItems = 'center';\n\n        // Append toggle group and apply button to merge section\n        mergeSection.appendChild(toggleGroup);\n        mergeSection.appendChild(applyButton);\n\n        // Append sections to merge controls\n        mergeControls.appendChild(previewSection);\n        mergeControls.appendChild(mergeSection);\n\n        // Append merge controls to container\n        this.container.appendChild(mergeControls);\n\n        // Store reference\n        this.elements.mergeControls = mergeControls;\n\n        Debug.log('BrowserUIManager: Created empty merge controls structure (options will be populated by MergeUIController)', null, 2);\n    }\n\n    /**\n     * Show theme loading indicator using the LoaderManager\n     */\n    showThemeLoading() {\n        const loadingContainer = this.elements.themeLoadingContainer;\n        const themeSwitcher = this.elements.themeSwitcher;\n\n        if (loadingContainer && themeSwitcher) {\n            // Get the translated message\n            const message = TranslationManager.getInstance().get('loadingTheme', 'Loading theme...');\n\n            // Use proper CSS classes for styling\n            loadingContainer.innerHTML = `\n                <div class=\"vdm-theme__loading-spinner\"></div>\n                <span>${message}</span>\n            `;\n\n            // Add styling for the translucid background and rounded corners\n            loadingContainer.className = 'vdm-theme__loading-indicator';\n\n            // Get the position of the theme switcher\n            const rect = themeSwitcher.getBoundingClientRect();\n            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;\n\n            // Position the loader just above the theme switcher\n            loadingContainer.style.top = (rect.top + scrollTop - 40) + 'px';\n\n            // Make the loader visible\n            loadingContainer.style.display = 'flex';\n        }\n    }\n\n    /**\n     * Hide theme loading indicator\n     */\n    hideThemeLoading() {\n        const loadingContainer = this.elements.themeLoadingContainer;\n        if (loadingContainer) {\n            loadingContainer.style.display = 'none';\n        }\n    }\n\n    /**\n     * Clean up event handlers and resources\n     */\n    destroy() {\n        Debug.log('BrowserUIManager: Destroying UI components', null, 2);\n\n        // Hide any active theme loader\n        this.hideThemeLoading();\n\n        // Remove generated elements\n        if (this.elements.themeSwitcher && this.elements.themeSwitcher.parentNode) {\n            this.elements.themeSwitcher.parentNode.removeChild(this.elements.themeSwitcher);\n        }\n\n        if (this.elements.diffContainer && this.elements.diffContainer.parentNode) {\n            this.elements.diffContainer.parentNode.removeChild(this.elements.diffContainer);\n        }\n\n        if (this.elements.mergeControls && this.elements.mergeControls.parentNode) {\n            this.elements.mergeControls.parentNode.removeChild(this.elements.mergeControls);\n        }\n\n        // Reset references\n        this.elements = {\n            themeSwitcher: null,\n            diffContainer: null,\n            mergeControls: null\n        };\n\n        // Clear DiffViewer reference\n        this.diffViewer = null;\n\n        Debug.log('BrowserUIManager: UI components destroyed', null, 2);\n    }\n}\n","import { Debug } from '../../utils/Debug';\nimport Selectors from '../../constants/Selectors';\n\n/**\n * Manages icon marker creation and positioning\n */\nexport class IconMarkerManager {\n    /**\n     * @param {DiffViewer} diffViewer - Parent diff viewer\n     */\n    constructor(diffViewer) {\n        this.diffViewer = diffViewer;\n    }\n\n    /**\n     * Initialize icon markers with proper scroll synchronization\n     */\n    initializeIconMarkers() {\n        // Measure actual cell height for accurate positioning\n        const cellHeight = this._calculateCellHeight();\n        document.documentElement.style.setProperty('--cell-height', `${cellHeight}px`);\n\n        // Process each diff pane\n        const panes = this.diffViewer.container.querySelectorAll(Selectors.DIFF.PANE);\n\n        panes.forEach(pane => {\n            this._setupIconColumn(pane);\n        });\n\n        // Use a dedicated method to handle all height updates\n        this._updateIconColumnHeights();\n\n        // Set up future height updates for window resizing\n        this._setupIconHeightUpdater();\n    }\n\n    /**\n     * Set up icon column for a pane\n     * @private\n     */\n    _setupIconColumn(pane) {\n        // Get the content container (scrollable area)\n        const content = pane.querySelector(Selectors.DIFF.PANE_CONTENT);\n        if (!content) return;\n\n        // Get code table wrapper to match height\n        const codeTableWrapper = content.querySelector(Selectors.DIFF.TABLE_WRAPPER);\n        if (!codeTableWrapper) {\n            Debug.warn('IconMarkerManager: Code table wrapper not found', null, 2);\n            return;\n        }\n\n        // Create or get icon column\n        let iconColumn = pane.querySelector(`:scope > ${Selectors.ICONS.COLUMN}`);\n        if (!iconColumn) {\n            iconColumn = document.createElement('div');\n            iconColumn.className = Selectors.ICONS.COLUMN.name();\n            pane.appendChild(iconColumn);\n        }\n\n        // Get all cells with chunk IDs\n        const chunkCells = content.querySelectorAll(\n            `${Selectors.DIFF.LINE_CONTENT}[data-chunk-id]:not([data-chunk-id=\"\"]), ` +\n            `${Selectors.DIFF.LINE_PLACEHOLDER}[data-chunk-id]:not([data-chunk-id=\"\"]), ` +\n            `${Selectors.DIFF.LINE_CONTENT_EMPTY}[data-chunk-id]:not([data-chunk-id=\"\"])`\n        );\n\n        // Organize cells by chunk ID\n        const chunkGroups = {};\n        chunkCells.forEach(cell => {\n            const chunkId = cell.dataset.chunkId;\n            if (!chunkGroups[chunkId]) {\n                chunkGroups[chunkId] = [];\n            }\n            chunkGroups[chunkId].push(cell);\n        });\n\n        // Process only the first cell of each chunk\n        Object.keys(chunkGroups).forEach(chunkId => {\n            // Sort by line number\n            chunkGroups[chunkId].sort((a, b) => {\n                const aLineNum = parseInt(a.dataset.lineId.split('-').pop(), 10);\n                const bLineNum = parseInt(b.dataset.lineId.split('-').pop(), 10);\n                return aLineNum - bLineNum;\n            });\n\n            // Get the first cell in the sorted group\n            const firstCell = chunkGroups[chunkId][0];\n\n            if (firstCell) {\n                this._createIconMarker(firstCell, iconColumn);\n            }\n        });\n\n        // Store table height for later use\n        if (codeTableWrapper) {\n            const tableHeight = codeTableWrapper.scrollHeight;\n            pane.dataset.tableHeight = tableHeight;\n        }\n\n        // Set up scroll synchronization\n        content.addEventListener('scroll', () => {\n            // Sync vertical scroll position with requestAnimationFrame\n            requestAnimationFrame(() => {\n                iconColumn.style.transform = `translateY(-${content.scrollTop}px)`;\n            });\n\n            // Handle horizontal scroll state\n            if (content.scrollLeft > 0) {\n                pane.classList.add(Selectors.STATUS.SCROLLED.name());\n            } else {\n                pane.classList.remove(Selectors.STATUS.SCROLLED.name());\n            }\n        }, { passive: true });\n\n        // Initial position\n        iconColumn.style.transform = `translateY(-${content.scrollTop}px)`;\n    }\n\n    /**\n     * Create a single icon marker for a cell\n     * @private\n     */\n    _createIconMarker(cell, iconColumn) {\n        const lineId = cell.dataset.lineId;\n        if (!lineId) return;\n\n        // Check if marker already exists\n        let marker = iconColumn.querySelector(`${Selectors.ICONS.MARKER}[data-line-id=\"${lineId}\"]`);\n\n        // Create new marker only if it doesn't exist\n        if (!marker) {\n            marker = document.createElement('div');\n            marker.className = Selectors.ICONS.MARKER.name();\n\n            // Add class for placeholder lines\n            if (cell.classList.contains(Selectors.DIFF.LINE_PLACEHOLDER.name())) {\n                marker.classList.add(Selectors.ICONS.MARKER_PLACEHOLDER.name());\n            }\n\n            // Use line ID for matching\n            marker.dataset.lineId = lineId;\n\n            // Set position index\n            const lineNumber = lineId.split('-').pop();\n            marker.dataset.iconIndex = lineNumber;\n            marker.style.setProperty('--icon-index', lineNumber);\n\n            // DO NOT transfer selection state classes - they will be managed by ChunkVisualStateManager\n            // Selection state and placeholder status are orthogonal concepts and should be managed separately\n\n            // Add to icon column\n            iconColumn.appendChild(marker);\n        }\n    }\n\n    /**\n     * Calculate cell height with maximum precision\n     * @private\n     * @returns {number} Precise cell height in pixels\n     */\n    _calculateCellHeight() {\n        // Get multiple line number cells for better accuracy\n        const lineNumberCells = this.diffViewer.container.querySelectorAll(Selectors.CODE.LINE_NUMBER);\n\n        if (!lineNumberCells || lineNumberCells.length === 0) {\n            Debug.log('IconMarkerManager: No line number cells found, using default height', null, 2);\n            return 20.5; // Fallback height\n        }\n\n        // Take the median height from first few cells (more reliable than just the first)\n        const heights = [];\n        const sampleSize = Math.min(5, lineNumberCells.length);\n\n        for (let i = 0; i < sampleSize; i++) {\n            heights.push(lineNumberCells[i].getBoundingClientRect().height);\n        }\n\n        // Sort heights and take the median (middle) value\n        heights.sort((a, b) => a - b);\n        const medianHeight = heights[Math.floor(heights.length / 2)];\n\n        Debug.log(`IconMarkerManager: Sampled heights: ${heights.join(', ')}, using median: ${medianHeight}px`, null, 3);\n\n        return medianHeight;\n    }\n\n    /**\n     * Set up height updater for window resizing\n     * @private\n     */\n    _setupIconHeightUpdater() {\n        // Debounce to avoid excessive updates\n        let resizeTimer;\n\n        // Add window resize listener\n        window.addEventListener('resize', () => {\n            clearTimeout(resizeTimer);\n            resizeTimer = setTimeout(() => {\n                this._updateIconColumnHeights();\n            }, 100);\n        });\n\n        // Initial update\n        this._updateIconColumnHeights();\n    }\n\n    /**\n     * Update all icon column heights\n     * @private\n     */\n    _updateIconColumnHeights() {\n        const panes = this.diffViewer.container.querySelectorAll(Selectors.DIFF.PANE);\n        const heights = {}; // Track heights for logging\n\n        panes.forEach(pane => {\n            const content = pane.querySelector(Selectors.DIFF.PANE_CONTENT);\n            const iconColumn = pane.querySelector(Selectors.ICONS.COLUMN);\n            const codeTableWrapper = content?.querySelector(Selectors.DIFF.TABLE_WRAPPER);\n\n            if (iconColumn && codeTableWrapper) {\n                const tableHeight = codeTableWrapper.scrollHeight;\n                const currentHeight = parseInt(iconColumn.style.height) || 0;\n\n                // Only update if height changed significantly\n                if (Math.abs(currentHeight - tableHeight) > 5) {\n                    iconColumn.style.height = `${tableHeight}px`;\n                    heights[pane.dataset.side || 'pane'] = tableHeight;\n                }\n            }\n        });\n\n        // Log all height updates in one message\n        if (Object.keys(heights).length > 0) {\n            Debug.log('IconMarkerManager: Updated icon column heights:', heights, 3);\n        }\n    }\n}\n","import { Debug } from '../../utils/Debug';\nimport { DOMUtils } from '../../utils/DOMUtils';\nimport Selectors from '../../constants/Selectors'; // Add this import\n\n/**\n * Manages layout dimensions and responsive behavior\n */\nexport class LayoutManager {\n    /**\n     * @param {DiffViewer} diffViewer - Parent diff viewer\n     */\n    constructor(diffViewer) {\n        this.diffViewer = diffViewer;\n        this.paneWidth = 0;\n    }\n\n    /**\n     * Initialize layout manager\n     */\n    initialize() {\n        // Initial pane width update\n        this.updatePaneWidth();\n\n        // Listen for window resize\n        window.addEventListener('resize', () => {\n            this.updatePaneWidth();\n        });\n\n        // Set up mutation observer for content changes\n        this.setupWidthObserver();\n\n        Debug.log('LayoutManager: Initialized', null, 2);\n    }\n\n    /**\n     * Update pane width and CSS variables\n     */\n    updatePaneWidth() {\n        // Use DOMUtils.getElements for consistent element selection\n        const panes = DOMUtils.getElements(Selectors.DIFF.PANE, this.diffViewer.container);\n        if (!panes || panes.length === 0) return;\n\n        const pane = panes[0];\n        const newWidth = pane.clientWidth;\n\n        if (newWidth !== this.paneWidth) {\n            this.paneWidth = newWidth;\n\n            // Instead of direct DOM manipulation, use a helper method to set CSS variables\n            this.setCSSVariable('--diff-pane-width', `${this.paneWidth}px`);\n\n            Debug.log(`LayoutManager: Updated pane width: ${this.paneWidth}px`, null, 3);\n        }\n    }\n\n    /**\n     * Set CSS variable consistently\n     * @param {string} name - Variable name\n     * @param {string} value - Variable value\n     */\n    setCSSVariable(name, value) {\n        document.documentElement.style.setProperty(name, value);\n    }\n\n    /**\n     * Set up observer for content changes affecting width\n     */\n    setupWidthObserver() {\n        // Create mutation observer\n        const observer = new MutationObserver((mutations) => {\n            let shouldUpdate = false;\n\n            for (const mutation of mutations) {\n                if (mutation.type === 'childList' ||\n                    (mutation.type === 'attributes' &&\n                     (mutation.attributeName === 'style' || mutation.attributeName === 'class'))) {\n                    shouldUpdate = true;\n                    break;\n                }\n            }\n\n            if (shouldUpdate) {\n                this.updatePaneWidth();\n            }\n        });\n\n        // Start observing the container\n        observer.observe(this.diffViewer.container, {\n            childList: true,\n            subtree: true,\n            attributes: true,\n            attributeFilter: ['style', 'class']\n        });\n\n        // Store for potential cleanup\n        this.observer = observer;\n\n        Debug.log('LayoutManager: Width observer setup complete', null, 2);\n    }\n\n    /**\n     * Clean up event handlers and observers\n     */\n    destroy() {\n        if (this.observer) {\n            this.observer.disconnect();\n            this.observer = null;\n        }\n\n        Debug.log('LayoutManager: Destroyed', null, 2);\n    }\n}\n","import { Debug } from '../../utils/Debug';\nimport Selectors from '../../constants/Selectors';\n\n/**\n * Handles scroll synchronization between panes\n */\nexport class ScrollSynchronizer {\n    /**\n     * @param {DiffViewer} diffViewer - Parent diff viewer\n     */\n    constructor(diffViewer) {\n        this.diffViewer = diffViewer;\n        this.isSyncing = false;\n    }\n\n    /**\n     * Set up synchronized scrolling between panes\n     */\n    setupSynchronizedScrolling() {\n        // Find panes\n        const panes = this.diffViewer.container.querySelectorAll(Selectors.DIFF.PANE);\n\n        if (panes.length !== 2) {\n            Debug.log(`ScrollSynchronizer: Could not find both diff panes. Found: ${panes.length}`, null, 2);\n            return;\n        }\n\n        const leftPane = panes[0];\n        const rightPane = panes[1];\n\n        // Get content elements\n        const leftContent = leftPane.querySelector(Selectors.DIFF.PANE_CONTENT);\n        const rightContent = rightPane.querySelector(Selectors.DIFF.PANE_CONTENT);\n\n        if (!leftContent || !rightContent) {\n            Debug.log('ScrollSynchronizer: Could not find all required scrolling elements', null, 2);\n            return;\n        }\n\n        // Store references\n        this.leftContent = leftContent;\n        this.rightContent = rightContent;\n\n        // Sync both vertical AND horizontal scrolling between panes\n        leftContent.addEventListener('scroll', () => this._handleScroll(leftContent, rightContent), { passive: true });\n        rightContent.addEventListener('scroll', () => this._handleScroll(rightContent, leftContent), { passive: true });\n\n        // Listen for window resize\n        window.addEventListener('resize', () => {\n            this._updateScrollState(leftContent);\n            this._updateScrollState(rightContent);\n        });\n\n        Debug.log('ScrollSynchronizer: Horizontal and vertical scroll synchronization set up', null, 2);\n    }\n\n    /**\n     * Handle scroll events\n     * @private\n     */\n    _handleScroll(sourceElement, targetElement) {\n        // Only update if not already syncing to avoid loops\n        if (!this.isSyncing) {\n            this.isSyncing = true;\n\n            // Sync vertical scrolling (top position)\n            targetElement.scrollTop = sourceElement.scrollTop;\n\n            // IMPORTANT: Also sync horizontal scrolling\n            targetElement.scrollLeft = sourceElement.scrollLeft;\n\n            this._updateScrollState(sourceElement);\n\n            // Reset syncing flag after a short delay\n            setTimeout(() => {\n                this.isSyncing = false;\n            }, 10);\n        }\n    }\n\n    /**\n     * Update CSS class based on scroll state\n     * @private\n     */\n    _updateScrollState(contentElement) {\n        const wasScrolled = contentElement.classList.contains(Selectors.STATUS.SCROLLED.name());\n        const isScrolled = contentElement.scrollLeft > 0;\n\n        // Only update if the state changed\n        if (wasScrolled !== isScrolled) {\n            if (isScrolled) {\n                contentElement.classList.add(Selectors.STATUS.SCROLLED.name());\n            } else {\n                contentElement.classList.remove(Selectors.STATUS.SCROLLED.name());\n            }\n        }\n    }\n}\n"],"names":["Debug","DOMUtils","ModalManager","TranslationManager","Selectors","CopyButton","_classCallCheck","_createClass","key","value","addCopyButtonsToPreview","containerId","arguments","length","undefined","MODAL","PREVIEW_CONTENT_ID","name","translationManager","getInstance","container","getElement","directElement","document","getElementById","querySelectorElement","querySelector","log","warn","preElements","querySelectorAll","forEach","pre","COPY","BUTTON","button","createElement","type","title","get","innerHTML","concat","ICON","TEXT","style","position","codeEl","insertBefore","appendChild","addEventListener","e","preventDefault","stopPropagation","_sourceCodeElement","textToCopy","hasAttribute","_decodeHTMLEntities","getAttribute","textContent","replace","_showManualCopyModal","_showProcessingState","classList","add","PROCESSING","textSpan","setTimeout","remove","_showCopiedState","COPIED","text","modalManager","modalId","createCopyModal","open","_showCopyFailure","getIconHtml","classes","UTILITY","MARGIN_END_2","BUTTON_PRIMARY","BUTTON_SUCCESS","BUTTON_DANGER","html","textarea","BrowserUIManager","diffViewer","_window$diffConfig","_this$options","options","elements","themeSwitcher","diffContainer","mergeControls","translationsSource","hasWindowConfig","window","diffConfig","translations","hasOptionsTranslations","isInitialized","lang","getLanguage","getAllTranslations","setDiffViewer","getTranslations","_window$diffConfig2","_this$options2","_typeof","initialize","containerSelector","CONTAINER","WRAPPER","error","generateDiffContainer","generateThemeSwitcher","generateMergeControls","themeSwitcherId","THEME","SWITCHER","themeLoadingId","LOADING_INDICATOR","themeToggleId","TOGGLE","id","className","FLEX","JUSTIFY_CONTENT_BETWEEN","PADDING_2","cssText","switcherWrapper","THEME_SWITCHER","sunIcon","moonIcon","MARGIN_START_2","LABEL","CONTROL","SLIDER","SLIDER_ROUND","loadingContainer","display","zIndex","body","themeLoadingContainer","observer","MutationObserver","mutations","DIFF","contains","disconnect","containerParent","observe","subtree","childList","attributes","attributeFilter","_this","diffContainerId","viewerId","VIEWER","viewerElement","MARGIN_TOP_2","mutation","attributeName","createdViewer","previewButtonId","MERGE","BUTTON_PREVIEW","toggleButtonId","DESTINATION_TOGGLE","toggleIconId","TOGGLE_ICON","toggleTextId","TOGGLE_TEXT","dropdownId","DESTINATION_DROPDOWN","applyButtonId","BUTTON_APPLY","CONTROLS_ACTIONS","ALIGN_ITEMS_CENTER","MARGIN_Y_2","previewSection","previewButton","BUTTON_INFO","preview","mergeSection","toggleGroup","ALIGN_ITEMS_STRETCH","MARGIN_END_3","toggleButton","BUTTON_FLAT","toggleIcon","toggleText","setAttribute","saveToOriginalTooltip","saveToOriginal","dropdown","FORM_SELECT","applyButton","applyMerge","whiteSpace","alignItems","showThemeLoading","message","rect","getBoundingClientRect","scrollTop","pageYOffset","documentElement","top","hideThemeLoading","destroy","parentNode","removeChild","IconMarkerManager","initializeIconMarkers","cellHeight","_calculateCellHeight","setProperty","panes","PANE","pane","_setupIconColumn","_updateIconColumnHeights","_setupIconHeightUpdater","_this2","content","PANE_CONTENT","codeTableWrapper","TABLE_WRAPPER","iconColumn","ICONS","COLUMN","chunkCells","LINE_CONTENT","LINE_PLACEHOLDER","LINE_CONTENT_EMPTY","chunkGroups","cell","chunkId","dataset","push","Object","keys","sort","a","b","aLineNum","parseInt","lineId","split","pop","bLineNum","firstCell","_createIconMarker","tableHeight","scrollHeight","requestAnimationFrame","transform","scrollLeft","STATUS","SCROLLED","passive","marker","MARKER","MARKER_PLACEHOLDER","lineNumber","iconIndex","lineNumberCells","CODE","LINE_NUMBER","heights","sampleSize","Math","min","i","height","medianHeight","floor","join","_this3","resizeTimer","clearTimeout","currentHeight","abs","side","LayoutManager","paneWidth","updatePaneWidth","setupWidthObserver","getElements","newWidth","clientWidth","setCSSVariable","shouldUpdate","_iterator","_createForOfIteratorHelper","_step","s","n","done","err","f","ScrollSynchronizer","isSyncing","setupSynchronizedScrolling","leftPane","rightPane","leftContent","rightContent","_handleScroll","_updateScrollState","sourceElement","targetElement","contentElement","wasScrolled","isScrolled"],"sourceRoot":""}