{"version":3,"file":"diff-viewer-src_components_s.js","mappings":"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","sources":["webpack://diff-files/./src/components/syntax/CopyButton.js","webpack://diff-files/./src/components/viewer/BrowserUIManager.js","webpack://diff-files/./src/components/viewer/IconMarkerManager.js","webpack://diff-files/./src/components/viewer/LayoutManager.js","webpack://diff-files/./src/components/viewer/ScrollSynchronizer.js"],"sourcesContent":["import { Debug } from '../../utils/Debug';\nimport { DOMUtils } from '../../utils/DOMUtils';\nimport { ModalManager } from '../modal/ModalManager';\nimport { TranslationManager } from '../../utils/TranslationManager';\nimport Selectors from '../../constants/Selectors';\n\n/**\n * Adds copy buttons to code blocks in the preview modal\n * This implementation uses a fallback strategy for maximum browser compatibility\n */\nexport class CopyButton {\n    /**\n     * Initialize copy buttons for code blocks\n     * @param {string} containerId - ID of the container element\n     * @returns {boolean} Success status\n     */\n    static addCopyButtonsToPreview(containerId = Selectors.MODAL.PREVIEW_CONTENT_ID.name()) {\n        // Get instance of TranslationManager\n        const translationManager = TranslationManager.getInstance();\n\n        const container = DOMUtils.getElement(containerId);\n\n        if (!container) {\n            // Try direct DOM methods too\n            const directElement = document.getElementById(containerId);\n            const querySelectorElement = document.querySelector('#' + containerId);\n\n            Debug.log('CopyButton: Alternative container lookup results', {\n                getElementById: !!directElement,\n                querySelector: !!querySelectorElement\n            }, 2);\n\n            Debug.warn('CopyButton: Preview container not found', null, 2);\n            return false;\n        }\n\n        // Find all code blocks within the container\n        const preElements = container.querySelectorAll('pre');\n\n        if (!preElements || preElements.length === 0) {\n            Debug.log('CopyButton: No code blocks found in preview', null, 3);\n            return false;\n        }\n\n        // Add copy button to each pre element\n        preElements.forEach(pre => {\n            // Check if button already exists\n            if (pre.querySelector(Selectors.COPY.BUTTON)) {\n                return;\n            }\n\n            // Create copy button\n            const button = DOMUtils.createElement('button', null, Selectors.COPY.BUTTON.name(), {\n                type: 'button',\n                title: translationManager.get('copyCode')\n            });\n\n            // Add copy button content\n            button.innerHTML = `<span class=\"${Selectors.COPY.ICON.name()}\"></span><span class=\"${Selectors.COPY.TEXT.name()}\">${translationManager.get('copy')}</span>`;\n\n            // Position the button within the pre element\n            pre.style.position = 'relative';\n\n            // Find code element and insert button before it\n            const codeEl = pre.querySelector('code');\n            if (codeEl) {\n                pre.insertBefore(button, codeEl);\n            } else {\n                // Fallback to appending if no code element found\n                pre.appendChild(button);\n            }\n\n            // Add click event with progressive fallback\n            button.addEventListener('click', function(e) {\n                e.preventDefault();\n                e.stopPropagation();\n\n                const codeEl = pre.querySelector('code');\n                if (!codeEl) return;\n\n                // Store reference to the code element for later use\n                // This is important to maintain context during asynchronous operations\n                CopyButton._sourceCodeElement = codeEl;\n\n                // Get text content - use most reliable method\n                let textToCopy;\n                if (codeEl.hasAttribute('data-original-code')) {\n                    textToCopy = CopyButton._decodeHTMLEntities(codeEl.getAttribute('data-original-code'));\n                    Debug.log('CopyButton: Using original code from attribute', null, 3);\n                } else {\n                    textToCopy = codeEl.textContent || '';\n                    textToCopy = textToCopy.replace(/\\n\\n+/g, '\\n');\n                    Debug.log('CopyButton: Using text content from code element', null, 3);\n                }\n\n                Debug.log('CopyButton: Text length: ' + textToCopy.length, null, 3);\n\n                // Go straight to the most reliable method - manual copy\n                // This ensures consistent behavior across all browsers\n                CopyButton._showManualCopyModal(textToCopy);\n\n                // Show visual feedback that copy operation was initiated\n                CopyButton._showProcessingState(button);\n            });\n        });\n\n        Debug.log(`CopyButton: Added copy buttons to ${preElements.length} code blocks`, null, 2);\n        return true;\n    }\n\n    /**\n     * Show processing state on button\n     * @param {HTMLElement} button - Button element to update\n     * @private\n     */\n    static _showProcessingState(button) {\n        button.classList.add(Selectors.COPY.PROCESSING.name());\n        const textSpan = button.querySelector(`.${Selectors.COPY.TEXT.name()}`);\n        if (textSpan) {\n            textSpan.textContent = 'Open Copy Dialog...';\n        }\n\n        setTimeout(() => {\n            button.classList.remove(Selectors.COPY.PROCESSING.name());\n            if (textSpan) {\n                textSpan.textContent = 'Copy';\n            }\n        }, 1000);\n    }\n\n    /**\n     * Show copied state on button\n     * @param {HTMLElement} button - Button element to update\n     * @private\n     */\n    static _showCopiedState(button) {\n        button.classList.add(Selectors.COPY.COPIED.name());\n        const textSpan = button.querySelector(`.${Selectors.COPY.TEXT.name()}`);\n        if (textSpan) {\n            textSpan.textContent = 'Copied!';\n        }\n\n        setTimeout(() => {\n            button.classList.remove(Selectors.COPY.COPIED.name());\n            if (textSpan) {\n                textSpan.textContent = 'Copy';\n            }\n        }, 2000);\n    }\n\n    /**\n     * Show a modal dialog with text for manual copying using ModalManager\n     * @param {string} text - Text to copy\n     * @private\n     */\n    static _showManualCopyModal(text) {\n        // Get singleton instance of ModalManager\n        const modalManager = ModalManager.getInstance();\n\n        // Create the copy modal and get its ID\n        const modalId = modalManager.createCopyModal(text);\n\n        // Open the modal\n        modalManager.open(modalId);\n\n        Debug.log('CopyButton: Showing manual copy modal', null, 2);\n    }\n\n    /**\n     * Show copy failure on button\n     * @param {HTMLElement} button - Button element to update\n     * @private\n     */\n    static _showCopyFailure(button) {\n        button.innerHTML = DOMUtils.getIconHtml('exclamation-triangle', { classes: Selectors.UTILITY.MARGIN_END_2.name() }) + 'Copy Failed';\n        button.classList.remove(Selectors.UTILITY.BUTTON_PRIMARY.name(), Selectors.UTILITY.BUTTON_SUCCESS.name());\n        button.classList.add(Selectors.UTILITY.BUTTON_DANGER.name());\n\n        setTimeout(() => {\n            button.innerHTML = DOMUtils.getIconHtml('copy', { classes: Selectors.UTILITY.MARGIN_END_2.name() }) + 'Try Again';\n            button.classList.remove(Selectors.UTILITY.BUTTON_DANGER.name());\n            button.classList.add(Selectors.UTILITY.BUTTON_PRIMARY.name());\n        }, 2000);\n    }\n\n    /**\n     * Decode HTML entities in a string\n     * @param {string} html - String with HTML entities\n     * @returns {string} Decoded string\n     * @private\n     */\n    static _decodeHTMLEntities(html) {\n        if (!html) return '';\n\n        const textarea = document.createElement('textarea');\n        textarea.innerHTML = html;\n        return textarea.value;\n    }\n}\n","import { Debug } from '../../utils/Debug';\nimport Selectors from '../../constants/Selectors';\nimport { DOMUtils } from '../../utils/DOMUtils';\nimport { TranslationManager } from '../../utils/TranslationManager';\n\n/**\n * Manages browser UI generation for file-browser.php\n * This component handles the dynamic generation of UI elements that were previously\n * hardcoded in the PHP file, ensuring proper use of selectors and translations.\n */\nexport class BrowserUIManager {\n    /**\n     * @param {DiffViewer|Object} diffViewer - Parent diff viewer instance or options object\n     */\n    constructor (diffViewer) {\n        // Handle both DiffViewer instance or options object\n        if (diffViewer && diffViewer.options) {\n            this.diffViewer = diffViewer;\n            this.options = diffViewer.options;\n        } else {\n            this.diffViewer = null;\n            this.options = diffViewer || {};\n        }\n\n        this.container = null;\n        this.elements = {\n            themeSwitcher: null,\n            diffContainer: null,\n            mergeControls: null\n        };\n\n        // Get the translation manager instance\n        this.translationManager = TranslationManager.getInstance();\n\n        // Log translation state for debugging\n        let translationsSource;\n\n        // Extract nested ternary operations into separate statements\n        const hasWindowConfig = !!window.diffConfig?.translations;\n        const hasOptionsTranslations = !!this.options?.translations;\n\n        if (this.translationManager.isInitialized()) {\n            translationsSource = 'TranslationManager';\n        } else if (hasWindowConfig) {\n            translationsSource = 'window.diffConfig';\n        } else if (hasOptionsTranslations) {\n            translationsSource = 'options';\n        } else {\n            translationsSource = 'none';\n        }\n\n        const lang = this.translationManager.getLanguage();\n\n        Debug.log(`BrowserUIManager: Created with \"${lang}\" translations from ${translationsSource}`,\n                 this.translationManager.getAllTranslations(), 2);\n    }\n\n    /**\n     * Set the DiffViewer instance\n     * @param {DiffViewer} diffViewer - The DiffViewer instance\n     */\n    setDiffViewer(diffViewer) {\n        if (diffViewer && diffViewer.options) {\n            this.diffViewer = diffViewer;\n            this.options = diffViewer.options;\n            Debug.log('BrowserUIManager: Updated DiffViewer reference', null, 3);\n            return true;\n        }\n        return false;\n    }\n\n    /**\n     * Get translations from options\n     * @returns {Object} Translations object\n     */\n    getTranslations() {\n        // First, try to get translations from the TranslationManager\n        if (this.translationManager && this.translationManager.isInitialized()) {\n            Debug.log('BrowserUIManager: Using translations from TranslationManager', this.translationManager.getAllTranslations(), 3);\n            return this.translationManager.getAllTranslations();\n        }\n\n        // Second, try to auto-initialize TranslationManager with window.diffConfig\n        if (window.diffConfig?.translations && typeof window.diffConfig.translations === 'object') {\n            Debug.log('BrowserUIManager: Auto-initializing TranslationManager from window.diffConfig', window.diffConfig.translations, 3);\n            this.translationManager.initialize(\n                window.diffConfig.lang || 'en',\n                window.diffConfig.translations\n            );\n            return this.translationManager.getAllTranslations();\n        }\n\n        // Fall back to local options if nothing else works\n        if (this.options?.translations && typeof this.options.translations === 'object') {\n            Debug.log('BrowserUIManager: Using translations from local options', this.options.translations, 3);\n            return this.options.translations;\n        }\n\n        Debug.log('BrowserUIManager: No translations found, using empty object', null, 3);\n        return {};\n    }\n\n    /**\n     * Initialize UI components\n     * @param {string} containerSelector - Container element selector\n     */\n    initialize(containerSelector = Selectors.CONTAINER.WRAPPER) {\n        Debug.log('BrowserUIManager: Initializing UI components', null, 2);\n\n        this.container = document.querySelector(containerSelector);\n\n        if (!this.container) {\n            Debug.error('BrowserUIManager: Container element not found', null, 2);\n            return false;\n        }\n\n        // Change the order of generation - create diff container first\n        this.generateDiffContainer();\n        this.generateThemeSwitcher();\n        this.generateThemeSelector();\n        this.generateMergeControls();\n\n        Debug.log('BrowserUIManager: UI components generated', null, 2);\n        return true;\n    }\n\n    /**\n     * Generate theme switcher UI\n     */\n    generateThemeSwitcher() {\n        Debug.log('BrowserUIManager: Generating theme switcher', null, 3);\n\n        // Get the ID without the # prefix for createElement\n        const themeSwitcherId = Selectors.THEME.SWITCHER.name();\n        const themeLoadingId = Selectors.THEME.LOADING_INDICATOR.name();\n        const themeToggleId = Selectors.THEME.TOGGLE.name();\n\n        // Check if theme switcher already exists and if it's still valid to reuse\n        let themeSwitcher = document.getElementById(themeSwitcherId);\n\n        if (themeSwitcher) {\n            // Verify that the theme switcher is in a proper context (not orphaned)\n            // and that the diff UI is being displayed (not in \"identical files\" mode)\n            const diffContainer = document.getElementById(Selectors.DIFF.CONTAINER.name());\n\n            if (diffContainer || this.container.contains(themeSwitcher)) {\n                Debug.log('BrowserUIManager: Reusing existing theme switcher', themeSwitcherId, 2);\n                // Store reference to existing element\n                this.elements.themeSwitcher = themeSwitcher;\n\n                // Ensure it's properly positioned in the container\n                if (themeSwitcher.parentNode !== this.container) {\n                    this.container.appendChild(themeSwitcher);\n                }\n\n                // Make sure it's visible and properly styled - but don't force display here\n                // as it will be controlled by showThemeElements()/hideThemeElements()\n                themeSwitcher.style.position = 'relative';\n                return;\n            } else {\n                // Theme switcher exists but context is invalid, remove it and create new one\n                Debug.log('BrowserUIManager: Removing orphaned theme switcher', themeSwitcherId, 2);\n                themeSwitcher.remove();\n                themeSwitcher = null;\n            }\n        }\n\n        // Create new theme switcher element\n        Debug.log('BrowserUIManager: Creating new theme switcher', themeSwitcherId, 2);\n        themeSwitcher = document.createElement('div');\n        themeSwitcher.id = themeSwitcherId;\n        themeSwitcher.className = `${Selectors.UTILITY.FLEX.name()} ${Selectors.UTILITY.JUSTIFY_CONTENT_BETWEEN.name()} ${Selectors.UTILITY.PADDING_2.name()}`;\n        themeSwitcher.style.cssText = 'display: none !important; position: relative;';\n\n        // Create theme switcher wrapper\n        const switcherWrapper = document.createElement('div');\n        switcherWrapper.className = Selectors.THEME_SWITCHER.WRAPPER.name();\n\n        // Get SVG icons for light/dark mode\n        const sunIcon = DOMUtils.getIconHtml('sun', { classes: Selectors.UTILITY.MARGIN_END_2.name() });\n        const moonIcon = DOMUtils.getIconHtml('moon', { classes: Selectors.UTILITY.MARGIN_START_2.name() });\n\n        // Create theme switcher content with toggle\n        switcherWrapper.innerHTML = `\n            <span class=\"${Selectors.THEME_SWITCHER.LABEL.name()} ${Selectors.UTILITY.MARGIN_END_2.name()}\">${sunIcon}</span>\n            <label class=\"${Selectors.THEME_SWITCHER.CONTROL.name()}\" for=\"${themeToggleId}\">\n                <input type=\"checkbox\" id=\"${themeToggleId}\" checked>\n                <span class=\"${Selectors.THEME_SWITCHER.SLIDER.name()} ${Selectors.THEME_SWITCHER.SLIDER_ROUND.name()}\"></span>\n            </label>\n            <span class=\"${Selectors.THEME_SWITCHER.LABEL.name()} ${Selectors.UTILITY.MARGIN_START_2.name()} \">${moonIcon}</span>\n        `;\n\n        // Append elements to theme switcher\n        themeSwitcher.appendChild(switcherWrapper);\n\n        // Create a separate container for the loader outside the theme switcher hierarchy\n        const loadingContainer = document.createElement('div');\n        loadingContainer.id = themeLoadingId;\n        loadingContainer.style.display = 'none';\n        loadingContainer.style.position = 'absolute';\n        loadingContainer.style.zIndex = '1000';\n\n        // Append theme switcher to container\n        this.container.appendChild(themeSwitcher);\n\n        // Append loading container to body for proper positioning\n        document.body.appendChild(loadingContainer);\n\n        // Store reference\n        this.elements.themeSwitcher = themeSwitcher;\n        this.elements.themeLoadingContainer = loadingContainer;\n\n        // Watch for the vdm-diff__container to have 'loaded' class\n        const observer = new MutationObserver((mutations) => {\n            mutations.forEach(() => {\n                const diffContainer = document.getElementById(Selectors.DIFF.CONTAINER.name());\n                if (diffContainer && diffContainer.classList.contains('loaded')) {\n                    // If the container is loaded, make the theme switcher visible\n                    if (themeSwitcher) {\n                        themeSwitcher.style.cssText = 'display: flex !important; position: relative;';\n                    }\n                    // Disconnect the observer once we've made the change\n                    observer.disconnect();\n                }\n            });\n        });\n\n        // Start observing the container's parent element for child changes\n        const containerParent = this.container || document.body;\n        observer.observe(containerParent, {\n            subtree: true,\n            childList: true,\n            attributes: true,\n            attributeFilter: ['class']\n        });\n    }\n\n    /**\n     * Generate theme selector UI\n     * @returns {Object|null} The theme selector container and select element, or null if creation failed\n     */\n    generateThemeSelector() {\n        Debug.log('BrowserUIManager: Generating theme selector', null, 3);\n\n        // Get the ID without the # prefix for createElement\n        const themeSelectorId = Selectors.THEME.SELECTOR.name();\n        const themeSwitcherId = Selectors.THEME.SWITCHER.name();\n\n        // Check if theme selector already exists and if it's still valid to reuse\n        let existingSelector = document.getElementById(themeSelectorId);\n        let selectorContainer = null;\n\n        if (existingSelector) {\n            selectorContainer = existingSelector.parentNode;\n            // Verify that the theme selector is in a proper context (not orphaned)\n            const themeSwitcher = document.getElementById(themeSwitcherId);\n\n            if (themeSwitcher && themeSwitcher.contains(selectorContainer)) {\n                Debug.log('BrowserUIManager: Reusing existing theme selector', themeSelectorId, 2);\n                // Store reference to existing elements\n                this.elements.themeSelector = existingSelector;\n                this.elements.themeSelectorContainer = selectorContainer;\n                return { container: selectorContainer, selectElement: existingSelector };\n            } else {\n                // Theme selector exists but context is invalid, remove it and create new one\n                Debug.log('BrowserUIManager: Removing orphaned theme selector', themeSelectorId, 2);\n                if (selectorContainer && selectorContainer.parentNode) {\n                    selectorContainer.parentNode.removeChild(selectorContainer);\n                }\n                existingSelector = null;\n                selectorContainer = null;\n            }\n        }\n\n        // Get theme switcher container - theme selector must be inside it\n        const themeSwitcherContainer = document.getElementById(themeSwitcherId);\n        if (!themeSwitcherContainer) {\n            Debug.warn('BrowserUIManager: No theme switcher container found for theme selector', null, 2);\n            return null;\n        }\n\n        // Create new theme selector container and element\n        Debug.log('BrowserUIManager: Creating new theme selector', themeSelectorId, 2);\n\n        // Create the container using utility classes\n        selectorContainer = document.createElement('div');\n        selectorContainer.className = `${Selectors.THEME_SELECTOR.WRAPPER.name()} ${Selectors.UTILITY.MARGIN_END_3.name()}`;\n\n        // Create select element\n        const selectElement = document.createElement('select');\n        selectElement.id = themeSelectorId;\n        selectElement.className = `${Selectors.UTILITY.FORM_SELECT.name()} ${Selectors.UTILITY.FORM_SELECT.name()}`;\n\n        // Append select to container\n        selectorContainer.appendChild(selectElement);\n\n        // Insert the selector container at the beginning of the theme switcher\n        themeSwitcherContainer.insertBefore(selectorContainer, themeSwitcherContainer.firstChild);\n\n        // Store references\n        this.elements.themeSelector = selectElement;\n        this.elements.themeSelectorContainer = selectorContainer;\n\n        Debug.log('BrowserUIManager: Theme selector created and added to DOM', null, 2);\n        return { container: selectorContainer, selectElement: selectElement };\n    }\n\n    /**\n     * Generate diff container UI\n     */\n    generateDiffContainer() {\n        Debug.log('BrowserUIManager: Generating diff container', null, 3);\n\n        // Get IDs without the # prefix for createElement\n        const diffContainerId = Selectors.DIFF.CONTAINER.name();\n        const viewerId = Selectors.DIFF.VIEWER.name();\n\n        // Create diff container\n        const diffContainer = document.createElement('div');\n        diffContainer.id = diffContainerId;\n\n        // Create viewer element\n        const viewerElement = document.createElement('div');\n        viewerElement.id = viewerId;\n        viewerElement.className = Selectors.UTILITY.MARGIN_TOP_2.name();\n        viewerElement.style.display = 'none';\n\n        // Set up a mutation observer to watch for display changes on the viewer element\n        const observer = new MutationObserver((mutations) => {\n            mutations.forEach((mutation) => {\n                if (mutation.type === 'attributes' &&\n                    mutation.attributeName === 'style' &&\n                    viewerElement.style.display !== 'none') {\n                    // If viewer becomes visible, show the theme switcher\n                    if (this.elements.themeSwitcher) {\n                        this.elements.themeSwitcher.style.display = 'flex';\n                    }\n                }\n            });\n        });\n\n        // Start observing the viewer element for style changes\n        observer.observe(viewerElement, { attributes: true });\n\n        // Append elements to diff container\n        diffContainer.appendChild(viewerElement);\n\n        // Append diff container to container\n        this.container.appendChild(diffContainer);\n\n        // Store reference and log creation\n        this.elements.diffContainer = diffContainer;\n\n        // Verify the element was created\n        const createdViewer = document.getElementById(viewerId);\n        Debug.log(`BrowserUIManager: Viewer element (${viewerId}) created successfully: ${!!createdViewer}`, null, 3);\n    }\n\n    /**\n     * Generate merge controls UI using translations from DiffViewer\n     */\n    generateMergeControls() {\n        Debug.log('BrowserUIManager: Generating merge controls structure only', null, 3);\n\n        // Get translations from options\n        const translations = this.getTranslations();\n\n        // Get IDs without the # prefix for createElement\n        const previewButtonId = Selectors.MERGE.BUTTON_PREVIEW.name();\n        const toggleButtonId = Selectors.MERGE.DESTINATION_TOGGLE.name();\n        const toggleIconId = Selectors.MERGE.TOGGLE_ICON.name();\n        const toggleTextId = Selectors.MERGE.TOGGLE_TEXT.name();\n        const dropdownId = Selectors.MERGE.DESTINATION_DROPDOWN.name();\n        const applyButtonId = Selectors.MERGE.BUTTON_APPLY.name();\n\n        // Create merge controls container\n        const mergeControls = document.createElement('div');\n        mergeControls.className = `${Selectors.MERGE.CONTROLS_ACTIONS.name()} ${Selectors.UTILITY.FLEX.name()} ${Selectors.UTILITY.ALIGN_ITEMS_CENTER.name()} ${Selectors.UTILITY.JUSTIFY_CONTENT_BETWEEN.name()} ${Selectors.UTILITY.MARGIN_Y_2.name()} ${Selectors.UTILITY.PADDING_2.name()}`;\n\n        // Create preview button section\n        const previewSection = document.createElement('div');\n\n        const previewButton = document.createElement('button');\n        previewButton.id = previewButtonId;\n        previewButton.className = `${Selectors.UTILITY.BUTTON.name()} ${Selectors.UTILITY.BUTTON_INFO.name()}`;\n        previewButton.type = 'button';\n        previewButton.innerHTML = `${DOMUtils.getIconHtml('eye', { classes: Selectors.UTILITY.MARGIN_END_2.name() })}${translations.preview || 'Preview'}`;\n\n        previewSection.appendChild(previewButton);\n\n        // Create merge controls section\n        const mergeSection = document.createElement('div');\n        mergeSection.className = `${Selectors.UTILITY.FLEX.name()} ${Selectors.UTILITY.ALIGN_ITEMS_CENTER.name()}`;\n\n        // Create a group for toggle button and dropdown - using input-group styling approach\n        const toggleGroup = document.createElement('div');\n        toggleGroup.className = `${Selectors.UTILITY.FLEX.name()} ${Selectors.UTILITY.ALIGN_ITEMS_STRETCH.name()} ${Selectors.UTILITY.MARGIN_END_3.name()}`;\n        // Add class for styling instead of inline style\n        toggleGroup.classList.add('vdm-input-group');\n\n        // Create destination toggle button\n        const toggleButton = document.createElement('button');\n        toggleButton.id = toggleButtonId;\n        toggleButton.className = `${Selectors.UTILITY.BUTTON.name()} ${Selectors.UTILITY.BUTTON_FLAT.name()} vdm-input-group__prepend`;\n        toggleButton.type = 'button'; // Explicitly set type to button\n\n        const toggleIcon = document.createElement('span');\n        toggleIcon.id = toggleIconId;\n        toggleIcon.innerHTML = DOMUtils.getIconHtml('plus-circle', { classes: Selectors.UTILITY.MARGIN_END_2.name() });\n\n        const toggleText = document.createElement('span');\n        toggleText.id = toggleTextId;\n        toggleText.setAttribute('title', translations.saveToOriginalTooltip || 'Replace the current file with merged content');\n        toggleText.textContent = translations.saveToOriginal || 'Save to original';\n\n        toggleButton.appendChild(toggleIcon);\n        toggleButton.appendChild(toggleText);\n\n        // Create empty destination dropdown - IMPORTANT CHANGE: No options added\n        const dropdown = document.createElement('select');\n        dropdown.id = dropdownId;\n        dropdown.className = `${Selectors.UTILITY.FORM_SELECT.name()} vdm-input-group__append vdm-select-auto-width`;\n        // No options are added here - This will be handled by MergeUIController\n\n        // Add toggle button and dropdown to the toggle group with no spacing between them\n        toggleGroup.appendChild(toggleButton);\n        toggleGroup.appendChild(dropdown);\n\n        // Create apply merge button\n        const applyButton = document.createElement('button');\n        applyButton.id = applyButtonId;\n        applyButton.className = `${Selectors.UTILITY.BUTTON.name()} ${Selectors.UTILITY.BUTTON_PRIMARY.name()} vdm-nowrap`;\n        applyButton.type = 'button';\n        applyButton.innerHTML = (translations.applyMerge || 'Apply Merge') + ` ${DOMUtils.getIconHtml('file-circle-plus', { classes: Selectors.UTILITY.MARGIN_START_2.name() })}`;\n        applyButton.style.whiteSpace = 'nowrap';\n        applyButton.style.display = 'inline-flex';\n        applyButton.style.alignItems = 'center';\n\n        // Append toggle group and apply button to merge section\n        mergeSection.appendChild(toggleGroup);\n        mergeSection.appendChild(applyButton);\n\n        // Append sections to merge controls\n        mergeControls.appendChild(previewSection);\n        mergeControls.appendChild(mergeSection);\n\n        // Append merge controls to container\n        this.container.appendChild(mergeControls);\n\n        // Store reference\n        this.elements.mergeControls = mergeControls;\n\n        Debug.log('BrowserUIManager: Created empty merge controls structure (options will be populated by MergeUIController)', null, 2);\n    }\n\n    /**\n     * Show theme loading indicator using the LoaderManager\n     */\n    showThemeLoading() {\n        const loadingContainer = this.elements.themeLoadingContainer;\n        const themeSwitcher = this.elements.themeSwitcher;\n\n        if (loadingContainer && themeSwitcher) {\n            // Get the translated message\n            const message = TranslationManager.getInstance().get('loadingTheme', 'Loading theme...');\n\n            // Use proper CSS classes for styling\n            loadingContainer.innerHTML = `\n                <div class=\"vdm-theme__loading-spinner\"></div>\n                <span>${message}</span>\n            `;\n\n            // Add styling for the translucid background and rounded corners\n            loadingContainer.className = 'vdm-theme__loading-indicator';\n\n            // Get the position of the theme switcher\n            const rect = themeSwitcher.getBoundingClientRect();\n            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;\n\n            // Position the loader just above the theme switcher\n            loadingContainer.style.top = (rect.top + scrollTop - 40) + 'px';\n\n            // Make the loader visible\n            loadingContainer.style.display = 'flex';\n        }\n    }\n\n    /**\n     * Hide theme loading indicator\n     */\n    hideThemeLoading() {\n        const loadingContainer = this.elements.themeLoadingContainer;\n        if (loadingContainer) {\n            loadingContainer.style.display = 'none';\n        }\n    }\n\n    /**\n     * Clean up event handlers and resources\n     */\n    destroy() {\n        Debug.log('BrowserUIManager: Destroying UI components', null, 2);\n\n        // Hide any active theme loader\n        this.hideThemeLoading();\n\n        // Remove generated elements (except theme switcher which should be preserved across instances)\n        // Note: Theme switcher is preserved by FileBrowserManager.clearUI() to maintain user experience\n        // if (this.elements.themeSwitcher && this.elements.themeSwitcher.parentNode) {\n        //     this.elements.themeSwitcher.parentNode.removeChild(this.elements.themeSwitcher);\n        // }\n\n        if (this.elements.diffContainer && this.elements.diffContainer.parentNode) {\n            this.elements.diffContainer.parentNode.removeChild(this.elements.diffContainer);\n        }\n\n        if (this.elements.mergeControls && this.elements.mergeControls.parentNode) {\n            this.elements.mergeControls.parentNode.removeChild(this.elements.mergeControls);\n        }\n\n        // Reset references but keep theme switcher and theme selector references if they still exist in DOM\n        const existingThemeSwitcher = document.getElementById(Selectors.THEME.SWITCHER.name());\n        const existingThemeSelector = document.getElementById(Selectors.THEME.SELECTOR.name());\n        const existingThemeSelectorContainer = existingThemeSelector ? existingThemeSelector.parentNode : null;\n\n        this.elements = {\n            themeSwitcher: existingThemeSwitcher || null,  // Keep reference if still in DOM\n            themeSelector: existingThemeSelector || null,  // Keep theme selector reference too\n            themeSelectorContainer: existingThemeSelectorContainer || null,  // Keep container reference\n            diffContainer: null,\n            mergeControls: null\n        };\n\n        // Clear DiffViewer reference\n        this.diffViewer = null;\n\n        Debug.log('BrowserUIManager: UI components destroyed', null, 2);\n    }\n\n    /**\n     * Hide theme UI elements when no diff is being displayed (identical files)\n     */\n    hideThemeElements() {\n        Debug.log('BrowserUIManager: Hiding theme elements for identical content', null, 2);\n\n        if (this.elements.themeSwitcher) {\n            // Use important to ensure hiding works\n            this.elements.themeSwitcher.style.cssText = 'display: none !important; position: relative;';\n            Debug.log('BrowserUIManager: Hidden theme switcher', this.elements.themeSwitcher.id, 2);\n        }\n\n        // Also hide any standalone theme selector\n        const themeSelector = document.getElementById(Selectors.THEME.SELECTOR.name());\n        if (themeSelector) {\n            themeSelector.style.display = 'none';\n            Debug.log('BrowserUIManager: Hidden standalone theme selector', themeSelector.id, 2);\n        }\n    }\n\n    /**\n     * Show theme UI elements when diff is being displayed\n     */\n    showThemeElements() {\n        Debug.log('BrowserUIManager: Showing theme elements for diff content', null, 2);\n\n        if (this.elements.themeSwitcher) {\n            // Use important to override the initial !important hiding\n            this.elements.themeSwitcher.style.cssText = 'display: flex !important; position: relative;';\n            Debug.log('BrowserUIManager: Shown theme switcher', this.elements.themeSwitcher.id, 2);\n        }\n\n        // Also show any standalone theme selector\n        const themeSelector = document.getElementById(Selectors.THEME.SELECTOR.name());\n        if (themeSelector) {\n            themeSelector.style.display = 'block';\n            Debug.log('BrowserUIManager: Shown standalone theme selector', themeSelector.id, 2);\n        }\n    }\n}\n","import { Debug } from '../../utils/Debug';\nimport Selectors from '../../constants/Selectors';\n\n/**\n * Manages icon marker creation and positioning\n */\nexport class IconMarkerManager {\n    /**\n     * @param {DiffViewer} diffViewer - Parent diff viewer\n     */\n    constructor(diffViewer) {\n        this.diffViewer = diffViewer;\n    }\n\n    /**\n     * Initialize icon markers with proper scroll synchronization\n     */\n    initializeIconMarkers() {\n        // Measure actual cell height for accurate positioning\n        const cellHeight = this._calculateCellHeight();\n        document.documentElement.style.setProperty('--cell-height', `${cellHeight}px`);\n\n        // Process each diff pane\n        const panes = this.diffViewer.container.querySelectorAll(Selectors.DIFF.PANE);\n\n        panes.forEach(pane => {\n            this._setupIconColumn(pane);\n        });\n\n        // Use a dedicated method to handle all height updates\n        this._updateIconColumnHeights();\n\n        // Set up future height updates for window resizing\n        this._setupIconHeightUpdater();\n    }\n\n    /**\n     * Set up icon column for a pane\n     * @private\n     */\n    _setupIconColumn(pane) {\n        // Get the content container (scrollable area)\n        const content = pane.querySelector(Selectors.DIFF.PANE_CONTENT);\n        if (!content) return;\n\n        // Get code table wrapper to match height\n        const codeTableWrapper = content.querySelector(Selectors.DIFF.TABLE_WRAPPER);\n        if (!codeTableWrapper) {\n            Debug.warn('IconMarkerManager: Code table wrapper not found', null, 2);\n            return;\n        }\n\n        // Create or get icon column\n        let iconColumn = pane.querySelector(`:scope > ${Selectors.ICONS.COLUMN}`);\n        if (!iconColumn) {\n            iconColumn = document.createElement('div');\n            iconColumn.className = Selectors.ICONS.COLUMN.name();\n            pane.appendChild(iconColumn);\n        }\n\n        // Get all cells with chunk IDs\n        const chunkCells = content.querySelectorAll(\n            `${Selectors.DIFF.LINE_CONTENT}[data-chunk-id]:not([data-chunk-id=\"\"]), ` +\n            `${Selectors.DIFF.LINE_PLACEHOLDER}[data-chunk-id]:not([data-chunk-id=\"\"]), ` +\n            `${Selectors.DIFF.LINE_CONTENT_EMPTY}[data-chunk-id]:not([data-chunk-id=\"\"])`\n        );\n\n        // Organize cells by chunk ID\n        const chunkGroups = {};\n        chunkCells.forEach(cell => {\n            const chunkId = cell.dataset.chunkId;\n            if (!chunkGroups[chunkId]) {\n                chunkGroups[chunkId] = [];\n            }\n            chunkGroups[chunkId].push(cell);\n        });\n\n        // Process only the first cell of each chunk\n        Object.keys(chunkGroups).forEach(chunkId => {\n            // Sort by line number\n            chunkGroups[chunkId].sort((a, b) => {\n                const aLineNum = parseInt(a.dataset.lineId.split('-').pop(), 10);\n                const bLineNum = parseInt(b.dataset.lineId.split('-').pop(), 10);\n                return aLineNum - bLineNum;\n            });\n\n            // Get the first cell in the sorted group\n            const firstCell = chunkGroups[chunkId][0];\n\n            if (firstCell) {\n                this._createIconMarker(firstCell, iconColumn);\n            }\n        });\n\n        // Store table height for later use\n        if (codeTableWrapper) {\n            const tableHeight = codeTableWrapper.scrollHeight;\n            pane.dataset.tableHeight = tableHeight;\n        }\n\n        // Set up scroll synchronization\n        content.addEventListener('scroll', () => {\n            // Sync vertical scroll position with requestAnimationFrame\n            requestAnimationFrame(() => {\n                iconColumn.style.transform = `translateY(-${content.scrollTop}px)`;\n            });\n\n            // Handle horizontal scroll state\n            if (content.scrollLeft > 0) {\n                pane.classList.add(Selectors.STATUS.SCROLLED.name());\n            } else {\n                pane.classList.remove(Selectors.STATUS.SCROLLED.name());\n            }\n        }, { passive: true });\n\n        // Initial position\n        iconColumn.style.transform = `translateY(-${content.scrollTop}px)`;\n    }\n\n    /**\n     * Create a single icon marker for a cell\n     * @private\n     */\n    _createIconMarker(cell, iconColumn) {\n        const lineId = cell.dataset.lineId;\n        if (!lineId) return;\n\n        // Check if marker already exists\n        let marker = iconColumn.querySelector(`${Selectors.ICONS.MARKER}[data-line-id=\"${lineId}\"]`);\n\n        // Create new marker only if it doesn't exist\n        if (!marker) {\n            marker = document.createElement('div');\n            marker.className = Selectors.ICONS.MARKER.name();\n\n            // Add class for placeholder lines\n            if (cell.classList.contains(Selectors.DIFF.LINE_PLACEHOLDER.name())) {\n                marker.classList.add(Selectors.ICONS.MARKER_PLACEHOLDER.name());\n            }\n\n            // Use line ID for matching\n            marker.dataset.lineId = lineId;\n\n            // Set position index\n            const lineNumber = lineId.split('-').pop();\n            marker.dataset.iconIndex = lineNumber;\n            marker.style.setProperty('--icon-index', lineNumber);\n\n            // DO NOT transfer selection state classes - they will be managed by ChunkVisualStateManager\n            // Selection state and placeholder status are orthogonal concepts and should be managed separately\n\n            // Add to icon column\n            iconColumn.appendChild(marker);\n        }\n    }\n\n    /**\n     * Calculate cell height with maximum precision\n     * @private\n     * @returns {number} Precise cell height in pixels\n     */\n    _calculateCellHeight() {\n        // Get multiple line number cells for better accuracy\n        const lineNumberCells = this.diffViewer.container.querySelectorAll(Selectors.CODE.LINE_NUMBER);\n\n        if (!lineNumberCells || lineNumberCells.length === 0) {\n            Debug.log('IconMarkerManager: No line number cells found, using default height', null, 2);\n            return 20.5; // Fallback height\n        }\n\n        // Take the median height from first few cells (more reliable than just the first)\n        const heights = [];\n        const sampleSize = Math.min(5, lineNumberCells.length);\n\n        for (let i = 0; i < sampleSize; i++) {\n            heights.push(lineNumberCells[i].getBoundingClientRect().height);\n        }\n\n        // Sort heights and take the median (middle) value\n        heights.sort((a, b) => a - b);\n        const medianHeight = heights[Math.floor(heights.length / 2)];\n\n        Debug.log(`IconMarkerManager: Sampled heights: ${heights.join(', ')}, using median: ${medianHeight}px`, null, 3);\n\n        return medianHeight;\n    }\n\n    /**\n     * Set up height updater for window resizing\n     * @private\n     */\n    _setupIconHeightUpdater() {\n        // Debounce to avoid excessive updates\n        let resizeTimer;\n\n        // Add window resize listener\n        window.addEventListener('resize', () => {\n            clearTimeout(resizeTimer);\n            resizeTimer = setTimeout(() => {\n                this._updateIconColumnHeights();\n            }, 100);\n        });\n\n        // Initial update\n        this._updateIconColumnHeights();\n    }\n\n    /**\n     * Update all icon column heights\n     * @private\n     */\n    _updateIconColumnHeights() {\n        const panes = this.diffViewer.container.querySelectorAll(Selectors.DIFF.PANE);\n        const heights = {}; // Track heights for logging\n\n        panes.forEach(pane => {\n            const content = pane.querySelector(Selectors.DIFF.PANE_CONTENT);\n            const iconColumn = pane.querySelector(Selectors.ICONS.COLUMN);\n            const codeTableWrapper = content?.querySelector(Selectors.DIFF.TABLE_WRAPPER);\n\n            if (iconColumn && codeTableWrapper) {\n                const tableHeight = codeTableWrapper.scrollHeight;\n                const currentHeight = parseInt(iconColumn.style.height) || 0;\n\n                // Only update if height changed significantly\n                if (Math.abs(currentHeight - tableHeight) > 5) {\n                    iconColumn.style.height = `${tableHeight}px`;\n                    heights[pane.dataset.side || 'pane'] = tableHeight;\n                }\n            }\n        });\n\n        // Log all height updates in one message\n        if (Object.keys(heights).length > 0) {\n            Debug.log('IconMarkerManager: Updated icon column heights:', heights, 3);\n        }\n    }\n}\n","import { Debug } from '../../utils/Debug';\nimport { DOMUtils } from '../../utils/DOMUtils';\nimport Selectors from '../../constants/Selectors'; // Add this import\n\n/**\n * Manages layout dimensions and responsive behavior\n */\nexport class LayoutManager {\n    /**\n     * @param {DiffViewer} diffViewer - Parent diff viewer\n     */\n    constructor(diffViewer) {\n        this.diffViewer = diffViewer;\n        this.paneWidth = 0;\n    }\n\n    /**\n     * Initialize layout manager\n     */\n    initialize() {\n        // Initial pane width update\n        this.updatePaneWidth();\n\n        // Listen for window resize\n        window.addEventListener('resize', () => {\n            this.updatePaneWidth();\n        });\n\n        // Set up mutation observer for content changes\n        this.setupWidthObserver();\n\n        Debug.log('LayoutManager: Initialized', null, 2);\n    }\n\n    /**\n     * Update pane width and CSS variables\n     */\n    updatePaneWidth() {\n        // Use DOMUtils.getElements for consistent element selection\n        const panes = DOMUtils.getElements(Selectors.DIFF.PANE, this.diffViewer.container);\n        if (!panes || panes.length === 0) return;\n\n        const pane = panes[0];\n        const newWidth = pane.clientWidth;\n\n        if (newWidth !== this.paneWidth) {\n            this.paneWidth = newWidth;\n\n            // Instead of direct DOM manipulation, use a helper method to set CSS variables\n            this.setCSSVariable('--diff-pane-width', `${this.paneWidth}px`);\n\n            Debug.log(`LayoutManager: Updated pane width: ${this.paneWidth}px`, null, 3);\n        }\n    }\n\n    /**\n     * Set CSS variable consistently\n     * @param {string} name - Variable name\n     * @param {string} value - Variable value\n     */\n    setCSSVariable(name, value) {\n        document.documentElement.style.setProperty(name, value);\n    }\n\n    /**\n     * Set up observer for content changes affecting width\n     */\n    setupWidthObserver() {\n        // Create mutation observer\n        const observer = new MutationObserver((mutations) => {\n            let shouldUpdate = false;\n\n            for (const mutation of mutations) {\n                if (mutation.type === 'childList' ||\n                    (mutation.type === 'attributes' &&\n                     (mutation.attributeName === 'style' || mutation.attributeName === 'class'))) {\n                    shouldUpdate = true;\n                    break;\n                }\n            }\n\n            if (shouldUpdate) {\n                this.updatePaneWidth();\n            }\n        });\n\n        // Start observing the container\n        observer.observe(this.diffViewer.container, {\n            childList: true,\n            subtree: true,\n            attributes: true,\n            attributeFilter: ['style', 'class']\n        });\n\n        // Store for potential cleanup\n        this.observer = observer;\n\n        Debug.log('LayoutManager: Width observer setup complete', null, 2);\n    }\n\n    /**\n     * Clean up event handlers and observers\n     */\n    destroy() {\n        if (this.observer) {\n            this.observer.disconnect();\n            this.observer = null;\n        }\n\n        Debug.log('LayoutManager: Destroyed', null, 2);\n    }\n}\n","import { Debug } from '../../utils/Debug';\nimport Selectors from '../../constants/Selectors';\n\n/**\n * Handles scroll synchronization between panes\n */\nexport class ScrollSynchronizer {\n    /**\n     * @param {DiffViewer} diffViewer - Parent diff viewer\n     */\n    constructor(diffViewer) {\n        this.diffViewer = diffViewer;\n        this.isSyncing = false;\n    }\n\n    /**\n     * Set up synchronized scrolling between panes\n     */\n    setupSynchronizedScrolling() {\n        // Find panes\n        const panes = this.diffViewer.container.querySelectorAll(Selectors.DIFF.PANE);\n\n        if (panes.length !== 2) {\n            Debug.log(`ScrollSynchronizer: Could not find both diff panes. Found: ${panes.length}`, null, 2);\n            return;\n        }\n\n        const leftPane = panes[0];\n        const rightPane = panes[1];\n\n        // Get content elements\n        const leftContent = leftPane.querySelector(Selectors.DIFF.PANE_CONTENT);\n        const rightContent = rightPane.querySelector(Selectors.DIFF.PANE_CONTENT);\n\n        if (!leftContent || !rightContent) {\n            Debug.log('ScrollSynchronizer: Could not find all required scrolling elements', null, 2);\n            return;\n        }\n\n        // Store references\n        this.leftContent = leftContent;\n        this.rightContent = rightContent;\n\n        // Sync both vertical AND horizontal scrolling between panes\n        leftContent.addEventListener('scroll', () => this._handleScroll(leftContent, rightContent), { passive: true });\n        rightContent.addEventListener('scroll', () => this._handleScroll(rightContent, leftContent), { passive: true });\n\n        // Listen for window resize\n        window.addEventListener('resize', () => {\n            this._updateScrollState(leftContent);\n            this._updateScrollState(rightContent);\n        });\n\n        Debug.log('ScrollSynchronizer: Horizontal and vertical scroll synchronization set up', null, 2);\n    }\n\n    /**\n     * Handle scroll events\n     * @private\n     */\n    _handleScroll(sourceElement, targetElement) {\n        // Only update if not already syncing to avoid loops\n        if (!this.isSyncing) {\n            this.isSyncing = true;\n\n            // Sync vertical scrolling (top position)\n            targetElement.scrollTop = sourceElement.scrollTop;\n\n            // IMPORTANT: Also sync horizontal scrolling\n            targetElement.scrollLeft = sourceElement.scrollLeft;\n\n            this._updateScrollState(sourceElement);\n\n            // Reset syncing flag after a short delay\n            setTimeout(() => {\n                this.isSyncing = false;\n            }, 10);\n        }\n    }\n\n    /**\n     * Update CSS class based on scroll state\n     * @private\n     */\n    _updateScrollState(contentElement) {\n        const wasScrolled = contentElement.classList.contains(Selectors.STATUS.SCROLLED.name());\n        const isScrolled = contentElement.scrollLeft > 0;\n\n        // Only update if the state changed\n        if (wasScrolled !== isScrolled) {\n            if (isScrolled) {\n                contentElement.classList.add(Selectors.STATUS.SCROLLED.name());\n            } else {\n                contentElement.classList.remove(Selectors.STATUS.SCROLLED.name());\n            }\n        }\n    }\n}\n"],"names":["Debug","DOMUtils","ModalManager","TranslationManager","Selectors","CopyButton","_classCallCheck","_createClass","key","value","addCopyButtonsToPreview","containerId","arguments","length","undefined","MODAL","PREVIEW_CONTENT_ID","name","translationManager","getInstance","container","getElement","directElement","document","getElementById","querySelectorElement","querySelector","log","warn","preElements","querySelectorAll","forEach","pre","COPY","BUTTON","button","createElement","type","title","get","innerHTML","concat","ICON","TEXT","style","position","codeEl","insertBefore","appendChild","addEventListener","e","preventDefault","stopPropagation","_sourceCodeElement","textToCopy","hasAttribute","_decodeHTMLEntities","getAttribute","textContent","replace","_showManualCopyModal","_showProcessingState","classList","add","PROCESSING","textSpan","setTimeout","remove","_showCopiedState","COPIED","text","modalManager","modalId","createCopyModal","open","_showCopyFailure","getIconHtml","classes","UTILITY","MARGIN_END_2","BUTTON_PRIMARY","BUTTON_SUCCESS","BUTTON_DANGER","html","textarea","BrowserUIManager","diffViewer","_window$diffConfig","_this$options","options","elements","themeSwitcher","diffContainer","mergeControls","translationsSource","hasWindowConfig","window","diffConfig","translations","hasOptionsTranslations","isInitialized","lang","getLanguage","getAllTranslations","setDiffViewer","getTranslations","_window$diffConfig2","_this$options2","_typeof","initialize","containerSelector","CONTAINER","WRAPPER","error","generateDiffContainer","generateThemeSwitcher","generateThemeSelector","generateMergeControls","themeSwitcherId","THEME","SWITCHER","themeLoadingId","LOADING_INDICATOR","themeToggleId","TOGGLE","DIFF","contains","parentNode","id","className","FLEX","JUSTIFY_CONTENT_BETWEEN","PADDING_2","cssText","switcherWrapper","THEME_SWITCHER","sunIcon","moonIcon","MARGIN_START_2","LABEL","CONTROL","SLIDER","SLIDER_ROUND","loadingContainer","display","zIndex","body","themeLoadingContainer","observer","MutationObserver","mutations","disconnect","containerParent","observe","subtree","childList","attributes","attributeFilter","themeSelectorId","SELECTOR","existingSelector","selectorContainer","themeSelector","themeSelectorContainer","selectElement","removeChild","themeSwitcherContainer","THEME_SELECTOR","MARGIN_END_3","FORM_SELECT","firstChild","_this","diffContainerId","viewerId","VIEWER","viewerElement","MARGIN_TOP_2","mutation","attributeName","createdViewer","previewButtonId","MERGE","BUTTON_PREVIEW","toggleButtonId","DESTINATION_TOGGLE","toggleIconId","TOGGLE_ICON","toggleTextId","TOGGLE_TEXT","dropdownId","DESTINATION_DROPDOWN","applyButtonId","BUTTON_APPLY","CONTROLS_ACTIONS","ALIGN_ITEMS_CENTER","MARGIN_Y_2","previewSection","previewButton","BUTTON_INFO","preview","mergeSection","toggleGroup","ALIGN_ITEMS_STRETCH","toggleButton","BUTTON_FLAT","toggleIcon","toggleText","setAttribute","saveToOriginalTooltip","saveToOriginal","dropdown","applyButton","applyMerge","whiteSpace","alignItems","showThemeLoading","message","rect","getBoundingClientRect","scrollTop","pageYOffset","documentElement","top","hideThemeLoading","destroy","existingThemeSwitcher","existingThemeSelector","existingThemeSelectorContainer","hideThemeElements","showThemeElements","IconMarkerManager","initializeIconMarkers","cellHeight","_calculateCellHeight","setProperty","panes","PANE","pane","_setupIconColumn","_updateIconColumnHeights","_setupIconHeightUpdater","_this2","content","PANE_CONTENT","codeTableWrapper","TABLE_WRAPPER","iconColumn","ICONS","COLUMN","chunkCells","LINE_CONTENT","LINE_PLACEHOLDER","LINE_CONTENT_EMPTY","chunkGroups","cell","chunkId","dataset","push","Object","keys","sort","a","b","aLineNum","parseInt","lineId","split","pop","bLineNum","firstCell","_createIconMarker","tableHeight","scrollHeight","requestAnimationFrame","transform","scrollLeft","STATUS","SCROLLED","passive","marker","MARKER","MARKER_PLACEHOLDER","lineNumber","iconIndex","lineNumberCells","CODE","LINE_NUMBER","heights","sampleSize","Math","min","i","height","medianHeight","floor","join","_this3","resizeTimer","clearTimeout","currentHeight","abs","side","LayoutManager","paneWidth","updatePaneWidth","setupWidthObserver","getElements","newWidth","clientWidth","setCSSVariable","shouldUpdate","_iterator","_createForOfIteratorHelper","_step","s","n","done","err","f","ScrollSynchronizer","isSyncing","setupSynchronizedScrolling","leftPane","rightPane","leftContent","rightContent","_handleScroll","_updateScrollState","sourceElement","targetElement","contentElement","wasScrolled","isScrolled"],"sourceRoot":""}