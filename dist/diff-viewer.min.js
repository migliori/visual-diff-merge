!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(this,(()=>(()=>{"use strict";var e={"./src/components/ChunkManager.js":(e,t,n)=>{n.r(t),n.d(t,{ChunkManager:()=>g});var r=n("./src/utils/Debug.js"),o=n("./src/utils/ChunkUtils.js"),i=n("./src/constants/Selectors.js"),a=n("./src/components/chunks/ChunkRenderer.js"),l=n("./src/components/chunks/ChunkSelectionHandler.js"),s=n("./src/components/chunks/MergeContentGenerator.js");function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e,t,n){return(t=h(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}function h(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==c(t)?t:t+""}var g=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.diffViewer=t,this.chunks=[],this.oldContent=[],this.newContent=[],this.chunkElements=[],this.renderer=new a.ChunkRenderer(this),this.selectionHandler=new l.ChunkSelectionHandler(this),this.contentGenerator=new s.MergeContentGenerator(this),this.SELECTED_STATE=i.default.DIFF.CHUNK_SELECTED.name(),this.UNSELECTED_STATE=i.default.DIFF.CHUNK_UNSELECTED.name(),this._performanceMetrics={initTime:0,renderTime:0,chunkCount:0},r.Debug.log("ChunkManager: Component initialized",null,2)},t=[{key:"initChunks",value:function(e){var t=performance.now();r.Debug.log("ChunkManager: Initializing chunks from diff data",null,2),o.ChunkUtils.clearCache(),this.chunks=e.chunks||[],this.oldContent=e.old||[],this.newContent=e.new||[],this._performanceMetrics.chunkCount=this.chunks.length,this.chunks.forEach((function(e){e.conflict=!0})),r.Debug.log("ChunkManager: ".concat(this.chunks.length," chunks initialized"),null,3),this.diffViewer.diffNavigator&&this.diffViewer.diffNavigator.updateCounter();var n=performance.now();return this._performanceMetrics.initTime=n-t,r.Debug.log("ChunkManager: Initialization completed in ".concat(this._performanceMetrics.initTime.toFixed(2),"ms"),null,2),this.chunks}},{key:"renderChunks",value:function(){var e=performance.now();this.renderer.renderChunks(),this.selectionHandler.visualStateManager.initialize&&this.selectionHandler.visualStateManager.initialize(),this.setupChunkSelection(),this.initChunkElements();var t=performance.now();return this._performanceMetrics.renderTime=t-e,r.Debug.log("ChunkManager: Rendering completed in ".concat(this._performanceMetrics.renderTime.toFixed(2),"ms"),{chunkCount:this._performanceMetrics.chunkCount,msPerChunk:(this._performanceMetrics.renderTime/Math.max(1,this._performanceMetrics.chunkCount)).toFixed(2)},2),!0}},{key:"setupChunkSelection",value:function(){this.selectionHandler.setupChunkSelection()}},{key:"toggleChunkSelection",value:function(e,t,n){this.selectionHandler.toggleChunkSelection(e,t,n)}},{key:"generateMergedContent",value:function(){var e=this.selectionHandler.getSelections();return this.contentGenerator.generateMergedContent(e)}},{key:"generateFileFromLines",value:function(e){return this.contentGenerator.generateFileFromLines(e)}},{key:"initChunkElements",value:function(){var e=this;this.chunkElements=[],r.Debug.log("ChunkManager: Looking for ".concat(this.chunks.length," chunks in DOM"),null,2),this.chunks.forEach((function(t,n){var i=o.ChunkUtils.getChunkElements(t.id);if(r.Debug.log("ChunkManager: Chunk ID ".concat(t.id,": Found ").concat(i.length," elements"),null,3),i.length>0){var a=o.ChunkUtils.sortElementsByLineNumber(i);e.chunkElements[n]=a[0]}else r.Debug.warn("ChunkManager: No DOM elements found for chunk ID: ".concat(t.id),null,2)}));var t=this.chunkElements.filter(Boolean).length;if(r.Debug.log("ChunkManager: Initialized ".concat(t,"/").concat(this.chunks.length," chunk elements for navigation"),null,2),0===t&&this.chunks.length>0){r.Debug.error("ChunkManager: No chunk elements found in DOM. Navigation will not work properly.",null,1);var n=document.querySelectorAll(i.default.DIFF.CHUNK);r.Debug.warn("ChunkManager: ".concat(n.length," elements match the chunk selector ").concat(i.default.DIFF.CHUNK),null,2);var a=document.querySelectorAll("[data-chunk-id]");r.Debug.warn("ChunkManager: ".concat(a.length," elements have data-chunk-id attribute"),null,2)}}},{key:"getPerformanceMetrics",value:function(){var e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this._performanceMetrics);return this.selectionHandler.visualStateManager.getMetrics&&(e.visualStateManager=this.selectionHandler.visualStateManager.getMetrics()),e.cacheStats=o.ChunkUtils.getCacheStats(),e}},{key:"selections",get:function(){return this.selectionHandler.getSelections()}},{key:"onSelectionChange",value:function(){}}],t&&f(e.prototype,t),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}()},"./src/components/DiffNavigator.js":(e,t,n)=>{n.r(t),n.d(t,{DiffNavigator:()=>u});var r=n("./src/utils/Debug.js"),o=n("./src/components/navigator/NavigationCounter.js"),i=n("./src/components/navigator/NavigationUIBuilder.js"),a=n("./src/components/navigator/ConflictNavigator.js");function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c(r.key),r)}}function c(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l(t)?t:t+""}var u=function(){return e=function e(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.diffViewer=t,this.currentChunkIndex=-1,this.diffViewer&&this.diffViewer.chunkManager?(this.navigationCounter=new o.NavigationCounter(this),this.uiBuilder=new i.NavigationUIBuilder(this),this.conflictNavigator=new a.ConflictNavigator(this),n&&this.initNavigation(),r.Debug.log("DiffNavigator: Component created",null,2)):r.Debug.error("DiffNavigator: Failed to initialize - diffViewer or chunkManager is missing",null,1)},t=[{key:"initNavigation",value:function(){var e;if(r.Debug.log("DiffNavigator: Initializing",null,2),!this.diffViewer.chunkManager.chunks||0===this.diffViewer.chunkManager.chunks.length)return r.Debug.warn("DiffNavigator: No diff chunks found in configuration",{configChunks:this.diffViewer.chunkManager.chunks,diffConfig:this.diffViewer.diffConfig},1),void this.addNavigationButtons(!0);this.addNavigationButtons(),this.setupKeyboardShortcuts(),this.navigateToFirstConflict(),r.Debug.log("DiffNavigator: Initialized with chunk navigation",{chunks:(null===(e=this.diffViewer.chunkManager.chunks)||void 0===e?void 0:e.length)||0},2)}},{key:"addNavigationButtons",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.uiBuilder.createNavigationUI();t&&(this.navigationCounter.setCounterElement(t.counter),this.navigationCounter.setButtons(t.prevButton,t.nextButton),e?(t.prevButton.disabled=!0,t.nextButton.disabled=!0,t.counter.textContent="No diff data"):this.updateCounter())}},{key:"setupKeyboardShortcuts",value:function(){var e=this;document.addEventListener("keydown",(function(t){if("INPUT"!==t.target.tagName&&"TEXTAREA"!==t.target.tagName)switch(t.key){case"ArrowDown":(t.ctrlKey||t.metaKey)&&(t.preventDefault(),e.navigateToNextConflict());break;case"ArrowUp":(t.ctrlKey||t.metaKey)&&(t.preventDefault(),e.navigateToPrevConflict())}}))}},{key:"updateCounter",value:function(){return this.navigationCounter.updateCounter()}},{key:"navigateToFirstConflict",value:function(){return this.diffViewer.chunkManager.chunks&&0!==this.diffViewer.chunkManager.chunks.length?this.conflictNavigator.navigateToFirstConflict():(r.Debug.warn("DiffNavigator: Cannot navigate - no chunks available",null,2),!1)}},{key:"navigateToNextConflict",value:function(){return this.diffViewer.chunkManager.chunks&&0!==this.diffViewer.chunkManager.chunks.length?this.conflictNavigator.navigateToNextConflict():(r.Debug.warn("DiffNavigator: Cannot navigate - no chunks available",null,2),!1)}},{key:"navigateToPrevConflict",value:function(){return this.diffViewer.chunkManager.chunks&&0!==this.diffViewer.chunkManager.chunks.length?this.conflictNavigator.navigateToPrevConflict():(r.Debug.warn("DiffNavigator: Cannot navigate - no chunks available",null,2),!1)}},{key:"navigateToChunk",value:function(e){return this.diffViewer.chunkManager.chunks&&0!==this.diffViewer.chunkManager.chunks.length?this.conflictNavigator.navigateToChunk(e):(r.Debug.warn("DiffNavigator: Cannot navigate - no chunks available",null,2),!1)}},{key:"destroy",value:function(){this.uiBuilder.destroy(),r.Debug.log("DiffNavigator: Destroyed",null,2)}}],t&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}()},"./src/components/DiffViewer.js":(e,t,n)=>{n.r(t),n.d(t,{DiffViewer:()=>k});var r=n("./src/utils/Debug.js"),o=n("./src/utils/ResourceLoader.js"),i=n("./src/utils/DOMUtils.js"),a=n("./src/utils/ConfigUtils.js"),l=n("./src/utils/EndpointDiscovery.js"),s=n("./src/utils/TranslationManager.js"),c=n("./src/constants/Selectors.js"),u=n("./src/components/ThemeManager.js"),d=n("./src/components/ThemeSelector.js"),f=n("./src/components/SyntaxHighlighter.js"),h=n("./src/components/ChunkManager.js"),g=n("./src/components/ThemeToggle.js"),m=n("./src/components/MergeHandler.js"),p=n("./src/components/DiffNavigator.js"),v=n("./src/components/viewer/ScrollSynchronizer.js"),y=n("./src/components/viewer/IconMarkerManager.js"),b=n("./src/components/viewer/LayoutManager.js"),w=n("./src/components/modal/ModalManager.js");function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){C(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(e,t,n){return(t=O(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(){M=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),l=new j(r||[]);return o(a,"_invoke",{value:S(e,n,l)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var f="suspendedStart",h="suspendedYield",g="executing",m="completed",p={};function v(){}function y(){}function b(){}var w={};c(w,a,(function(){return this}));var T=Object.getPrototypeOf,I=T&&T(T(_([])));I&&I!==n&&r.call(I,a)&&(w=I);var C=b.prototype=v.prototype=Object.create(w);function L(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function D(e,t){function n(o,i,a,l){var s=d(e[o],e,i);if("throw"!==s.type){var c=s.arg,u=c.value;return u&&"object"==E(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,l)}),(function(e){n("throw",e,a,l)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,l)}))}l(s.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function S(t,n,r){var o=f;return function(i,a){if(o===g)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var l=r.delegate;if(l){var s=O(l,r);if(s){if(s===p)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=g;var c=d(t,n,r);if("normal"===c.type){if(o=r.done?m:h,c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(o=m,r.method="throw",r.arg=c.arg)}}}function O(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,O(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var i=d(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,p;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,p):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function _(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(E(t)+" is not iterable")}return y.prototype=b,o(C,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:y,configurable:!0}),y.displayName=c(b,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,s,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},L(D.prototype),c(D.prototype,l,(function(){return this})),t.AsyncIterator=D,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new D(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},L(C),c(C,s,"Generator"),c(C,a,(function(){return this})),c(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=_,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return l.type="throw",l.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],l=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;N(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:_(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),p}},t}function L(e,t,n,r,o,i,a){try{var l=e[i](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function D(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){L(i,r,o,a,l,"next",e)}function l(e){L(i,r,o,a,l,"throw",e)}a(void 0)}))}}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,O(r.key),r)}}function O(e){var t=function(e,t){if("object"!=E(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==E(t)?t:t+""}var k=function(){return e=function e(){var t,n,o,i,l,u,d,f,h,g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=a.ConfigUtils.mergeConfigurations({lang:"en",debug:!1,logLevel:2,theme:{defaultFamily:"atom-one",defaultMode:"dark",showSelector:!0},apiEndpoint:null},window.diffConfig||{},g),this.runtimeProps={diffData:g.diffData||(null===(t=window.diffConfig)||void 0===t?void 0:t.diffData)||null,serverSaveEnabled:g.serverSaveEnabled||(null===(n=window.diffConfig)||void 0===n?void 0:n.serverSaveEnabled)||!1,fileRefId:g.fileRefId||(null===(o=window.diffConfig)||void 0===o?void 0:o.fileRefId)||"",oldFileRefId:g.oldFileRefId||(null===(i=window.diffConfig)||void 0===i?void 0:i.oldFileRefId)||"",newFileName:g.newFileName||(null===(l=window.diffConfig)||void 0===l?void 0:l.newFileName)||"",oldFileName:g.oldFileName||(null===(u=window.diffConfig)||void 0===u?void 0:u.oldFileName)||"",isIdentical:g.isIdentical||(null===(d=window.diffConfig)||void 0===d?void 0:d.isIdentical)||!1,filepath:g.filepath||(null===(f=window.diffConfig)||void 0===f?void 0:f.filepath)||null,demoEnabled:g.demoEnabled||(null===(h=window.diffConfig)||void 0===h?void 0:h.demoEnabled)||!1},this.mainLoaderId=g.mainLoaderId||null,r.Debug.initialize(this.config.debug,"[DiffViewer]",this.config.logLevel||2);var m=s.TranslationManager.getInstance();if(!m.isInitialized()&&this.config.translations?(r.Debug.log("DiffViewer: Initializing TranslationManager",{lang:this.config.lang||"en",translations:this.config.translations},2),m.initialize(this.config.lang||"en",this.config.translations)):r.Debug.log("DiffViewer: TranslationManager already initialized",null,2),this.container=document.querySelector(c.default.DIFF.VIEWER),!this.container)throw r.Debug.error("DiffViewer: Container element not found",null,2),new Error("Container element not found");if(!this.runtimeProps.diffData)throw r.Debug.error("DiffViewer: No diff data provided",null,2),new Error("No diff data provided");r.Debug.log("DiffViewer: Initializing component",null,2),this._initializeServices(),this._createComponents(),r.Debug.log("DiffViewer: Component created",null,2)},t=[{key:"_initializeServices",value:function(){this.resourceLoader=o.ResourceLoader.getInstance(),this.themeManager=u.ThemeManager.getInstance(),this.themeSelector=d.ThemeSelector.getInstance(this),this.modalManager=w.ModalManager.getInstance({debug:this.config.debug,translations:this.config.translations}),this.themeManager.initialize({theme:this.config.theme},this.resourceLoader)}},{key:"_createComponents",value:function(){this.syntaxHighlighter=new f.SyntaxHighlighter(this),this.chunkManager=new h.ChunkManager(this),this.themeToggle=new g.ThemeToggle(this.browserUIManager,c.default.THEME.TOGGLE.name(),c.default.CONTAINER.WRAPPER.name()),this.mergeHandler=new m.MergeHandler(this),this.diffNavigator=new p.DiffNavigator(this,!1),this.scrollSynchronizer=new v.ScrollSynchronizer(this),this.iconMarkerManager=new y.IconMarkerManager(this),this.layoutManager=new b.LayoutManager(this)}},{key:"initialize",value:(k=D(M().mark((function e(){return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.Debug.log("DiffViewer: Beginning initialization",null,2),e.prev=1,e.next=4,this._initializeData();case 4:return e.next=6,this._loadResources();case 6:return e.next=8,this._renderUI();case 8:return e.next=10,this._setupUIFeatures();case 10:return this.runtimeProps.demoEnabled&&this._showDemoModeWarning(),this.modalManager.initModals(),r.Debug.log("DiffViewer: Initialization complete",null,2),e.abrupt("return",!0);case 16:throw e.prev=16,e.t0=e.catch(1),r.Debug.error("DiffViewer: Error during initialization:",e.t0,2),this._handleInitializationError(e.t0),e.t0;case 21:case"end":return e.stop()}}),e,this,[[1,16]])}))),function(){return k.apply(this,arguments)})},{key:"_handleInitializationError",value:function(e){r.Debug.error("DiffViewer: Error handling initialization failure",e,2);var t=s.TranslationManager.getInstance().get("errorLoadingDiff")||"Error Loading Diff Viewer",n=document.createElement("div");n.className="".concat(c.default.UTILITY.ALERT_DANGER.name()," vdm-m-3"),n.innerHTML="\n            <h4>".concat(t,"</h4>\n            <p>").concat(e.message||"An unexpected error occurred.","</p>\n        "),this.container&&(this.container.appendChild(n),this.container.style.display="flex")}},{key:"_initializeData",value:(O=D(M().mark((function e(){var t,n,o;return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.chunkManager.initChunks(this.runtimeProps.diffData),r.Debug.log("DiffViewer: Loaded ".concat((null===(t=this.runtimeProps.diffData.chunks)||void 0===t?void 0:t.length)||0," chunks and content arrays: old=").concat((null===(n=this.runtimeProps.diffData.old)||void 0===n?void 0:n.length)||0,", new=").concat((null===(o=this.runtimeProps.diffData.new)||void 0===o?void 0:o.length)||0),null,2);case 2:case"end":return e.stop()}}),e,this)}))),function(){return O.apply(this,arguments)})},{key:"_loadResources",value:(L=D(M().mark((function e(){var t;return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.syntaxHighlighter.highlightJsLoaded){e.next=5;break}return e.next=3,this.syntaxHighlighter.initialize();case 3:return e.next=5,this.syntaxHighlighter.loadHighlightJs();case 5:return t=this.themeManager.getCurrentTheme(),e.next=8,this.themeManager.applyTheme(t.family,t.mode);case 8:case"end":return e.stop()}}),e,this)}))),function(){return L.apply(this,arguments)})},{key:"_renderUI",value:(C=D(M().mark((function e(){var t,n,o,a,l,s;return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.container&&(this.container.style.display="flex"),r.Debug.log("DiffViewer: Rendering ".concat((null===(t=this.runtimeProps.diffData.chunks)||void 0===t?void 0:t.length)||0," chunks"),null,2),this.chunkManager.renderChunks(),this.syntaxHighlighter.highlightAll(this.container),this.themeToggle.initialize(),this.config.theme.showSelector&&this.themeSelector.initialize(),i.DOMUtils.toggleClass(c.default.DIFF.CONTAINER.name(),"loaded",!0),null!=(a=document.querySelector(c.default.CONTAINER.WRAPPER))&&a.classList.contains("vdm-d-none")&&a.classList.remove("vdm-d-none"),l=document.querySelector(c.default.THEME.SWITCHER),null==(s=document.querySelector(c.default.DIFF.CONTAINER))||null===(n=s.parentNode)||void 0===n||null===(o=n.insertBefore)||void 0===o||o.call(n,l,s),l&&s&&r.Debug.log("DiffViewer: Repositioned theme switcher above diff container",null,2);case 13:case"end":return e.stop()}}),e,this)}))),function(){return C.apply(this,arguments)})},{key:"_setupUIFeatures",value:(T=D(M().mark((function e(){var t;return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.scrollSynchronizer.setupSynchronizedScrolling(),this.layoutManager.initialize(),this.iconMarkerManager.initializeIconMarkers(),this.diffNavigator&&(r.Debug.log("DiffViewer: Initializing navigation with loaded chunks",null,2),this.diffNavigator.initNavigation()),t=new CustomEvent("vdm-diff-loaded",{detail:{timestamp:new Date,viewer:this}}),document.dispatchEvent(t),r.Debug.log("DiffViewer: Dispatched vdm-diff-loaded event",null,2),r.Debug.log("DiffViewer: UI features and enhancements set up",null,2);case 8:case"end":return e.stop()}}),e,this)}))),function(){return T.apply(this,arguments)})},{key:"_showDemoModeWarning",value:function(){var e;r.Debug.log("DiffViewer: Showing demo mode warning",null,2);var t=window.AlertManager||(null===(e=this.browserUIManager)||void 0===e?void 0:e.AlertManager);if(t){var n=t.getInstance(),o=document.querySelector("#vdm-file-comparison-form");n.showAlert("<strong>Demo Mode Active</strong> - Merging is disabled on this server and will be simulated.\n                To use the file browser with actual file modifications, please install Visual Diff Merge on your own server.","warning",{dismissable:!0,className:"vdm-mb-3",translate:!1,targetElement:o,placement:"before",timeout:0}),r.Debug.log("DiffViewer: Demo mode warning displayed via AlertManager",null,2)}}},{key:"updateConfig",value:function(e){e&&(this.config=a.ConfigUtils.mergeConfigurations(this.config,e),r.Debug.log("DiffViewer: Configuration updated",e,3))}},{key:"updateRuntimeProps",value:function(e){e&&(this.runtimeProps=I(I({},this.runtimeProps),e),r.Debug.log("DiffViewer: Runtime properties updated",e,3))}},{key:"getConfig",value:function(){return I({},this.config)}},{key:"getRuntimeProps",value:function(){var e,t,n,o;return r.Debug.log("DiffViewer.getRuntimeProps called",{fileRefId:this.runtimeProps.fileRefId||"(none)",oldFileRefId:this.runtimeProps.oldFileRefId||"(none)",newFileName:this.runtimeProps.newFileName||"(none)",oldFileName:this.runtimeProps.oldFileName||"(none)",windowDiffConfig:{hasFileRefId:window.diffConfig&&"fileRefId"in window.diffConfig,fileRefId:(null===(e=window.diffConfig)||void 0===e?void 0:e.fileRefId)||"(none)",hasOldFileRefId:window.diffConfig&&"oldFileRefId"in window.diffConfig,oldFileRefId:(null===(t=window.diffConfig)||void 0===t?void 0:t.oldFileRefId)||"(none)",hasNewFileName:window.diffConfig&&"newFileName"in window.diffConfig,newFileName:(null===(n=window.diffConfig)||void 0===n?void 0:n.newFileName)||"(none)",hasOldFileName:window.diffConfig&&"oldFileName"in window.diffConfig,oldFileName:(null===(o=window.diffConfig)||void 0===o?void 0:o.oldFileName)||"(none)"}},3),I({},this.runtimeProps)}},{key:"destroy",value:function(){this.layoutManager&&this.layoutManager.destroy(),this.diffNavigator&&this.diffNavigator.destroy(),i.DOMUtils.toggleClass(c.default.DIFF.CONTAINER.name(),"loaded",!1),r.Debug.log("DiffViewer: Component destroyed",null,2)}},{key:"initializeRuntimeProps",value:function(){var e,t,n,o,i,a;this.runtimeProps={diffData:this.options.diffData||{},serverSaveEnabled:this.options.serverSaveEnabled||!1,fileRefId:this.options.fileRefId||(null===(e=window.diffConfig)||void 0===e?void 0:e.fileRefId)||"",oldFileRefId:this.options.oldFileRefId||(null===(t=window.diffConfig)||void 0===t?void 0:t.oldFileRefId)||"",newFileName:this.options.newFileName||(null===(n=window.diffConfig)||void 0===n?void 0:n.newFileName)||"",oldFileName:this.options.oldFileName||(null===(o=window.diffConfig)||void 0===o?void 0:o.oldFileName)||"",isIdentical:this.options.isIdentical||(null===(i=window.diffConfig)||void 0===i?void 0:i.isIdentical)||!1,filepath:this.options.filepath||(null===(a=window.diffConfig)||void 0===a?void 0:a.filepath)||""},r.Debug.log("DiffViewer: Runtime properties initialized",this.runtimeProps,3)}},{key:"isContentBeautified",value:function(){return this.runtimeProps.isBeautified||!1}},{key:"getEndpoint",value:(E=D(M().mark((function e(t){var n,o,i,a;return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.Debug.log("DiffViewer: Getting endpoint for ".concat(t),null,2),e.prev=1,n=l.EndpointDiscovery.getInstance(),e.next=5,n.getEndpoint(t);case 5:return o=e.sent,r.Debug.log("DiffViewer: Found endpoint for ".concat(t),o,2),e.abrupt("return",o);case 10:if(e.prev=10,e.t0=e.catch(1),r.Debug.warn("DiffViewer: Error getting endpoint for ".concat(t,", using fallback"),e.t0,1),null===(i=this.config)||void 0===i||!i.apiEndpoints[t]){e.next=15;break}return e.abrupt("return",this.config.apiEndpoints[t]);case 15:return a={ajaxDiffMerge:"../api/ajax-diff-merge.php",diffProcessor:"../api/diff-processor.php"},e.abrupt("return",a[t]||"../api/"+t+".php");case 17:case"end":return e.stop()}}),e,this,[[1,10]])}))),function(e){return E.apply(this,arguments)})},{key:"setBrowserUIManager",value:function(e){return this.browserUIManager=e,this.themeToggle&&this.themeToggle.setBrowserUIManager(e),r.Debug.log("DiffViewer: BrowserUIManager reference set",null,2),this}}],t&&S(e.prototype,t),n&&S(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,E,T,C,L,O,k}()},"./src/components/MergeHandler.js":(e,t,n)=>{n.r(t),n.d(t,{MergeHandler:()=>d});var r=n("./src/utils/Debug.js"),o=n("./src/utils/AlertManager.js"),i=n("./src/components/merge/MergePreviewManager.js"),a=n("./src/components/merge/MergeUIController.js"),l=n("./src/components/merge/MergeOperationHandler.js");function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function u(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}var d=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.diffViewer=t,this.modalManager=this.diffViewer.modalManager,this.previewManager=new i.MergePreviewManager(this),this.uiController=new a.MergeUIController(this),this.operationHandler=new l.MergeOperationHandler(this),this.initialize(),r.Debug.log("MergeHandler: Component initialized",null,2)},(t=[{key:"initialize",value:function(){var e=this.diffViewer.getRuntimeProps(),t=e&&e.serverSaveEnabled;r.Debug.log("MergeHandler: Initializing with serverSaveEnabled=".concat(t),null,2),this.uiController.initialize(),!1===t&&(r.Debug.log("MergeHandler: Server save is disabled, using local-only controls",null,2),this.uiController.setupLocalOnlyControls()),this.previewManager.initialize(),r.Debug.log("MergeHandler: All subcomponents initialized",null,2)}},{key:"previewMerge",value:function(){this.previewManager.handlePreviewClick()}},{key:"getMergedContent",value:function(){return this.diffViewer.chunkManager.generateMergedContent()}},{key:"proceedWithMerge",value:function(e){return this.operationHandler.proceedWithMerge(e)}},{key:"countUnresolvedConflicts",value:function(){return this.uiController.countUnresolvedConflicts()}},{key:"showConflictModal",value:function(e){this.uiController.showConflictModal(e)}},{key:"highlightUnresolvedChunks",value:function(){return this.uiController.highlightUnresolvedChunks()}},{key:"createAlertElement",value:function(e,t,n){var r=o.default.getInstance();return e?r.showSuccess(t,{timeout:0,translate:!1}):r.showWarning(n,{timeout:0,translate:!1})}}])&&c(e.prototype,t),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}()},"./src/components/SyntaxHighlighter.js":(e,t,n)=>{n.r(t),n.d(t,{SyntaxHighlighter:()=>y});var r=n("./src/utils/Debug.js"),o=n("./src/utils/ResourceLoader.js"),i=n("./src/utils/MergeContentFormatter.js"),a=n("./src/data/highlightjs-languages.json"),l=n("./src/utils/DOMUtils.js"),s=n("./src/constants/Selectors.js"),c=n("./src/utils/TranslationManager.js"),u=n("./src/utils/LoaderManager.js"),d=n("./src/components/ThemeManager.js");function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function h(){h=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof b?t:b,a=Object.create(i.prototype),l=new j(r||[]);return o(a,"_invoke",{value:S(e,n,l)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var g="suspendedStart",m="suspendedYield",p="executing",v="completed",y={};function b(){}function w(){}function E(){}var T={};c(T,a,(function(){return this}));var I=Object.getPrototypeOf,C=I&&I(I(_([])));C&&C!==n&&r.call(C,a)&&(T=C);var M=E.prototype=b.prototype=Object.create(T);function L(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function D(e,t){function n(o,i,a,l){var s=d(e[o],e,i);if("throw"!==s.type){var c=s.arg,u=c.value;return u&&"object"==f(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,l)}),(function(e){n("throw",e,a,l)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,l)}))}l(s.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function S(t,n,r){var o=g;return function(i,a){if(o===p)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var l=r.delegate;if(l){var s=O(l,r);if(s){if(s===y)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===g)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=p;var c=d(t,n,r);if("normal"===c.type){if(o=r.done?v:m,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(o=v,r.method="throw",r.arg=c.arg)}}}function O(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,O(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=d(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function _(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(f(t)+" is not iterable")}return w.prototype=E,o(M,"constructor",{value:E,configurable:!0}),o(E,"constructor",{value:w,configurable:!0}),w.displayName=c(E,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,c(e,s,"GeneratorFunction")),e.prototype=Object.create(M),e},t.awrap=function(e){return{__await:e}},L(D.prototype),c(D.prototype,l,(function(){return this})),t.AsyncIterator=D,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new D(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},L(M),c(M,s,"Generator"),c(M,a,(function(){return this})),c(M,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=_,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return l.type="throw",l.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],l=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;N(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:_(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function g(e,t,n,r,o,i,a){try{var l=e[i](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){g(i,r,o,a,l,"next",e)}function l(e){g(i,r,o,a,l,"throw",e)}a(void 0)}))}}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v(r.key),r)}}function v(e){var t=function(e,t){if("object"!=f(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==f(t)?t:t+""}var y=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.diffViewer=t,this.highlightJsLoaded=!1,this.resourceLoader=o.ResourceLoader.getInstance(),this.themeManager=d.ThemeManager.getInstance(),this.language="plaintext";var n=this.themeManager.getCurrentTheme();this.theme=n.mode||"light",r.Debug.log("SyntaxHighlighter: Initialized",null,2)},t=[{key:"initialize",value:(v=m(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadHighlightJs();case 2:if(!this.highlightJsLoaded){e.next=9;break}return t=this.diffViewer.getRuntimeProps().filepath||"",e.next=6,this.setLanguage(t);case 6:r.Debug.log("SyntaxHighlighter: Initialized with language:",this.language,2),e.next=10;break;case 9:r.Debug.warn("SyntaxHighlighter: Initialization incomplete - highlight.js failed to load",null,2);case 10:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)})},{key:"loadHighlightJs",value:(g=m(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r.Debug.log("SyntaxHighlighter: Loading highlight.js core",null,2),e.next=4,this.diffViewer.resourceLoader.loadSyntaxHighlighterCore();case 4:return this.highlightJsLoaded=!0,r.Debug.log("SyntaxHighlighter: highlight.js loaded successfully",null,2),e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(0),r.Debug.error("SyntaxHighlighter: Failed to load highlight.js:",e.t0,2),e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,this,[[0,9]])}))),function(){return g.apply(this,arguments)})},{key:"highlightAll",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;if(this.highlightJsLoaded&&window.hljs){var n=l.DOMUtils.getElements("".concat(s.default.DIFF.LINE_CONTENT,":not(").concat(s.default.DIFF.LINE_CONTENT_EMPTY,"):not(").concat(s.default.DIFF.LINE_PLACEHOLDER,")"),t);if(n){var o=Array.from(n).filter((function(e){return e.textContent.trim()}));r.Debug.log("SyntaxHighlighter: Found ".concat(o.length," code elements to highlight"),null,2);var i=null;if(o.length>100){var a=c.TranslationManager.getInstance(),d=u.LoaderManager.getInstance(),f=a.get("applyingSyntaxHighlighting","Applying syntax highlighting...");i=d.showLoader(f,{fullscreen:!0,zIndex:1e3}),r.Debug.log("SyntaxHighlighter: Showing loader for large file highlighting",null,2)}var h=0,g=performance.now(),m=function(){if(h>=o.length)if(i){u.LoaderManager.getInstance().hideLoader(i);var t=performance.now()-g;r.Debug.log("SyntaxHighlighter: Highlighting complete for ".concat(o.length," elements in ").concat(t.toFixed(2),"ms"),null,2)}else r.Debug.log("SyntaxHighlighter: Highlighting complete",null,2);else{for(var n=Math.min(h+30,o.length),a=h;a<n;a++)e.highlightElement(o[a]);if(i&&h%150==0){var l=u.LoaderManager.getInstance(),s=c.TranslationManager.getInstance(),d=Math.round(h/o.length*100),f=s.get("applyingSyntaxHighlightingProgress","Applying syntax highlighting ({0}%)").replace("{0}",d);l.updateLoaderMessage(i,f)}h=n,requestAnimationFrame((function(){setTimeout(m,0)}))}};m()}else r.Debug.log("SyntaxHighlighter: No code elements found to highlight",null,2)}else r.Debug.warn("SyntaxHighlighter: Cannot highlight code - highlight.js not loaded",null,2)}},{key:"highlightElement",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.highlightJsLoaded&&window.hljs&&e)try{e.classList.contains(this.language)||(e.className.split(" ").filter((function(e){return e.startsWith("language-")})).forEach((function(t){e.classList.remove(t)})),e.classList.add(this.language)),i.MergeContentFormatter.resetHighlighting(e),window.hljs.highlightElement(e),t&&window.hljs.lineNumbersBlock&&window.hljs.lineNumbersBlock(e)}catch(e){r.Debug.error("SyntaxHighlighter: Error highlighting element:",e,2)}}},{key:"setLanguage",value:(f=m(h().mark((function e(t){var n,o,i,l,s,d,f,g,m;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=this.diffViewer.getRuntimeProps(),i="plaintext",l="default",t&&"string"==typeof t&&t.includes(".")&&(s=t.split(".").pop().toLowerCase())&&(i=a[s]||s,l="filepath",r.Debug.log("SyntaxHighlighter: Language determined from filepath extension: ".concat(s),null,2)),"plaintext"===i&&"default"===l&&null!==(n=o.diffData)&&void 0!==n&&n.language&&(i=o.diffData.language,l="diffData",r.Debug.log("SyntaxHighlighter: Language determined from diffData: ".concat(i),null,2)),"plaintext"===i&&"default"===l&&r.Debug.log("SyntaxHighlighter: No language could be determined, using plaintext as fallback",null,2),this.language===i){e.next=31;break}if(this.language=i,r.Debug.log("SyntaxHighlighter: Setting language to ".concat(i," (source: ").concat(l,")"),null,2),!this.highlightJsLoaded||this.resourceLoader.loadedLanguages.has(i)){e.next=27;break}return r.Debug.log("SyntaxHighlighter: Loading language ".concat(i),null,2),d=c.TranslationManager.getInstance(),f=u.LoaderManager.getInstance(),g=d.get("loadingLanguage","Loading language: {0}").replace("{0}",i),(m=this.diffViewer.mainLoaderId)||r.Debug.warn("SyntaxHighlighter: No main loader ID available from DiffViewer for language loading",null,2),e.prev=16,m&&f.updateLoaderMessage(m,g),e.next=20,this.resourceLoader.loadLanguage(i);case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(16),r.Debug.error("SyntaxHighlighter: Error loading language ".concat(i,":"),e.t0,2);case 25:e.next=28;break;case 27:r.Debug.log("SyntaxHighlighter: Language ".concat(i," already loaded"),null,3);case 28:r.Debug.log("SyntaxHighlighter: Language set to ".concat(this.language),null,2),e.next=32;break;case 31:r.Debug.log("SyntaxHighlighter: Language already set to ".concat(this.language),null,3);case 32:case"end":return e.stop()}}),e,this,[[16,22]])}))),function(e){return f.apply(this,arguments)})}],t&&p(e.prototype,t),n&&p(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,f,g,v}()},"./src/components/ThemeManager.js":(e,t,n)=>{n.r(t),n.d(t,{ThemeManager:()=>b});var r=n("./src/utils/Debug.js"),o=n("./src/utils/BaseSingleton.js"),i=n("./src/constants/Selectors.js");function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e,t,n){return(t=h(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(){c=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},l=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var i=t&&t.prototype instanceof b?t:b,a=Object.create(i.prototype),l=new j(r||[]);return o(a,"_invoke",{value:S(e,n,l)}),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=f;var g="suspendedStart",m="suspendedYield",p="executing",v="completed",y={};function b(){}function w(){}function E(){}var T={};d(T,l,(function(){return this}));var I=Object.getPrototypeOf,C=I&&I(I(_([])));C&&C!==n&&r.call(C,l)&&(T=C);var M=E.prototype=b.prototype=Object.create(T);function L(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function D(e,t){function n(o,i,l,s){var c=h(e[o],e,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==a(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,l,s)}),(function(e){n("throw",e,l,s)})):t.resolve(d).then((function(e){u.value=e,l(u)}),(function(e){return n("throw",e,l,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function S(t,n,r){var o=g;return function(i,a){if(o===p)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var l=r.delegate;if(l){var s=O(l,r);if(s){if(s===y)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===g)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=p;var c=h(t,n,r);if("normal"===c.type){if(o=r.done?v:m,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(o=v,r.method="throw",r.arg=c.arg)}}}function O(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,O(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=h(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function _(t){if(t||""===t){var n=t[l];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(a(t)+" is not iterable")}return w.prototype=E,o(M,"constructor",{value:E,configurable:!0}),o(E,"constructor",{value:w,configurable:!0}),w.displayName=d(E,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,d(e,u,"GeneratorFunction")),e.prototype=Object.create(M),e},t.awrap=function(e){return{__await:e}},L(D.prototype),d(D.prototype,s,(function(){return this})),t.AsyncIterator=D,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new D(f(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},L(M),d(M,u,"Generator"),d(M,l,(function(){return this})),d(M,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=_,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return l.type="throw",l.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],l=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;N(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:_(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function u(e,t,n,r,o,i,a){try{var l=e[i](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){u(i,r,o,a,l,"next",e)}function l(e){u(i,r,o,a,l,"throw",e)}a(void 0)}))}}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}function h(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}function g(e,t){if(t&&("object"==a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(m=function(){return!!e})()}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}var y=null,b=function(e){function t(){var e,n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=p(r=t),(e=g(n,m()?Reflect.construct(r,o||[],p(n).constructor):r.apply(n,o)))._isFirstInstance(y)?(e.initialized=!1,e.availableThemes=null,e.currentTheme={family:null,mode:null},e.defaultTheme={family:"atom-one",mode:"dark"},e.listeners=[],e.resourceLoader=null,y=e,e):g(e)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(t,e),n=t,o=[{key:"initialize",value:function(e,t){if(r.Debug.log("ThemeManager: Initializing",{config:e},2),this.initialized)return!0;this.config=(null==e?void 0:e.theme)||{},this.resourceLoader=t,this.availableThemes=t.config.availableThemes,this.defaultTheme.family=this.config.defaultFamily||this.defaultTheme.family,this.defaultTheme.mode=this.config.defaultMode||this.defaultTheme.mode;var n=localStorage.getItem("diffViewerThemeFamily")||this.defaultTheme.family,o=localStorage.getItem("diffViewerTheme")||this.defaultTheme.mode;return this.currentTheme={family:n,mode:o},r.Debug.log("ThemeManager: Initialized with ".concat(n," (").concat(o,")"),null,2),this.initialized=!0,r.Debug.log("ThemeManager: Successfully initialized",null,2),!0}},{key:"getThemeUrl",value:function(e,t){var n,o,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(null!==(n=this.availableThemes)&&void 0!==n&&null!==(n=n[e])&&void 0!==n&&n[t])return this.availableThemes[e][t];if(!i)return null;var a="dark"===t?"light":"dark";return null!==(o=this.availableThemes)&&void 0!==o&&null!==(o=o[e])&&void 0!==o&&o[a]?(r.Debug.log("ThemeManager: Theme ".concat(e," doesn't have ").concat(t," mode, using ").concat(a," instead"),null,2),this.availableThemes[e][a]):(r.Debug.log("ThemeManager: Falling back to default theme: ".concat(this.defaultTheme.family," (").concat(t,")"),null,2),this.availableThemes[this.defaultTheme.family][t]||this.availableThemes[this.defaultTheme.family][a])}},{key:"themeExists",value:function(e,t){var n;return!(null===(n=this.availableThemes)||void 0===n||null===(n=n[e])||void 0===n||!n[t])}},{key:"getAvailableThemeFamilies",value:function(){return Object.keys(this.availableThemes||{})}},{key:"getAvailableModesForFamily",value:function(e){var t;return null!==(t=this.availableThemes)&&void 0!==t&&t[e]?Object.keys(this.availableThemes[e]):[]}},{key:"getThemeCdnVersion",value:function(){return"11.11.1"}},{key:"getThemeCdnBase",value:function(){return"https://cdnjs.cloudflare.com/ajax/libs/highlight.js"}},{key:"getStandardThemeUrl",value:function(e,t){return"".concat(this.getThemeCdnBase(),"/").concat(this.getThemeCdnVersion(),"/styles/base16/").concat(e,"-").concat(t,".min.css")}},{key:"applyTheme",value:(w=d(c().mark((function e(t,n){var o,i,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.initialized&&this.resourceLoader){e.next=3;break}return r.Debug.warn("ThemeManager: Not properly initialized",null,2),e.abrupt("return",!1);case 3:if(o=this.getThemeUrl(t,n)){e.next=7;break}return r.Debug.error("ThemeManager: Could not resolve URL for theme ".concat(t,"/").concat(n),null,2),e.abrupt("return",!1);case 7:if(r.Debug.log("ThemeManager: Applying theme ".concat(t,"/").concat(n),null,2),!(i=document.querySelector('link[href*="highlight.js"][href*="/styles/"][rel="stylesheet"]:not([disabled])'))||i.getAttribute("href")!==o){e.next=12;break}return r.Debug.log("ThemeManager: Theme ".concat(t,"/").concat(n," already active"),null,2),e.abrupt("return",!0);case 12:if(e.prev=12,document.querySelector('link[href="'.concat(o,'"]'))){e.next=16;break}return e.next=16,this.resourceLoader.loadCSS(o);case 16:return document.querySelectorAll('link[href*="highlight.js"][href*="/styles/"][rel="stylesheet"]:not([disabled])').forEach((function(e){e.disabled=!0})),(a=document.querySelector('link[href="'.concat(o,'"]')))&&(a.disabled=!1,r.Debug.log("ThemeManager: Theme applied: ".concat(t," (").concat(n,")"),null,2)),this.updateContainerThemeClass(n),this.currentTheme={family:t,mode:n},localStorage.setItem("diffViewerThemeFamily",t),localStorage.setItem("diffViewerTheme",n),this.notifyListeners(),r.Debug.log("ThemeManager: Theme applied successfully: ".concat(t,"/").concat(n),null,2),e.abrupt("return",!0);case 28:return e.prev=28,e.t0=e.catch(12),r.Debug.error("ThemeManager: Error during theme operation:",e.t0,2),e.abrupt("return",!1);case 32:case"end":return e.stop()}}),e,this,[[12,28]])}))),function(e,t){return w.apply(this,arguments)})},{key:"updateContainerThemeClass",value:function(e){var t=document.getElementById(i.default.CONTAINER.WRAPPER.name());t&&(t.classList.remove(i.default.THEME.DARK.name(),i.default.THEME.LIGHT.name()),t.classList.add(i.default.THEME.MODE_PREFIX.name()+"--"+e))}},{key:"setThemeMode",value:(b=d(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.Debug.log("ThemeManager: Setting theme mode to ".concat(t),null,2),e.abrupt("return",this.applyTheme(this.currentTheme.family,t));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return b.apply(this,arguments)})},{key:"setThemeFamily",value:(h=d(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.Debug.log("ThemeManager: Setting theme family to ".concat(t),null,2),e.abrupt("return",this.applyTheme(t,this.currentTheme.mode));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"addListener",value:function(e){"function"==typeof e&&this.listeners.push(e)}},{key:"notifyListeners",value:function(){var e=this;this.listeners.forEach((function(t){try{t(e.currentTheme)}catch(e){r.Debug.error("ThemeManager: Error in theme listener:",e,2)}}))}},{key:"getCurrentTheme",value:function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.currentTheme)}},{key:"loadInitialTheme",value:(u=d(c().mark((function e(){var t,n,o,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.initialized&&this.resourceLoader){e.next=3;break}return r.Debug.warn("ThemeManager: Not properly initialized",null,2),e.abrupt("return",!1);case 3:if(t=this.currentTheme.family||this.defaultTheme.family,n=this.currentTheme.mode||this.defaultTheme.mode,r.Debug.log("ThemeManager: Loading initial theme ".concat(t,"/").concat(n),null,2),e.prev=6,o=this.getThemeUrl(t,n)){e.next=11;break}return r.Debug.error("ThemeManager: Could not resolve URL for theme ".concat(t,"/").concat(n),null,2),e.abrupt("return",!1);case 11:if(document.querySelector('link[href="'.concat(o,'"]'))){e.next=14;break}return e.next=14,this.resourceLoader.loadCSS(o);case 14:return document.querySelectorAll('link[href*="highlight.js"][href*="/styles/"][rel="stylesheet"]:not([disabled])').forEach((function(e){e.disabled=!0})),(i=document.querySelector('link[href="'.concat(o,'"]')))&&(i.disabled=!1,r.Debug.log("ThemeManager: Theme applied: ".concat(t," (").concat(n,")"),null,2)),this.updateContainerThemeClass(n),this.currentTheme={family:t,mode:n},localStorage.setItem("diffViewerThemeFamily",t),localStorage.setItem("diffViewerTheme",n),this.notifyListeners(),r.Debug.log("ThemeManager: Initial theme applied successfully: ".concat(t,"/").concat(n),null,2),e.abrupt("return",!0);case 26:return e.prev=26,e.t0=e.catch(6),r.Debug.error("ThemeManager: Error during initial theme loading:",e.t0,2),e.abrupt("return",!1);case 30:case"end":return e.stop()}}),e,this,[[6,26]])}))),function(){return u.apply(this,arguments)})}],a=[{key:"getInstance",value:function(){return y||(y=new t),y}}],o&&f(n.prototype,o),a&&f(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,a,u,h,b,w}(o.BaseSingleton)},"./src/components/ThemeSelector.js":(e,t,n)=>{n.r(t),n.d(t,{ThemeSelector:()=>v});var r=n("./src/utils/Debug.js"),o=n("./src/constants/Selectors.js"),i=n("./src/utils/BaseSingleton.js"),a=n("./src/utils/DOMUtils.js"),l=n("./src/utils/TranslationManager.js"),s=n("./src/components/ThemeManager.js");function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,d(r.key),r)}}function d(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==c(t)?t:t+""}function f(e,t){if(t&&("object"==c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(h=function(){return!!e})()}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}var p=null,v=function(e){function t(e){var n,o,i,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,i=g(i=t),(n=f(o,h()?Reflect.construct(i,a||[],g(o).constructor):i.apply(o,a)))._isFirstInstance(p)?(r.Debug.log("ThemeSelector: Instance created",null,3),n.diffViewer=e,n.container=null,n.selectElement=null,n.themeManager=s.ThemeManager.getInstance(),n.translationManager=l.TranslationManager.getInstance(),n.browserUIManager=null,p=n,n):f(n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(t,e),n=t,c=[{key:"getInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return r.Debug.log("ThemeSelector: Retrieving or creating instance",null,3),p?e&&!p.diffViewer&&(p.diffViewer=e):p=new t(e),p}}],(i=[{key:"initialize",value:function(){return this._isThemeSelectorEnabled()?(r.Debug.log("ThemeSelector: Initializing",null,2),this.createSelectorElement(),this.addSelectorToDOM(),this.updateSelector(),this.themeManager.addListener(this.updateSelector.bind(this)),r.Debug.log("ThemeSelector: Initialized successfully",null,2),!0):(r.Debug.log("ThemeSelector: Theme selector disabled in configuration",null,2),!1)}},{key:"_isThemeSelectorEnabled",value:function(){var e,t,n;return void 0!==(null===(e=this.diffViewer)||void 0===e||null===(e=e.getConfig())||void 0===e||null===(e=e.theme)||void 0===e?void 0:e.selector)?!!this.diffViewer.getConfig().theme.selector:void 0!==(null===(t=this.diffViewer)||void 0===t||null===(t=t.options)||void 0===t?void 0:t.themeSelector)?!!this.diffViewer.options.themeSelector:void 0===(null===(n=window.diffConfig)||void 0===n||null===(n=n.theme)||void 0===n?void 0:n.selector)||!!window.diffConfig.theme.selector}},{key:"createSelectorElement",value:function(){var e=this,t=this.themeManager.getCurrentTheme();this.container=a.DOMUtils.createElement("div",null,[o.default.THEME_SELECTOR.WRAPPER.name(),o.default.UTILITY.MARGIN_END_3.name()]),this.selectElement=a.DOMUtils.createAndAppendElement("select",this.container,{id:o.default.THEME.SELECTOR.name(),classes:[o.default.UTILITY.FORM_SELECT.name(),o.default.UTILITY.FORM_SELECT.name()]});var n=this.themeManager.getAvailableThemeFamilies();n&&0!==n.length?(n.forEach((function(n){a.DOMUtils.createAndAppendElement("option",e.selectElement,{attributes:{value:n,selected:n===t.family},content:e.formatThemeName(n)})})),r.Debug.log("ThemeSelector: Created selector with options",{count:n.length},2),this.selectElement.addEventListener("change",this.handleThemeChange.bind(this))):r.Debug.warn("ThemeSelector: No available themes found",null,2)}},{key:"formatThemeName",value:function(e){return e.split("-").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" ")}},{key:"addSelectorToDOM",value:function(){var e=a.DOMUtils.getElement(o.default.THEME.SWITCHER.name());return e?(e.insertBefore(this.container,e.firstChild),r.Debug.log("ThemeSelector: Selector added to DOM",null,2),!0):(r.Debug.warn("ThemeSelector: No theme switcher container found",null,2),!1)}},{key:"updateSelector",value:function(e){if(this.selectElement){var t=e||this.themeManager.getCurrentTheme();this.selectElement.value=t.family,r.Debug.log("ThemeSelector: Selector updated to ".concat((null==e?void 0:e.family)||t.family),null,3)}}},{key:"handleThemeChange",value:function(e){var t,n=this,o=e.target.value;!this.browserUIManager&&null!==(t=this.diffViewer)&&void 0!==t&&t.browserUIManager&&(this.browserUIManager=this.diffViewer.browserUIManager),this.browserUIManager&&this.browserUIManager.showThemeLoading();try{this.themeManager.setThemeFamily(o).then((function(){n.browserUIManager&&n.browserUIManager.hideThemeLoading(),r.Debug.log("ThemeSelector: Theme changed to ".concat(o),null,2)})).catch((function(e){n.browserUIManager&&n.browserUIManager.hideThemeLoading(),r.Debug.error("ThemeSelector: Error changing theme:",e,2)}))}catch(e){this.browserUIManager&&this.browserUIManager.hideThemeLoading(),r.Debug.error("ThemeSelector: Error changing theme:",e,2)}}}])&&u(n.prototype,i),c&&u(n,c),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,c}(i.BaseSingleton)},"./src/components/ThemeToggle.js":(e,t,n)=>{n.r(t),n.d(t,{ThemeToggle:()=>d});var r=n("./src/utils/Debug.js"),o=n("./src/constants/Selectors.js"),i=n("./src/utils/DOMUtils.js"),a=n("./src/utils/TranslationManager.js"),l=n("./src/components/ThemeManager.js");function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function u(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}var d=function(){return e=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.default.THEME.TOGGLE.name(),s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.default.CONTAINER.WRAPPER.name();!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.toggleElementId=n,this.containerId=s,this.toggleElement=i.DOMUtils.getElement(n),this.container=i.DOMUtils.getElement(s),this.themeManager=l.ThemeManager.getInstance(),this.translationManager=a.TranslationManager.getInstance(),this.browserUIManager=t,r.Debug.log("ThemeToggle: Component created",null,2)},(t=[{key:"initialize",value:function(){if(r.Debug.log("ThemeToggle: Initializing",null,2),!this.toggleElement||!this.container)return r.Debug.warn("ThemeToggle: Elements not found for initialization - toggle: ".concat(!!this.toggleElement,", container: ").concat(!!this.container),null,2),!1;var e=this.themeManager.getCurrentTheme();return this.toggleElement.checked="dark"===e.mode,this.themeManager.updateContainerThemeClass(e.mode),this.toggleElement.addEventListener("change",this.handleToggle.bind(this)),this.themeManager.addListener(this.updateToggle.bind(this)),r.Debug.log("ThemeToggle: BrowserUIManager reference ".concat(this.browserUIManager?"is available":"is not available"),null,2),r.Debug.log("ThemeToggle: Initialized successfully",null,2),!0}},{key:"setBrowserUIManager",value:function(e){return this.browserUIManager=e,r.Debug.log("ThemeToggle: BrowserUIManager reference set",null,2),this}},{key:"handleToggle",value:function(e){var t=this,n=e.target.checked?"dark":"light";this.browserUIManager?this.browserUIManager.showThemeLoading():r.Debug.log("ThemeToggle: BrowserUIManager not available, no loading indicator will be shown",null,2);try{this.themeManager.setThemeMode(n).then((function(){t.browserUIManager&&t.browserUIManager.hideThemeLoading(),r.Debug.log("ThemeToggle: Theme toggled to ".concat(n," mode"),null,2)})).catch((function(e){t.browserUIManager&&t.browserUIManager.hideThemeLoading(),r.Debug.error("ThemeToggle: Error toggling theme:",e,2)}))}catch(e){this.browserUIManager&&this.browserUIManager.hideThemeLoading(),r.Debug.error("ThemeToggle: Error toggling theme:",e,2)}}},{key:"updateToggle",value:function(e){if(this.toggleElement){var t=e||this.themeManager.getCurrentTheme();this.toggleElement.checked="dark"===t.mode,this.container&&this.themeManager.updateContainerThemeClass(t.mode)}}}])&&c(e.prototype,t),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}()},"./src/components/chunks/ChunkRenderer.js":(e,t,n)=>{n.r(t),n.d(t,{ChunkRenderer:()=>h});var r=n("./src/utils/Debug.js"),o=n("./src/utils/StringUtils.js"),i=n("./src/constants/Selectors.js"),a=n("./src/utils/LoaderManager.js"),l=n("./src/utils/TranslationManager.js");function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return u(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,f(r.key),r)}}function f(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}var h=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.chunkManager=t},(t=[{key:"renderChunks",value:function(){r.Debug.log("ChunkRenderer: Beginning chunk rendering",null,2);var e=null;if(this.chunkManager.chunks.length>100){var t=l.TranslationManager.getInstance(),n=a.LoaderManager.getInstance(),o=t.get("renderingDiff","Rendering diff...");e=n.showLoader(o,{fullscreen:!0,zIndex:1e3}),r.Debug.log("ChunkRenderer: Showing loader for large diff rendering",null,2)}var s=performance.now(),c=this.buildDiffPaneHtml(this.chunkManager.oldContent,"left"),u=this.buildDiffPaneHtml(this.chunkManager.newContent,"right");if(this.chunkManager.diffViewer.container.innerHTML='\n            <div class="'.concat(i.default.DIFF.PANES_CONTAINER.name(),'">\n                <div class="').concat(i.default.DIFF.PANE.name(),'" id="').concat(i.default.DIFF.PANE_LEFT.name(),'" data-side="left">\n                    ').concat(c,'\n                </div>\n                <div class="').concat(i.default.DIFF.PANE.name(),'" id="').concat(i.default.DIFF.PANE_RIGHT.name(),'" data-side="right">\n                    ').concat(u,"\n                </div>\n            </div>\n        "),e){a.LoaderManager.getInstance().hideLoader(e);var d=performance.now()-s;r.Debug.log("ChunkRenderer: Rendered ".concat(this.chunkManager.chunks.length," chunks in ").concat(d.toFixed(2),"ms"),null,2)}else r.Debug.log("ChunkRenderer: Rendered ".concat(this.chunkManager.chunks.length," chunks successfully"),null,2)}},{key:"buildDiffPaneHtml",value:function(e,t){var n,r=new Set,o=c(e);try{for(o.s();!(n=o.n()).done;){var a=n.value;"placeholder"===a.type&&a.chunkId&&r.add(a.chunkId)}}catch(e){o.e(e)}finally{o.f()}var l='<div class="'.concat(i.default.DIFF.PANE_CONTENT.name(),' hljs">');l+='<div class="'.concat(i.default.DIFF.TABLE_WRAPPER.name(),'">'),l+='<table class="'.concat(i.default.CODE.TABLE.name(),'"><tbody>');var s,u=0,d=c(e);try{for(d.s();!(s=d.n()).done;){var f=s.value;l+=this._renderDiffLine(f,t,++u,r)}}catch(e){d.e(e)}finally{d.f()}return l+="</tbody></table>",l+="</div>",l+="</div>"}},{key:"_renderDiffLine",value:function(e,t,n,r){var o="<tr>",a=void 0!==e.chunkId?e.chunkId:"",l="";if(""!==a){var s=this.chunkManager.chunks.find((function(e){return e.id===a}));l=s?s.type:""}o+='<td class="'.concat(i.default.CODE.LINE_NUMBER.name(),'">').concat(n,"</td>");var c=""!==a&&r.has(a);return"placeholder"===e.type?o+=this._renderPlaceholderLine(e,a,l,t,n):o+=this._renderContentLine(e,a,l,t,n,c),o+="</tr>"}},{key:"_renderPlaceholderLine",value:function(e,t,n,r,o){var a="";return""!==t&&(a+=" ".concat(i.default.DIFF.CHUNK.name()),(e.conflict||"replace"===n||"add"===n||"delete"===n)&&(a+=" ".concat(i.default.STATUS.UNRESOLVED.name()))),'<td class="'.concat(i.default.CODE.LINE_CONTENT.name()," ").concat(i.default.DIFF.LINE_CONTENT_EMPTY.name()," ").concat(i.default.DIFF.LINE_PLACEHOLDER.name()).concat(a,'"\n                   data-chunk-id="').concat(t,'"\n                   data-chunk-type="').concat(n,'"\n                   data-side="').concat(r,'"\n                   data-placeholder-type="').concat(e.placeholderType||"default",'"\n                   data-line-id="').concat(r,"-").concat(o,'"\n                   data-has-placeholder="true">&nbsp;</td>')}},{key:"_renderContentLine",value:function(e,t,n,r,a,l){var s=e.line,c=!s||"\r"===s||"\n"===s,u="";if(""!==t&&(u=this._getChunkClass(n,r),u+=" ".concat(i.default.DIFF.CHUNK.name()),(e.conflict||"replace"===n||"add"===n||"delete"===n)&&(u+=" ".concat(i.default.STATUS.UNRESOLVED.name()))),c)return u+=" ".concat(i.default.CODE.LINE_EMPTY.name()),'<td class="'.concat(i.default.CODE.LINE_CONTENT.name()).concat(u,'"\n                       data-chunk-id="').concat(t,'"\n                       data-chunk-type="').concat(n,'"\n                       data-side="').concat(r,'"\n                       data-line-id="').concat(r,"-").concat(a,'"\n                       ').concat(l?'data-has-placeholder="true"':"",">&nbsp;</td>");var d=o.StringUtils.escapeHtml?o.StringUtils.escapeHtml(s):s.replace(/</g,"&lt;").replace(/>/g,"&gt;"),f=""!==t?' style="cursor: pointer;"':"";return'<td class="'.concat(i.default.CODE.LINE_CONTENT.name()).concat(u,'"\n                       data-chunk-id="').concat(t,'"\n                       data-chunk-type="').concat(n,'"\n                       data-side="').concat(r,'"\n                       data-line-id="').concat(r,"-").concat(a,'"\n                       ').concat(l?'data-has-placeholder="true"':"").concat(f,">").concat(d,"</td>")}},{key:"_getChunkClass",value:function(e,t){if("delete"===e&&"left"===t)return" ".concat(i.default.DIFF.LINE_DELETE.name());if("add"===e&&"right"===t)return" ".concat(i.default.DIFF.LINE_ADD.name());if("replace"===e){var n=" ".concat(i.default.DIFF.LINE_ADD.name());return n+=" ".concat("left"===t?i.default.DIFF.LINE_REPLACE_LEFT.name():i.default.DIFF.LINE_REPLACE_RIGHT.name())}return""}}])&&d(e.prototype,t),n&&d(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}()},"./src/components/chunks/ChunkSelectionHandler.js":(e,t,n)=>{n.r(t),n.d(t,{ChunkSelectionHandler:()=>p});var r=n("./src/utils/Debug.js"),o=n("./src/utils/DOMUtils.js"),i=n("./src/constants/Selectors.js"),a=n("./src/utils/ChunkUtils.js"),l=n("./src/utils/IconRegistry.js"),s=n("./src/utils/TranslationManager.js"),c=n("./src/utils/LoaderManager.js"),u=n("./src/components/chunks/ChunkVisualStateManager.js");function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e,t,n){return(t=m(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,m(r.key),r)}}function m(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==d(t)?t:t+""}var p=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.chunkManager=t,this.selections={},this.visualStateManager=new u.ChunkVisualStateManager(t),this.SELECTED=i.default.DIFF.CHUNK_SELECTED.name(),this.UNSELECTED=i.default.DIFF.CHUNK_UNSELECTED.name(),this._performanceMetrics={lastOperationTime:0,operationCount:0}},t=[{key:"setupChunkSelection",value:function(){var e=this;this._boundClickHandler=function(t){return e._handleClick(t)},this._boundCheckAllHandler=function(t){return e._handleCheckAll(t)},o.DOMUtils.setupEventHandlers('[data-chunk-id]:not([data-chunk-id=""])',"click",this._boundClickHandler,{removeExisting:!0,styles:{cursor:"pointer"}}),this._setupCheckAllButtons(),a.ChunkUtils.clearCache(),r.Debug.log("ChunkSelectionHandler: Selection handlers initialized for all chunk elements",null,2)}},{key:"_setupCheckAllButtons",value:function(){var e=this.chunkManager.diffViewer.container.querySelectorAll(i.default.DIFF.PANE);if(2===e.length){var t=e[0],n=e[1];this._createCheckAllButtonHeader(t,"left"),this._createCheckAllButtonHeader(n,"right")}else r.Debug.log('ChunkSelectionHandler: Could not find both diff panes for "Check All" buttons',null,2)}},{key:"_createCheckAllButtonHeader",value:function(e,t){var n=s.TranslationManager.getInstance(),r=document.createElement("div");r.className=i.default.DIFF.PANE_HEADER.name(),r.classList.add("vdm-d-flex","vdm-justify-content-between","vdm-align-items-center");var o=this.chunkManager.diffViewer.runtimeProps.diffData.language||"Text",a=document.createElement("span");a.className="vdm-badge vdm-badge--info",a.textContent=o;var c=document.createElement("button");c.className="".concat(i.default.UTILITY.BUTTON.name()," ").concat(i.default.UTILITY.BUTTON_EXTRA_SMALL.name()," ").concat(i.default.UTILITY.BUTTON_SECONDARY.name()," ").concat(i.default.DIFF.CHECK_ALL_BTN.name()),c.setAttribute("data-side",t),c.setAttribute("data-icon-state","unchecked"),c.title="Select all changes from the ".concat(t," pane"),c.style.display="inline-flex",c.style.alignItems="center",c.style.verticalAlign="middle";var u=document.createElement("span");u.className="vdm-icon-wrapper",u.style.marginRight="3px",u.style.display="inline-flex",u.style.alignItems="center",u.style.verticalAlign="middle",u.style.height="14px",u.style.lineHeight="1";var d=l.IconRegistry.createIcon("checkbox-unchecked",{width:14,height:14,classes:"vdm-icon-checkbox"});u.appendChild(d);var f=document.createElement("span");f.style.display="inline-block",f.style.verticalAlign="middle",f.style.lineHeight="1",f.appendChild(document.createTextNode(n.get("checkAll"))),c.appendChild(u),c.appendChild(f),r.appendChild(a),r.appendChild(c),e.insertBefore(r,e.firstChild),c.addEventListener("click",this._boundCheckAllHandler)}},{key:"_handleCheckAll",value:function(e){var t=this,n=e.currentTarget,o=n.getAttribute("data-side"),i=n.getAttribute("data-icon-state"),a=this._getOppositeButton(o),l=s.TranslationManager.getInstance(),u=c.LoaderManager.getInstance();if(o){var d=l.get("processingChunks")||"Processing chunks...",f=u.showLoader(d,{fullscreen:!0,zIndex:9999});this._setButtonProcessingState(n,!0);var h=performance.now();setTimeout((function(){"checked"===i?(r.Debug.log("ChunkSelectionHandler: Unchecking all selections",null,2),t._toggleButtonIconState(n,"checked"),a&&"checked"===a.getAttribute("data-icon-state")&&t._toggleButtonIconState(a,"checked"),t.clearAllSelections(!0)):a&&"checked"===a.getAttribute("data-icon-state")?(t._toggleButtonIconState(a,"checked"),t._toggleButtonIconState(n,"unchecked"),t.selectAllOnSide(o,!0)):(t._toggleButtonIconState(n,"unchecked"),t.selectAllOnSide(o,!0)),t._setButtonProcessingState(n,!1),u.hideLoader(f),t._recordPerformanceMetrics(h)}),50)}}},{key:"_setButtonProcessingState",value:function(e,t){t?(e.classList.add("processing"),e.style.opacity="0.8",e.style.cursor="wait"):(e.classList.remove("processing"),e.style.opacity="",e.style.cursor="")}},{key:"_recordPerformanceMetrics",value:function(e){var t=performance.now()-e;this._performanceMetrics.lastOperationTime=t,this._performanceMetrics.operationCount++;var n=a.ChunkUtils.getCacheStats(),o=n.elementCacheHits/(n.elementCacheHits+n.elementCacheMisses)*100||0,i=n.iconMarkerCacheHits/(n.iconMarkerCacheHits+n.iconMarkerCacheMisses)*100||0;r.Debug.log("ChunkSelectionHandler: Operation completed in ".concat(t.toFixed(2),"ms"),{totalOperations:this._performanceMetrics.operationCount,cacheStats:{elementCacheHits:n.elementCacheHits,elementCacheMisses:n.elementCacheMisses,elementHitRatio:"".concat(o.toFixed(1),"%"),iconMarkerCacheHits:n.iconMarkerCacheHits,iconMarkerCacheMisses:n.iconMarkerCacheMisses,iconHitRatio:"".concat(i.toFixed(1),"%")}},2)}},{key:"_getOppositeButton",value:function(e){var t="left"===e?"right":"left";return this.chunkManager.diffViewer.container.querySelector(".".concat(i.default.DIFF.CHECK_ALL_BTN.name(),'[data-side="').concat(t,'"]'))}},{key:"_toggleButtonIconState",value:function(e,t){var n,r=e.querySelector(".vdm-icon-wrapper");r&&(r.innerHTML="","unchecked"===t?(n="checked",r.appendChild(l.IconRegistry.createIcon("checkbox-checked",{width:14,height:14,classes:"vdm-icon-checkbox"}))):(n="unchecked",r.appendChild(l.IconRegistry.createIcon("checkbox-unchecked",{width:14,height:14,classes:"vdm-icon-checkbox"}))),e.setAttribute("data-icon-state",n))}},{key:"selectAllOnSide",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o="left"===e?"right":"left";r.Debug.log("ChunkSelectionHandler: Selecting all chunks on ".concat(e," side").concat(n?" (batched)":""),null,2);var l=this.chunkManager.chunks.filter((function(e){return e.conflict||"replace"===e.type||"add"===e.type||"delete"===e.type})),u=l.length>20,d=null;if((n=n||u)&&l.length>50){var f=s.TranslationManager.getInstance(),h=c.LoaderManager.getInstance(),g=f.get("processingChunks")||"Processing chunks...";d=h.showLoader(g,{fullscreen:!0,zIndex:9999})}var m=performance.now();if(n){l.forEach((function(n){t.selections[n.id]=e,t._syncWithDiffConfig(n.id,e)}));var p=new Map;l.forEach((function(n){if(t.visualStateManager.updateVisualState(n.id,e,t.SELECTED,!0),t.visualStateManager.updateVisualState(n.id,o,t.UNSELECTED,!0),!p.has(n.id)){var r=a.ChunkUtils.getChunkElements(n.id);p.set(n.id,r)}})),this.visualStateManager.applyBatch(!1),requestAnimationFrame((function(){t._refreshIconStates(e,l),p.forEach((function(e){e.forEach((function(e){e.classList.add(i.default.STATUS.RESOLVED.name()),e.classList.remove(i.default.STATUS.UNRESOLVED.name())}))})),t._updateNavigationCounter(),"function"==typeof t.chunkManager.onSelectionChange&&t.chunkManager.onSelectionChange(),d&&c.LoaderManager.getInstance().hideLoader(d),t._recordPerformanceMetrics(m)}))}else l.forEach((function(n){t.toggleChunkSelection(n.id,e,t.SELECTED),t.toggleChunkSelection(n.id,o,t.UNSELECTED)})),"function"==typeof this.chunkManager.onSelectionChange&&this.chunkManager.onSelectionChange(),this._recordPerformanceMetrics(m)}},{key:"_refreshIconStates",value:function(e,t){var n="left"===e?"right":"left";t.forEach((function(t){var o=a.ChunkUtils.getChunkElements(t.id,e),l=a.ChunkUtils.getChunkElements(t.id,n);if(o.length>0){var s=a.ChunkUtils.sortElementsByLineNumber(o)[0];if(s){var c=s.dataset.lineId;if(c){var u=a.ChunkUtils.getIconMarker(c);u&&(u.classList.remove(i.default.DIFF.CHUNK_SELECTED.name(),i.default.DIFF.CHUNK_UNSELECTED.name(),i.default.ICONS.SELECT.name(),i.default.ICONS.SELECT_LEFT.name(),i.default.ICONS.SELECT_RIGHT.name()),u.classList.add(i.default.DIFF.CHUNK_SELECTED.name()),"left"===e?u.classList.add(i.default.ICONS.SELECT_LEFT.name()):u.classList.add(i.default.ICONS.SELECT_RIGHT.name()))}}o.forEach((function(e){e.classList.remove(i.default.DIFF.CHUNK_SELECTED.name(),i.default.DIFF.CHUNK_UNSELECTED.name()),e.classList.add(i.default.DIFF.CHUNK_SELECTED.name());var t=a.ChunkUtils.getParentRow(e);t&&(t.classList.remove(i.default.DIFF.CHUNK_SELECTED.name(),i.default.DIFF.CHUNK_UNSELECTED.name()),t.classList.add(i.default.DIFF.CHUNK_SELECTED.name()))}))}if(l.length>0){var d=a.ChunkUtils.sortElementsByLineNumber(l)[0];if(d){var f=d.dataset.lineId;if(f){var h=a.ChunkUtils.getIconMarker(f);if(h){h.classList.remove(i.default.DIFF.CHUNK_SELECTED.name(),i.default.DIFF.CHUNK_UNSELECTED.name(),i.default.ICONS.SELECT.name(),i.default.ICONS.SELECT_LEFT.name(),i.default.ICONS.SELECT_RIGHT.name());var g="true"===d.dataset.hasPlaceholder,m=d.classList.contains(i.default.DIFF.LINE_PLACEHOLDER.name()),p=h.classList.contains(i.default.ICONS.MARKER_PLACEHOLDER.name()),v=f.split("-")[1],y="".concat(e,"-").concat(v),b=document.querySelector('[data-line-id="'.concat(y,'"]')),w="true"===(null==b?void 0:b.dataset.hasPlaceholder),E=null==b?void 0:b.classList.contains(i.default.DIFF.LINE_PLACEHOLDER.name());g||m||p||w||E?(h.classList.add(i.default.ICONS.MARKER_PLACEHOLDER.name()),r.Debug.log("ChunkSelectionHandler: Set opposite marker ".concat(f," as placeholder during batch refresh"),null,3)):h.classList.add(i.default.DIFF.CHUNK_UNSELECTED.name())}}}l.forEach((function(e){e.classList.remove(i.default.DIFF.CHUNK_SELECTED.name(),i.default.DIFF.CHUNK_UNSELECTED.name()),e.classList.add(i.default.DIFF.CHUNK_UNSELECTED.name());var t=a.ChunkUtils.getParentRow(e);t&&(t.classList.remove(i.default.DIFF.CHUNK_SELECTED.name(),i.default.DIFF.CHUNK_UNSELECTED.name()),t.classList.add(i.default.DIFF.CHUNK_UNSELECTED.name()))}))}}))}},{key:"_handleClick",value:function(e){var t=e.currentTarget,n=t.getAttribute("data-chunk-id"),o=t.getAttribute("data-side");if(r.Debug.log("ChunkSelectionHandler: Click detected on side ".concat(o," for chunk ").concat(n),{element:t.outerHTML.substring(0,100)+"..."},3),n&&o)if(this.selections[n]===o&&t.classList.contains(i.default.DIFF.CHUNK_SELECTED.name())){var l;r.Debug.log("ChunkSelectionHandler: Unselecting chunk ".concat(n," as it was already selected"),null,3),delete this.selections[n],null!==(l=this.chunkManager.diffViewer)&&void 0!==l&&null!==(l=l.diffConfig)&&void 0!==l&&l.chunkSelections&&delete this.chunkManager.diffViewer.diffConfig.chunkSelections[n],this.visualStateManager.resetVisualState(n),a.ChunkUtils.getChunkElements(n).forEach((function(e){e.classList.remove(i.default.STATUS.RESOLVED.name()),e.classList.add(i.default.STATUS.UNRESOLVED.name())})),this._updateNavigationCounter(),"function"==typeof this.chunkManager.onSelectionChange&&this.chunkManager.onSelectionChange()}else{var s="left"===o?"right":"left";r.Debug.log("ChunkSelectionHandler: Toggling chunk ".concat(n),{selectedSide:o,oppositeSide:s},3),this.toggleChunkSelection(n,o,this.SELECTED),this.toggleChunkSelection(n,s,this.UNSELECTED)}}},{key:"toggleChunkSelection",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];n===this.SELECTED&&(this.selections[e]=t,this._syncWithDiffConfig(e,t),this._updateNavigationCounter(),r||a.ChunkUtils.getChunkElements(e).forEach((function(e){e.classList.add(i.default.STATUS.RESOLVED.name()),e.classList.remove(i.default.STATUS.UNRESOLVED.name())}))),this.visualStateManager.updateVisualState(e,t,n,r)}},{key:"_syncWithDiffConfig",value:function(e,t){var n;null!==(n=this.chunkManager.diffViewer)&&void 0!==n&&null!==(n=n.diffConfig)&&void 0!==n&&n.chunkSelections&&(this.chunkManager.diffViewer.diffConfig.chunkSelections[e]=t)}},{key:"_updateNavigationCounter",value:function(){var e;null!==(e=this.chunkManager.diffViewer)&&void 0!==e&&e.diffNavigator&&this.chunkManager.diffViewer.diffNavigator.updateCounter()}},{key:"getSelections",value:function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.selections)}},{key:"isChunkResolved",value:function(e){return!!this.selections[e]}},{key:"getUnresolvedCount",value:function(){return this.chunkManager.chunks.filter((function(e){return e.conflict})).length-Object.keys(this.selections).length}},{key:"clearAllSelections",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.chunkManager.chunks.filter((function(e){return e.conflict||"replace"===e.type||"add"===e.type||"delete"===e.type})),o=n.length>20,l=null;if((t=t||o)&&n.filter((function(t){return e.isChunkResolved(t.id)})).length>50){var u=s.TranslationManager.getInstance(),d=c.LoaderManager.getInstance(),f=u.get("processingChunks")||"Processing chunks...";l=d.showLoader(f,{fullscreen:!0,zIndex:9999})}var h=performance.now();if(t){r.Debug.log("ChunkSelectionHandler: Clearing all selections using batch operations",null,2);var g=n.filter((function(t){return e.isChunkResolved(t.id)})),m=new Set(g.map((function(e){return e.id}))),p=new Map;m.forEach((function(t){var n;delete e.selections[t],null!==(n=e.chunkManager.diffViewer)&&void 0!==n&&null!==(n=n.diffConfig)&&void 0!==n&&n.chunkSelections&&delete e.chunkManager.diffViewer.diffConfig.chunkSelections[t],e.visualStateManager.resetVisualState(t,!0);var r=a.ChunkUtils.getChunkElements(t);p.set(t,r)})),this.visualStateManager.applyBatch(!1),requestAnimationFrame((function(){p.forEach((function(e,t){e.forEach((function(e){e.classList.remove(i.default.STATUS.RESOLVED.name()),e.classList.add(i.default.STATUS.UNRESOLVED.name())}))})),e._updateNavigationCounter(),"function"==typeof e.chunkManager.onSelectionChange&&e.chunkManager.onSelectionChange(),l&&c.LoaderManager.getInstance().hideLoader(l),e._recordPerformanceMetrics(h)}))}else n.forEach((function(t){var n;e.isChunkResolved(t.id)&&(a.ChunkUtils.getChunkElements(t.id).forEach((function(e){e.classList.remove(i.default.STATUS.RESOLVED.name()),e.classList.add(i.default.STATUS.UNRESOLVED.name())})),delete e.selections[t.id],null!==(n=e.chunkManager.diffViewer)&&void 0!==n&&null!==(n=n.diffConfig)&&void 0!==n&&n.chunkSelections&&delete e.chunkManager.diffViewer.diffConfig.chunkSelections[t.id],e.visualStateManager.resetVisualState(t.id))})),this._updateNavigationCounter(),"function"==typeof this.chunkManager.onSelectionChange&&this.chunkManager.onSelectionChange(),this._recordPerformanceMetrics(h)}}],t&&g(e.prototype,t),n&&g(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}()},"./src/components/chunks/ChunkVisualStateManager.js":(e,t,n)=>{n.r(t),n.d(t,{ChunkVisualStateManager:()=>m});var r=n("./src/utils/ChunkUtils.js"),o=n("./src/constants/Selectors.js"),i=n("./src/utils/Debug.js");function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e,t,n){return(t=g(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||d(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||d(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(e){if("string"==typeof e)return f(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,g(r.key),r)}}function g(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}var m=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.chunkManager=t,this._pendingOperations=[],this._isBatching=!1,this._metrics={lastBatchSize:0,lastBatchTime:0},i.Debug.log("ChunkVisualStateManager: Initialized",null,3)},t=[{key:"initialize",value:function(){r.ChunkUtils.preloadChunks(),i.Debug.log("ChunkVisualStateManager: Initialized with preloaded chunks",null,2)}},{key:"updateVisualState",value:function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];i.Debug.log("ChunkVisualStateManager: Updating visual state for chunk ".concat(e,", side ").concat(t,", state ").concat(n),null,3);var a=r.ChunkUtils.getChunkElements(e,t);i.Debug.log("ChunkVisualStateManager: Found ".concat(a.length," elements for chunk ").concat(e),null,3);var l=r.ChunkUtils.sortElementsByLineNumber(a),s="left"===t?"right":"left";if(o)this._pendingOperations.push({type:"updateState",chunkId:e,side:t,elements:a,firstElement:l.length>0?l[0]:null,state:n,oppositeSide:s});else{if(this._applyStateToElements(a,n),l.length>0){i.Debug.log("ChunkVisualStateManager: Updating icon marker for first element of chunk ".concat(e),null,3);var c=l[0];c&&"selected"===n?(this._updateIconMarker(c,n),this._updateOppositeMarker(c,s)):this._updateIconMarker(c,n)}else i.Debug.warn("ChunkVisualStateManager: No elements found to update icon for chunk ".concat(e),null,3);this._notifySelectionChange()}}},{key:"_updateOppositeMarker",value:function(e,t){var n;if(null!=e&&null!==(n=e.dataset)&&void 0!==n&&n.lineId){var a=e.dataset.lineId.split("-");if(2===a.length){var l=a[1],s="".concat(t,"-").concat(l),c=r.ChunkUtils.getIconMarker(s);c?(i.Debug.log("ChunkVisualStateManager: Updating opposite marker ".concat(s),{currentClasses:Array.from(c.classList)},3),c.classList.remove(o.default.DIFF.CHUNK_SELECTED.name(),o.default.DIFF.CHUNK_UNSELECTED.name(),o.default.ICONS.SELECT.name(),o.default.ICONS.SELECT_LEFT.name(),o.default.ICONS.SELECT_RIGHT.name()),c.classList.contains(o.default.ICONS.MARKER_PLACEHOLDER.name())?(c.classList.add(o.default.ICONS.MARKER_PLACEHOLDER.name()),i.Debug.log("ChunkVisualStateManager: Preserved placeholder status for ".concat(s),null,3)):(c.classList.add(o.default.DIFF.CHUNK_UNSELECTED.name()),i.Debug.log("ChunkVisualStateManager: Set opposite marker ".concat(s," as unselected"),null,3))):i.Debug.warn("ChunkVisualStateManager: Could not find opposite marker for ".concat(s),null,3)}}}},{key:"resetVisualState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];i.Debug.log("ChunkVisualStateManager: Resetting visual state for chunk ".concat(e),null,3);var n=r.ChunkUtils.getChunkElements(e);i.Debug.log("ChunkVisualStateManager: Found ".concat(n.length," elements for chunk ").concat(e),null,3);var o=r.ChunkUtils.getChunkIconMarkers(e);t?this._pendingOperations.push({type:"resetState",chunkId:e,elements:n,iconMarkers:o}):(this._applyResetToElements(n,o),i.Debug.log("ChunkVisualStateManager: Reset ".concat(o.length," icon markers for chunk ").concat(e),null,3),this._notifySelectionChange())}},{key:"applyBatch",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(0!==this._pendingOperations.length){this._isBatching=!0;var n=this._pendingOperations.length;this._metrics.lastBatchSize=n,requestAnimationFrame((function(){var r=performance.now();i.Debug.log("ChunkVisualStateManager: Applying batch of ".concat(n," operations"),null,2);try{var o=[],a=[];e._pendingOperations.forEach((function(e){"updateState"===e.type?o.push(e):"resetState"===e.type&&a.push(e)})),a.length>0&&e._processBatchedResets(a),o.length>0&&e._processBatchedUpdates(o);var l=performance.now()-r;e._metrics.lastBatchTime=l,i.Debug.log("ChunkVisualStateManager: Batch processing completed in ".concat(l.toFixed(2),"ms"),{operations:n,resetOps:a.length,updateOps:o.length,msPerOperation:(l/n).toFixed(2)},2)}catch(e){i.Debug.error("Error during batch processing: ".concat(e.message),e,1)}finally{e._pendingOperations=[],e._isBatching=!1,t&&e._notifySelectionChange()}}))}}},{key:"_processBatchedResets",value:function(e){if(0!==e.length){var t=[],n=[];e.forEach((function(e){e.elements&&t.push.apply(t,u(e.elements)),e.iconMarkers&&n.push.apply(n,u(e.iconMarkers))})),this._applyResetToElements(t,n)}}},{key:"_processBatchedUpdates",value:function(e){var t=this;if(0!==e.length){var n={selected:[],unselected:[]},r={selected:{},unselected:{}};e.forEach((function(e){var t,o=e.elements,i=e.firstElement,a=e.state,l=e.chunkId,s=e.side,c=e.oppositeSide;o&&o.length>0&&("selected"!==a&&"unselected"!==a||(t=n[a]).push.apply(t,u(o))),i&&l&&("selected"!==a&&"unselected"!==a||(r[a][l]={element:i,side:s,oppositeSide:c}))})),Object.entries(n).forEach((function(e){var n=c(e,2),r=n[0],o=n[1];o.length>0&&t._applyStateToElements(o,r)})),Object.entries(r).forEach((function(e){var n=c(e,2),r=n[0],o=n[1];Object.entries(o).forEach((function(e){var n=c(e,2),o=(n[0],n[1]);t._updateIconMarker(o.element,r),"selected"===r&&o.oppositeSide&&t._updateOppositeMarker(o.element,o.oppositeSide)}))})),document.body&&document.body.getBoundingClientRect()}}},{key:"_applyStateToElements",value:function(e,t){if(e&&0!==e.length){var n=[o.default.DIFF.CHUNK_SELECTED.name(),o.default.DIFF.CHUNK_UNSELECTED.name()],i="";i="selected"===t?o.default.DIFF.CHUNK_SELECTED.name():"unselected"===t?o.default.DIFF.CHUNK_UNSELECTED.name():t;var a=new Set;e.forEach((function(e){var t;(t=e.classList).remove.apply(t,n),e.classList.add(i),e.classList.contains(o.default.DIFF.LINE_PLACEHOLDER.name())&&e.classList.add(o.default.DIFF.PLACEHOLDER.name());var l=r.ChunkUtils.getParentRow(e);l&&a.add(l)})),a.forEach((function(e){var t;(t=e.classList).remove.apply(t,n),e.classList.add(i)}))}}},{key:"_applyResetToElements",value:function(e,t){if(e&&0!==e.length||t&&0!==t.length){var n=[o.default.DIFF.CHUNK_SELECTED.name(),o.default.DIFF.CHUNK_UNSELECTED.name()],i=[o.default.DIFF.CHUNK_SELECTED.name(),o.default.DIFF.CHUNK_UNSELECTED.name(),o.default.ICONS.SELECT.name(),o.default.ICONS.SELECT_LEFT.name(),o.default.ICONS.SELECT_RIGHT.name()],a=new Set;e&&e.length>0&&(e.forEach((function(e){var t;if(e){(t=e.classList).remove.apply(t,n);var o=r.ChunkUtils.getParentRow(e);o&&a.add(o)}})),a.forEach((function(e){var t;(t=e.classList).remove.apply(t,n)}))),t&&t.length>0&&t.forEach((function(e){if(e){var t,n=e.classList.contains(o.default.ICONS.MARKER_PLACEHOLDER.name());(t=e.classList).remove.apply(t,i),n&&e.classList.add(o.default.ICONS.MARKER_PLACEHOLDER.name())}}))}}},{key:"_updateIconMarker",value:function(e,t){if(e){var n=e.dataset.lineId;if(n){i.Debug.log("ChunkVisualStateManager: Looking for icon marker with lineId ".concat(n),null,3);var a=r.ChunkUtils.getIconMarker(n);if(a){i.Debug.log("ChunkVisualStateManager: Updating icon marker state to ".concat(t),{lineId:n,currentClasses:Array.from(a.classList)},3);var l=a.classList.contains(o.default.ICONS.MARKER_PLACEHOLDER.name());a.classList.remove(o.default.DIFF.CHUNK_SELECTED.name(),o.default.DIFF.CHUNK_UNSELECTED.name(),o.default.ICONS.SELECT.name(),o.default.ICONS.SELECT_LEFT.name(),o.default.ICONS.SELECT_RIGHT.name()),"selected"===t?(a.classList.add(o.default.DIFF.CHUNK_SELECTED.name()),"left"===e.dataset.side?a.classList.add(o.default.ICONS.SELECT_LEFT.name()):a.classList.add(o.default.ICONS.SELECT_RIGHT.name())):"unselected"===t?a.classList.add(o.default.DIFF.CHUNK_UNSELECTED.name()):a.classList.add(t),l&&!a.classList.contains(o.default.ICONS.MARKER_PLACEHOLDER.name())&&(a.classList.add(o.default.ICONS.MARKER_PLACEHOLDER.name()),i.Debug.log("ChunkVisualStateManager: Preserved placeholder marker status",null,3))}else i.Debug.warn("ChunkVisualStateManager: No icon marker found for line ".concat(n),null,3)}}}},{key:"_notifySelectionChange",value:function(){i.Debug.log("ChunkVisualStateManager: Notifying about selection change",null,3),"function"==typeof this.chunkManager.onSelectionChange?this.chunkManager.onSelectionChange():i.Debug.log("ChunkVisualStateManager: No onSelectionChange handler defined",null,3)}},{key:"getMetrics",value:function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this._metrics)}}],t&&h(e.prototype,t),n&&h(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}()},"./src/components/chunks/MergeContentGenerator.js":(e,t,n)=>{n.r(t),n.d(t,{MergeContentGenerator:()=>s});var r=n("./src/utils/ChunkUtils.js"),o=n("./src/utils/Debug.js");function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l(r.key),r)}}function l(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}var s=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.chunkManager=t},(t=[{key:"generateMergedContent",value:function(e){if(0===Object.keys(e).length)return r.ChunkUtils.generateFileContent(this.chunkManager.newContent);var t=[],n={};this.chunkManager.newContent.forEach((function(e){e.chunkId&&(n[e.chunkId]||(n[e.chunkId]=[]),n[e.chunkId].push(e))}));var i={};this.chunkManager.oldContent.forEach((function(e){e.chunkId&&(i[e.chunkId]||(i[e.chunkId]=[]),i[e.chunkId].push(e))})),o.Debug.log("leftChunkLines",i,3),o.Debug.log("rightChunkLines",n,3),o.Debug.log("selections",e,3);for(var a=new Set,l=0;l<this.chunkManager.newContent.length;l++){var s=this.chunkManager.newContent[l];if(s.chunkId||"content"!==s.type){if("content"===s.type&&s.chunkId&&!a.has(s.chunkId))if(a.add(s.chunkId),"left"===e[s.chunkId]){var c=(i[s.chunkId]||[]).filter((function(e){return"content"===e.type}));c.length>0&&c.forEach((function(e){return t.push(e.line)}))}else{var u=(n[s.chunkId]||[]).filter((function(e){return"content"===e.type}));u.length>0&&u.forEach((function(e){return t.push(e.line)}))}}else t.push(s.line)}return t.join("\n")}},{key:"generateFileFromLines",value:function(e){return r.ChunkUtils.generateFileContent(e)}}])&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}()},"./src/components/merge/MergeOperationHandler.js":(e,t,n)=>{n.r(t),n.d(t,{MergeOperationHandler:()=>h});var r=n("./src/utils/Debug.js"),o=n("./src/utils/TranslationManager.js"),i=n("./src/utils/LoaderManager.js"),a=n("./src/utils/AlertManager.js");function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function s(){s=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var i=t&&t.prototype instanceof b?t:b,a=Object.create(i.prototype),l=new j(r||[]);return o(a,"_invoke",{value:S(e,n,l)}),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=f;var g="suspendedStart",m="suspendedYield",p="executing",v="completed",y={};function b(){}function w(){}function E(){}var T={};d(T,a,(function(){return this}));var I=Object.getPrototypeOf,C=I&&I(I(_([])));C&&C!==n&&r.call(C,a)&&(T=C);var M=E.prototype=b.prototype=Object.create(T);function L(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function D(e,t){function n(o,i,a,s){var c=h(e[o],e,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==l(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(d).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function S(t,n,r){var o=g;return function(i,a){if(o===p)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var l=r.delegate;if(l){var s=O(l,r);if(s){if(s===y)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===g)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=p;var c=h(t,n,r);if("normal"===c.type){if(o=r.done?v:m,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(o=v,r.method="throw",r.arg=c.arg)}}}function O(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,O(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=h(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function _(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(l(t)+" is not iterable")}return w.prototype=E,o(M,"constructor",{value:E,configurable:!0}),o(E,"constructor",{value:w,configurable:!0}),w.displayName=d(E,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,d(e,u,"GeneratorFunction")),e.prototype=Object.create(M),e},t.awrap=function(e){return{__await:e}},L(D.prototype),d(D.prototype,c,(function(){return this})),t.AsyncIterator=D,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new D(f(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},L(M),d(M,u,"Generator"),d(M,a,(function(){return this})),d(M,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=_,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return l.type="throw",l.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],l=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;N(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:_(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function c(e,t,n,r,o,i,a){try{var l=e[i](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){c(i,r,o,a,l,"next",e)}function l(e){c(i,r,o,a,l,"throw",e)}a(void 0)}))}}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,f(r.key),r)}}function f(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l(t)?t:t+""}var h=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mergeHandler=t,this.diffViewer=t.diffViewer},t=[{key:"proceedWithMerge",value:(c=u(s().mark((function e(t){var n,l,c,u,d,f,h,g,m,p,v,y,b,w,E,T,I,C,M;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.Debug.log("MergeOperationHandler: Proceeding with merge",{mergeType:t},2),n=this.diffViewer.getRuntimeProps(),l=n.fileRefId||"",c=n.oldFileRefId||"","new"!==t&&"new-suffix"!==t||l?"old"!==t&&"old-suffix"!==t||c?"both"!==t&&"both-suffix"!==t||l&&c||(r.Debug.log("MergeOperationHandler: Switching to clipboard mode (missing file reference IDs)",null,2),t="clipboard"):(r.Debug.log("MergeOperationHandler: Switching to clipboard mode (no oldFileRefId available)",null,2),t="clipboard"):(r.Debug.log("MergeOperationHandler: Switching to clipboard mode (no fileRefId available)",null,2),t="clipboard"),u=o.TranslationManager.getInstance(),d=u.get("loadingContent","Processing merge..."),f=i.LoaderManager.getInstance(),h=f.showLoader(d,{fullscreen:!0,zIndex:1e3}),e.prev=9,g=this.diffViewer.chunkManager.generateMergedContent(),"clipboard"!==t){e.next=15;break}m={success:!0,message:u.get("mergeSuccessClipboard","Merge completed successfully. The merged content is ready.")},e.next=18;break;case 15:return e.next=17,this.applyMerge(g,t);case 17:m=e.sent;case 18:return f.hideLoader(h),m.success?(p=document.getElementById("vdm-merge__result"))&&(p.innerHTML="",p.classList.remove("vdm-d-none"),v=a.default.getInstance(),y=v.showSuccess(m.message,{timeout:0,translate:!1}),p.appendChild(y),this.scrollToMergeResult()):(b=document.getElementById("vdm-merge__result"))&&(b.innerHTML="",b.classList.remove("vdm-d-none"),w=a.default.getInstance(),E=w.showError(m.message||"An error occurred during the merge operation.",{timeout:0,translate:!1}),b.appendChild(E),this.scrollToMergeResult()),e.abrupt("return",m);case 23:return e.prev=23,e.t0=e.catch(9),f.hideLoader(h),r.Debug.error("MergeOperationHandler: Error in merge operation",e.t0,1),(T=document.getElementById("vdm-merge__result"))&&(T.innerHTML="",T.classList.remove("vdm-d-none"),I=a.default.getInstance(),C="Error: ".concat(e.t0.message||"An unexpected error occurred during merge."),M=I.showError(C,{timeout:0,translate:!1}),T.appendChild(M)),e.abrupt("return",{success:!1,message:e.t0.message||"An unexpected error occurred during merge"});case 30:case"end":return e.stop()}}),e,this,[[9,23]])}))),function(e){return c.apply(this,arguments)})},{key:"applyMerge",value:(l=u(s().mark((function e(t,n){var i,a,l,c,u,d,f,h,g;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.diffViewer.getRuntimeProps(),a=i.fileRefId||"",l=i.oldFileRefId||"",r.Debug.log("MergeOperationHandler: File references for merge operation",{fileRefId:a,oldFileRefId:l,mergeType:n},2),("new"!==n&&"new-suffix"!==n||a)&&("old"!==n&&"old-suffix"!==n||l)&&("both"!==n&&"both-suffix"!==n||a&&l)){e.next=7;break}return r.Debug.log("MergeOperationHandler: Switching to clipboard mode in applyMerge (missing file references)",null,2),e.abrupt("return",{success:!0,message:o.TranslationManager.getInstance().get("mergeSuccessClipboard","Merge completed successfully. The merged content is ready.")});case 7:if("new"!==n&&"new-suffix"!==n||a){e.next=12;break}return r.Debug.error("MergeOperationHandler: No file reference ID available for new file",null,1),e.abrupt("return",{success:!1,message:"No file reference ID available to save changes to new file"});case 12:if("old"!==n&&"old-suffix"!==n||l){e.next=17;break}return r.Debug.error("MergeOperationHandler: No file reference ID available for old file",null,1),e.abrupt("return",{success:!1,message:"No file reference ID available to save changes to old file"});case 17:if("both"!==n&&"both-suffix"!==n||a&&l){e.next=20;break}return r.Debug.error("MergeOperationHandler: Missing file reference IDs for both files",null,1),e.abrupt("return",{success:!1,message:"Missing file reference IDs to save changes to both files"});case 20:return c=JSON.stringify(this.diffViewer.chunkManager.selections),u=this.diffViewer.isContentBeautified()?1:0,e.prev=22,d={action:"registerMergedContent",content:t,selections:c,mergeType:n,wasBeautified:u},"new"!==n&&"new-suffix"!==n&&"both"!==n&&"both-suffix"!==n||(d.fileRefId=a),"old"!==n&&"old-suffix"!==n&&"both"!==n&&"both-suffix"!==n||(d.oldFileRefId=l),r.Debug.log("MergeOperationHandler: Form parameters for save request",d,2),e.next=29,this.diffViewer.getEndpoint("ajaxDiffMerge");case 29:return f=e.sent,r.Debug.log("MergeOperationHandler: Using endpoint",{endpoint:f},2),e.next=33,fetch(f,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(d)});case 33:return h=e.sent,e.next=36,h.json();case 36:return g=e.sent,r.Debug.log("MergeOperationHandler: API response",g,2),e.abrupt("return",g);case 41:return e.prev=41,e.t0=e.catch(22),r.Debug.error("MergeOperationHandler: Error applying merge:",e.t0,1),e.abrupt("return",{success:!1,message:"Error applying merge: ".concat(e.t0.message)});case 45:case"end":return e.stop()}}),e,this,[[22,41]])}))),function(e,t){return l.apply(this,arguments)})},{key:"scrollToMergeResult",value:function(){var e=document.getElementById("vdm-merge__result");e&&(e.scrollIntoView({behavior:"smooth",block:"center"}),r.Debug.log("MergeOperationHandler: Scrolled to merge result",null,2))}}],t&&d(e.prototype,t),n&&d(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,l,c}()},"./src/components/merge/MergePreviewManager.js":(e,t,n)=>{n.r(t),n.d(t,{MergePreviewManager:()=>g});var r=n("./src/utils/Debug.js"),o=n("./src/utils/MergeContentFormatter.js"),i=n("./src/utils/DOMUtils.js"),a=n("./src/utils/StringUtils.js"),l=n("./src/components/syntax/CopyButton.js"),s=n("./src/constants/Selectors.js"),c=n("./src/utils/TranslationManager.js"),u=n("./src/utils/LoaderManager.js");function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}function h(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==d(t)?t:t+""}var g=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mergeHandler=t,this.diffViewer=t.diffViewer,this.modalManager=t.modalManager},(t=[{key:"initialize",value:function(){this.setupPreviewButton(),r.Debug.log("MergePreviewManager: Initialized",null,2)}},{key:"setupPreviewButton",value:function(){var e=document.getElementById(s.default.MERGE.BUTTON_PREVIEW.name()),t=e?null:document.getElementById(s.default.MERGE.GET_MERGED_RESULT_BTN.name()),n=e||t;if(n){var o=n.cloneNode(!0);n.parentNode&&n.parentNode.replaceChild(o,n),n!==e||o.innerHTML&&""!==o.innerHTML.trim()||(o.innerHTML=i.DOMUtils.getIconHtml("eye",{classes:"me-2"})+"Preview"),o.addEventListener("click",this.handlePreviewClick.bind(this)),r.Debug.log("MergePreviewManager: ".concat(n===e?"Preview":"Get merged result"," button handler set up"),null,3)}else r.Debug.warn("MergePreviewManager: Preview button not found",null,2)}},{key:"handlePreviewClick",value:function(){r.Debug.log("MergePreviewManager: Preview button clicked",null,2);var e=c.TranslationManager.getInstance().get("loadingContent","Generating preview..."),t=u.LoaderManager.getInstance(),n=t.showLoader(e,{fullscreen:!0,zIndex:1e3});try{var a,d=this.mergeHandler.getMergedContent(),f=((null===(a=this.diffViewer.runtimeProps)||void 0===a?void 0:a.filepath)||"").split(".").pop().toLowerCase(),h=o.MergeContentFormatter.formatPreview(d,f,!0);t.hideLoader(n),i.DOMUtils.setContent(s.default.MODAL.PREVIEW_FILENAME.name(),this.diffViewer.runtimeProps.filepath||"merged-file"),this.modalManager.setContent(s.default.MODAL.PREVIEW.name(),h,s.default.MODAL.PREVIEW_CONTENT_ID.name());var g=document.createElement("div");g.classList.add(s.default.UTILITY.FLEX.name(),s.default.UTILITY.JUSTIFY_CONTENT_BETWEEN.name(),s.default.UTILITY.MARGIN_TOP_2.name(),s.default.UTILITY.PADDING_2.name());var m=document.createElement("div");m.id="merge-preview-message",m.classList.add(s.default.UTILITY.FLEX.name(),s.default.UTILITY.ALIGN_ITEMS_CENTER.name()),g.appendChild(m),this.modalManager.open(s.default.MODAL.PREVIEW.name()),this.applySyntaxHighlighting(),l.CopyButton.addCopyButtonsToPreview(s.default.MODAL.PREVIEW_CONTENT_ID.name()),r.Debug.log("MergePreviewManager: Preview opened successfully",null,2)}catch(e){t.hideLoader(n),r.Debug.error("MergePreviewManager: Error during preview:",e,2),this.showPreviewError(e)}}},{key:"applySyntaxHighlighting",value:function(){if(window.hljs)try{var e,t=null===(e=i.DOMUtils.getElement(s.default.MODAL.PREVIEW_CONTENT_ID.name()))||void 0===e?void 0:e.querySelector("pre"),n=null==t?void 0:t.querySelector("code");if(!n)return void r.Debug.warn("MergePreviewManager: No code element found for highlighting",null,2);window.hljs.highlightElement(n),"true"===t.getAttribute("data-line-numbers")&&window.hljs.lineNumbersBlock&&(window.hljs.lineNumbersBlock(n),r.Debug.log("MergePreviewManager: Line numbers added to preview",null,3)),r.Debug.log("MergePreviewManager: Syntax highlighting applied",null,3)}catch(e){r.Debug.warn("MergePreviewManager: Error applying syntax highlighting:",e,2)}else r.Debug.log("MergePreviewManager: Highlight.js not available",null,3)}},{key:"showPreviewError",value:function(e){var t=e instanceof Error?e.message:String(e),n=a.StringUtils.escapeHtml(t);this.modalManager.setContent(s.default.MODAL.PREVIEW.name(),"",s.default.MODAL.PREVIEW_CONTENT_ID.name()),i.DOMUtils.showMessage(s.default.MODAL.PREVIEW_CONTENT_ID.name(),"<h4>Error Generating Preview</h4><p>".concat(n,"</p>"),"danger",{className:""}),this.modalManager.open(s.default.MODAL.PREVIEW.name())}}])&&f(e.prototype,t),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}()},"./src/components/merge/MergeUIController.js":(e,t,n)=>{n.r(t),n.d(t,{MergeUIController:()=>g});var r=n("./src/utils/Debug.js"),o=n("./src/utils/DOMUtils.js"),i=n("./src/utils/MergeContentFormatter.js"),a=n("./src/utils/NavigationUtils.js"),l=n("./src/utils/TranslationManager.js"),s=n("./src/constants/Selectors.js");function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return d(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}function h(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==c(t)?t:t+""}var g=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mergeHandler=t,this.diffViewer=t.diffViewer,this.modalManager=t.modalManager,this.translationManager=l.TranslationManager.getInstance(),this.mergeDestination=null,this.mergeToggleBtn=null,this.mergeToggleIcon=null,this.mergeToggleText=null},t=[{key:"initialize",value:function(){this.initMergeDestinationToggle(),this.setupModalButtons(),this.setupApplyMergeButton(),r.Debug.log("MergeUIController: Initialized",null,2)}},{key:"initMergeDestinationToggle",value:function(){if(this.mergeDestination=o.DOMUtils.getElement(s.default.MERGE.DESTINATION_DROPDOWN),this.mergeToggleBtn=o.DOMUtils.getElement(s.default.MERGE.DESTINATION_TOGGLE),this.mergeToggleIcon=document.getElementById("vdm-merge-controls__toggle-icon"),this.mergeToggleText=document.getElementById("vdm-merge-controls__toggle-text"),this.mergeDestination&&this.mergeToggleBtn){this.mergeToggleBtn&&this.mergeToggleBtn.setAttribute("type","button"),r.Debug.log("MergeUIController: Populating merge destination options",null,2),this.populateMergeDestinations();for(var e=localStorage.getItem("preferredMergeDestination")||"new",t=!1,n=0;n<this.mergeDestination.options.length;n++)if(this.mergeDestination.options[n].value===e){t=!0;break}t?this.mergeDestination.value=e:this.mergeDestination.options.length>0&&(this.mergeDestination.selectedIndex=0),r.Debug.log("MergeUIController: Initial merge destination set to ".concat(this.mergeDestination.value),null,2),this.setupMergeToggleEvents(),r.Debug.log("MergeUIController: Merge destination toggle initialized",null,2)}else r.Debug.warn("MergeUIController: Missing merge destination elements",null,2)}},{key:"populateMergeDestinations",value:function(){var e,t,n,i=this.diffViewer.getRuntimeProps(),a=i.diffData||{},l=i.newFileName||(null===(e=a.new)||void 0===e?void 0:e.filename)||(null===(t=i.filepath)||void 0===t?void 0:t.split("/").pop())||"new-file",s=i.oldFileName||(null===(n=a.old)||void 0===n?void 0:n.filename)||"old-file",c=l.split(/[\/\\]/).pop(),u=s.split(/[\/\\]/).pop();r.Debug.log("MergeUIController: File names for merge destinations",{newFileName:l,oldFileName:s,newFile:c,oldFile:u},3);var d=c.substring(0,c.lastIndexOf("."))||c,f=u.substring(0,u.lastIndexOf("."))||u,h=c.substring(c.lastIndexOf("."))||"",g=u.substring(u.lastIndexOf("."))||"",m="".concat(d,"-merged").concat(h),p="".concat(f,"-merged").concat(g),v=this.diffViewer.getConfig(),y=(null==v?void 0:v.saveOptions)||{saveToOriginal:!0,saveWithSuffix:!0,saveToOld:!0,saveToOldWithSuffix:!0,saveToBoth:!0,saveToBothWithSuffix:!0};for(r.Debug.log("MergeUIController: Save options configuration",y,3);this.mergeDestination.options.length>0;)this.mergeDestination.remove(0);this.mergeDestination.innerHTML="",r.Debug.log("MergeUIController: Cleared existing dropdown options",null,3);var b=0;y.saveToOriginal&&(o.DOMUtils.createAndAppendElement("option",this.mergeDestination,{attributes:{value:"new","data-tooltip":this.translationManager.get("saveToOriginalTooltip","Replace the current file with merged content")},content:"".concat(c," (new)")}),b++),y.saveWithSuffix&&(o.DOMUtils.createAndAppendElement("option",this.mergeDestination,{attributes:{value:"new-suffix","data-tooltip":this.translationManager.get("saveWithSuffixTooltip","Save merged content as a new file with -merged suffix")},content:"".concat(m," (new)")}),b++),y.saveToOld&&(o.DOMUtils.createAndAppendElement("option",this.mergeDestination,{attributes:{value:"old","data-tooltip":this.translationManager.get("saveToOldTooltip","Replace the old file with merged content")},content:"".concat(u," (old)")}),b++),y.saveToOldWithSuffix&&(o.DOMUtils.createAndAppendElement("option",this.mergeDestination,{attributes:{value:"old-suffix","data-tooltip":this.translationManager.get("saveToOldWithSuffixTooltip","Save merged content as a new file with -merged suffix in old location")},content:"".concat(p," (old)")}),b++),y.saveToBoth&&(o.DOMUtils.createAndAppendElement("option",this.mergeDestination,{attributes:{value:"both","data-tooltip":this.translationManager.get("saveToBothTooltip","Replace both old and new files with merged content")},content:this.translationManager.get("saveToBoth","Overwrite both files")}),b++),y.saveToBothWithSuffix&&(o.DOMUtils.createAndAppendElement("option",this.mergeDestination,{attributes:{value:"both-suffix","data-tooltip":this.translationManager.get("saveToBothWithSuffixTooltip","Save merged content as new files with -merged suffix in both locations")},content:this.translationManager.get("saveToBothWithSuffix","Save to both with suffix")}),b++),0===b&&(r.Debug.log("MergeUIController: No save options enabled, adding default option",null,2),o.DOMUtils.createAndAppendElement("option",this.mergeDestination,{attributes:{value:"new","data-tooltip":this.translationManager.get("saveToOriginalTooltip","Replace the current file with merged content")},content:"".concat(c," (new)")}),b=1),r.Debug.log("MergeUIController: Populated merge destinations with ".concat(b," options"),null,2)}},{key:"setupMergeToggleEvents",value:function(){var e=this,t=this.mergeToggleBtn.cloneNode(!0),n=this.mergeDestination.cloneNode(!0);this.mergeToggleBtn&&this.mergeToggleBtn.parentNode&&this.mergeToggleBtn.parentNode.replaceChild(t,this.mergeToggleBtn),this.mergeDestination&&this.mergeDestination.parentNode&&this.mergeDestination.parentNode.replaceChild(n,this.mergeDestination),this.mergeToggleBtn=t,this.mergeDestination=n,this.mergeToggleBtn.querySelector("#vdm-merge-controls__toggle-icon")?this.mergeToggleIcon=this.mergeToggleBtn.querySelector("#vdm-merge-controls__toggle-icon"):(this.mergeToggleIcon=o.DOMUtils.createAndAppendElement("i",this.mergeToggleBtn,{id:"vdm-merge-controls__toggle-icon"}),this.mergeToggleBtn.insertBefore(this.mergeToggleIcon,this.mergeToggleBtn.firstChild)),this.mergeToggleBtn.querySelector("#vdm-merge-controls__toggle-text")?this.mergeToggleText=this.mergeToggleBtn.querySelector("#vdm-merge-controls__toggle-text"):this.mergeToggleText=o.DOMUtils.createAndAppendElement("span",this.mergeToggleBtn,{id:"vdm-merge-controls__toggle-text"}),this.mergeDestination.classList.add("vdm-dropdown-visible"),this.mergeDestination.style.cursor="pointer";var i=document.createElement("span");i.className=s.default.UTILITY.MARGIN_START_2.name(),i.innerHTML=o.DOMUtils.getIconHtml("chevron-down",{width:10,height:10}),this.mergeToggleBtn.appendChild(i),this.mergeToggleBtn.addEventListener("click",(function(t){if(t.preventDefault(),t.stopPropagation(),e.mergeDestination){if(e.mergeDestination.focus(),"function"==typeof e.mergeDestination.showPicker)try{return e.mergeDestination.showPicker(),void r.Debug.log("MergeUIController: Opened dropdown using showPicker()",null,3)}catch(e){r.Debug.log("MergeUIController: showPicker() failed, trying alternative method",e,2)}setTimeout((function(){try{var t=new MouseEvent("mousedown",{bubbles:!0,cancelable:!0,view:window});e.mergeDestination.dispatchEvent(t)}catch(e){r.Debug.log("MergeUIController: Failed to open dropdown with click event",e,2)}}),10),e.mergeDestination.classList.add("vdm-dropdown-highlight"),setTimeout((function(){e.mergeDestination.classList.remove("vdm-dropdown-highlight")}),1e3)}r.Debug.log("MergeUIController: Toggle button clicked, attempting to open dropdown",null,3)})),this.mergeDestination.addEventListener("change",(function(){e.updateMergeToggle(e.mergeDestination.value),localStorage.setItem("preferredMergeDestination",e.mergeDestination.value),r.Debug.log("MergeUIController: Selection changed to ".concat(e.mergeDestination.value),null,3)})),this.mergeDestination.style.paddingRight="1.5rem",this.mergeDestination.style.appearance="menulist",this.mergeDestination.style.cursor="pointer",this.mergeDestination.title="Click to select where to save the merged content",this.mergeDestination.addEventListener("mouseover",(function(){e.mergeDestination.style.borderColor="var(--vdm-primary, #0d6efd)"})),this.mergeDestination.addEventListener("mouseout",(function(){e.mergeDestination.style.borderColor="var(--vdm-border-color, #495057)"})),this.updateMergeToggle(this.mergeDestination.value)}},{key:"updateMergeToggle",value:function(e){var t="vdm-text-primary",n=s.default.UTILITY.BUTTON_PRIMARY.name(),i=s.default.UTILITY.BUTTON_WARNING.name(),a=s.default.UTILITY.BUTTON_INFO.name(),l="",c="",u="";switch(e){case"new":case"new-suffix":default:l="file",c=t,u=n;break;case"old":case"old-suffix":l="file-lines",c="vdm-text-warning",u=i;break;case"both":case"both-suffix":l="file-copy",c="vdm-text-info",u=a}var d="".concat(s.default.UTILITY.MARGIN_END_1.name()," ").concat(c);this.mergeToggleIcon.innerHTML=o.DOMUtils.getIconHtml(l,{classes:d});var f=document.getElementById(s.default.MERGE.BUTTON_APPLY.name());switch(f&&(f.classList.remove(s.default.UTILITY.BUTTON_PRIMARY.name(),s.default.UTILITY.BUTTON_WARNING.name(),s.default.UTILITY.BUTTON_INFO.name(),s.default.UTILITY.BUTTON_SUCCESS.name(),s.default.UTILITY.BUTTON_DANGER.name(),s.default.UTILITY.BUTTON_SECONDARY.name()),f.classList.add(u),r.Debug.log("MergeUIController: Updated apply button style to ".concat(u),null,3)),e){case"new":default:this.mergeToggleText.textContent=this.translationManager.get("saveToOriginal","Save to original"),this.mergeToggleBtn.title=this.translationManager.get("saveToOriginalTooltip",""),this.mergeToggleBtn.setAttribute("data-value","new");break;case"new-suffix":this.mergeToggleText.textContent=this.translationManager.get("saveWithSuffix","Save with suffix"),this.mergeToggleBtn.title=this.translationManager.get("saveWithSuffixTooltip",""),this.mergeToggleBtn.setAttribute("data-value","new-suffix");break;case"old":this.mergeToggleText.textContent=this.translationManager.get("saveToOld","Save to old file"),this.mergeToggleBtn.title=this.translationManager.get("saveToOldTooltip",""),this.mergeToggleBtn.setAttribute("data-value","old");break;case"old-suffix":this.mergeToggleText.textContent=this.translationManager.get("saveToOldWithSuffix","Save to old with suffix"),this.mergeToggleBtn.title=this.translationManager.get("saveToOldWithSuffixTooltip",""),this.mergeToggleBtn.setAttribute("data-value","old-suffix");break;case"both":this.mergeToggleText.textContent=this.translationManager.get("saveToBoth","Save to both files"),this.mergeToggleBtn.title=this.translationManager.get("saveToBothTooltip",""),this.mergeToggleBtn.setAttribute("data-value","both");break;case"both-suffix":this.mergeToggleText.textContent=this.translationManager.get("saveToBothWithSuffix","Save to both with suffix"),this.mergeToggleBtn.title=this.translationManager.get("saveToBothWithSuffixTooltip",""),this.mergeToggleBtn.setAttribute("data-value","both-suffix")}r.Debug.log("MergeUIController: Toggle updated to ".concat(e),null,3)}},{key:"setupModalButtons",value:function(){var e=this;document.addEventListener("click",(function(t){if(t.target.closest&&t.target.closest("#".concat(s.default.MODAL.CONTINUE_BTN.name()))){r.Debug.log("MergeUIController: Continue merging button clicked via delegation",null,2),e.modalManager.close(s.default.MERGE.CONFLICT_MODAL.name());var n=s.default.MODAL.PREVIEW.name();r.Debug.log("MergeUIController: Also closing preview modal (ID: ".concat(n,")"),null,1),e.modalManager.close(n),setTimeout((function(){e.highlightUnresolvedChunks()}),400)}t.target.closest&&t.target.closest("#".concat(s.default.MODAL.MERGE_BTN.name()))&&(r.Debug.log("MergeUIController: Merge anyway button clicked via delegation",null,2),e.modalManager.close(s.default.MERGE.CONFLICT_MODAL.name()),e.mergeHandler.proceedWithMerge(e.getMergeType()))})),this.modalManager&&"function"==typeof this.modalManager.registerBeforeOpenCallback&&this.modalManager.registerBeforeOpenCallback(s.default.MERGE.CONFLICT_MODAL.name(),(function(){var t=document.getElementById(s.default.MODAL.CONTINUE_BTN.name()),n=document.getElementById(s.default.MODAL.MERGE_BTN.name());r.Debug.log("MergeUIController: Modal opened, buttons present: continueBtn=".concat(!!t,", mergeBtn=").concat(!!n),null,2),t&&(t.onclick=function(){r.Debug.log("MergeUIController: Continue merging clicked via direct handler",null,2),e.modalManager.close(s.default.MERGE.CONFLICT_MODAL.name());var t=s.default.MODAL.PREVIEW.name();return r.Debug.log("MergeUIController: Also closing preview modal (ID: ".concat(t,")"),null,1),e.modalManager.close(t),setTimeout((function(){e.highlightUnresolvedChunks()}),400),!1}),n&&(n.onclick=function(){return r.Debug.log("MergeUIController: Merge anyway clicked via direct handler",null,2),e.modalManager.close(s.default.MERGE.CONFLICT_MODAL.name()),e.mergeHandler.proceedWithMerge(e.getMergeType()),!1})}))}},{key:"setupApplyMergeButton",value:function(){var e=this,t=document.getElementById(s.default.MERGE.BUTTON_APPLY.name());if(t){var n=document.querySelector(s.default.MERGE.CONTROLS_ACTIONS.toString());if(n){var o=document.getElementById(s.default.MERGE.DESTINATION_DROPDOWN.name()),i=document.getElementById(s.default.MERGE.DESTINATION_TOGGLE.name()),a=document.createElement("form");if(a.id="vdm-merge__form",a.className=n.className,a.style.display="flex",a.style.justifyContent="space-between",a.style.width="100%",n.parentNode){for(n.parentNode.replaceChild(a,n);n.firstChild;)a.appendChild(n.firstChild);if(o&&!a.contains(o)){var l=document.querySelector(".vdm-merge-controls__destination");l&&a.insertBefore(l,a.firstChild)}r.Debug.log("MergeUIController: Created form wrapper for merge controls",null,2)}a.addEventListener("submit",(function(t){t.preventDefault(),e.handleApplyMerge(),r.Debug.log("MergeUIController: Form submitted",null,3)})),i&&(i.type="button",i.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),r.Debug.log("MergeUIController: Toggle button click intercepted to prevent form submission",null,3)}))),t.addEventListener("click",(function(n){n.preventDefault(),t.form?t.form.dispatchEvent(new Event("submit")):e.handleApplyMerge(),r.Debug.log("MergeUIController: Apply merge clicked",null,3)}))}else r.Debug.warn("MergeUIController: Merge controls container not found",null,2)}else r.Debug.warn("MergeUIController: Apply merge button not found",null,2)}},{key:"handleApplyMerge",value:function(){var e=this.countUnresolvedConflicts();if(e>0)this.showConflictModal(e);else{var t=this.diffViewer.getRuntimeProps(),n=t.fileRefId||"",o=t.oldFileRefId||"";n||o?(r.Debug.log("MergeUIController: Using selected merge type for file-browser mode",null,2),this.mergeHandler.proceedWithMerge(this.getMergeType())):(r.Debug.log("MergeUIController: Using clipboard merge type for non-file-browser mode",null,2),this.mergeHandler.proceedWithMerge("clipboard"))}}},{key:"countUnresolvedConflicts",value:function(){var e=this.diffViewer.chunkManager.chunks.filter((function(e){return e.conflict})),t=this.diffViewer.chunkManager.selections||{};return e.length-Object.keys(t).length}},{key:"showConflictModal",value:function(e){var t=this,n=this.diffViewer.getConfig().translations||{},a=i.MergeContentFormatter.formatUnresolvedCount(e,n);this.modalManager.open(s.default.MERGE.CONFLICT_MODAL.name()),setTimeout((function(){o.DOMUtils.showMessage(s.default.MODAL.MESSAGE.name(),a,"warning",{className:""}),r.Debug.log("MergeUIController: Showing conflict modal with message",null,2)}),50),setTimeout((function(){var e=document.getElementById(s.default.MODAL.CONTINUE_BTN.name()),n=document.getElementById(s.default.MODAL.MERGE_BTN.name());if(e){var o=e.cloneNode(!0);e.parentNode.replaceChild(o,e),o.addEventListener("click",(function(){r.Debug.log("MergeUIController: Continue button clicked",null,2),t.modalManager.close(s.default.MERGE.CONFLICT_MODAL.name());var e=s.default.MODAL.PREVIEW.name();r.Debug.log("MergeUIController: Closing preview modal (ID: ".concat(e,")"),null,2),t.modalManager.close(e),setTimeout((function(){t.highlightUnresolvedChunks()}),400)}))}if(n){var i=n.cloneNode(!0);n.parentNode.replaceChild(i,n),i.addEventListener("click",(function(){r.Debug.log("MergeUIController: Merge anyway button clicked",null,2),t.modalManager.close(s.default.MERGE.CONFLICT_MODAL.name()),t.mergeHandler.proceedWithMerge(t.getMergeType())}))}}),50)}},{key:"getMergeType",value:function(){var e;return(null===(e=this.mergeDestination)||void 0===e?void 0:e.value)||"original"}},{key:"highlightUnresolvedChunks",value:function(){r.Debug.log("MergeUIController: Finding first unresolved conflict",null,2);var e,t=this.diffViewer.chunkManager.chunks,n=this.diffViewer.chunkManager.selections||{},o=u(t);try{for(o.s();!(e=o.n()).done;){var i=e.value;if(i.conflict&&!n[i.id]){var l=t.indexOf(i);if(this.diffViewer.diffNavigator){this.diffViewer.diffNavigator.navigateToChunk(l);var s=document.querySelector('[data-chunk-id="'.concat(i.id,'"]'));return s&&a.NavigationUtils.addHighlightEffect(s,4e3),r.Debug.log("MergeUIController: Highlighted unresolved chunk ".concat(i.id),null,2),!0}}}}catch(e){o.e(e)}finally{o.f()}return r.Debug.log("MergeUIController: No unresolved conflicts found",null,2),!1}},{key:"setupLocalOnlyControls",value:function(){var e=this;r.Debug.log("MergeUIController: Setting up local-only controls (server save disabled)",null,2),r.Debug.log("MergeUIController: Getting translations for local-only controls",this.translationManager,2);var t=this.translationManager.get("getMergedResult","Get Merged Result"),n=this.translationManager.get("getMergedResultTooltip","View and download the merged content"),i=document.querySelector(s.default.MERGE.CONTROLS_ACTIONS.toString());if(i){i.innerHTML="";var a=document.createElement("button");a.id=s.default.MERGE.GET_MERGED_RESULT_BTN.name(),a.className="".concat(s.default.UTILITY.BUTTON.name()," ").concat(s.default.UTILITY.BUTTON_PRIMARY.name()),a.title=n;var l=o.DOMUtils.getIconHtml("download",{classes:s.default.UTILITY.MARGIN_END_1.name()});a.innerHTML="".concat(l," ").concat(t);var c=document.createElement("div");c.className="".concat(s.default.UTILITY.FLEX.name()," ").concat(s.default.UTILITY.JUSTIFY_CONTENT_BETWEEN.name()," w-100"),c.style.width="100%";var u=document.createElement("div");u.style.flex="1",c.appendChild(u),c.appendChild(a),i.appendChild(c),a.addEventListener("click",(function(t){t.preventDefault(),e.mergeHandler.proceedWithMerge("clipboard"),r.Debug.log("MergeUIController: Get merged result button clicked (using clipboard merge type)",null,2)})),r.Debug.log("MergeUIController: Local-only controls setup complete",null,2)}else r.Debug.error("MergeUIController: Could not find merge controls container",null,1)}}],t&&f(e.prototype,t),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}()},"./src/components/modal/ModalManager.js":(e,t,n)=>{n.r(t),n.d(t,{ModalManager:()=>w});var r=n("./src/utils/Debug.js"),o=n("./src/utils/BaseSingleton.js"),i=n("./src/constants/Selectors.js"),a=n("./src/utils/DOMUtils.js"),l=n("./src/utils/TranslationManager.js");function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e,t,n){return(t=g(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,g(r.key),r)}}function g(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}function m(e,t){if(t&&("object"==s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function p(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(p=function(){return!!e})()}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}var b=null,w=function(e){function t(){var e,n,o,i,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=v(o=t),(e=m(n,p()?Reflect.construct(o,i||[],v(n).constructor):o.apply(n,i)))._isFirstInstance(b)?(e.options=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({debug:!1,translations:{}},a),e.modals={},e.activeModal=null,e.initialized=!1,r.Debug.log("ModalManager: Initialized",null,2),e):m(e)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(t,e),n=t,o=[{key:"initModals",value:function(){try{if(this.initialized)return r.Debug.log("ModalManager: Already initialized",null,2),!0;var e=l.TranslationManager.getInstance();return this.createModal({id:i.default.MODAL.CONFIRM.name(),title:e.get("confirmation"),contentId:i.default.MODAL.MESSAGE.name(),contentClass:i.default.UTILITY.PADDING_3.name(),footerButtons:[{id:i.default.MODAL.CONTINUE_BTN.name(),text:e.get("continueResolving"),class:i.default.UTILITY.BUTTON.name()+" "+i.default.UTILITY.BUTTON_PRIMARY.name()+" "+i.default.UTILITY.MARGIN_END_2.name()},{id:i.default.MODAL.MERGE_BTN.name(),text:e.get("mergeAnyway"),class:i.default.UTILITY.BUTTON.name()+" "+i.default.UTILITY.BUTTON_WARNING.name()}]}),this.createModal({id:i.default.MODAL.PREVIEW.name(),title:'<span id="'+i.default.MODAL.PREVIEW_FILENAME.name()+'"></span>',contentId:i.default.MODAL.PREVIEW_CONTENT_ID.name(),contentClass:i.default.MODAL.PREVIEW_CONTENT.name(),headerClass:i.default.MODAL.HEADER_FIXED.name(),modalClass:"vdm-modal--fixed-footer",fullscreen:!0}),this.createModal({id:i.default.MERGE.CONFLICT_MODAL.name(),title:e.get("unresolvedConflicts"),contentId:i.default.MODAL.MESSAGE.name(),contentClass:i.default.UTILITY.PADDING_3.name(),footerButtons:[{id:i.default.MODAL.CONTINUE_BTN.name(),text:e.get("continueResolving"),class:i.default.UTILITY.BUTTON.name()+" "+i.default.UTILITY.BUTTON_PRIMARY.name()+" "+i.default.UTILITY.MARGIN_END_2.name()},{id:i.default.MODAL.MERGE_BTN.name(),text:e.get("mergeAnyway"),class:i.default.UTILITY.BUTTON.name()+" "+i.default.UTILITY.BUTTON_WARNING.name()}]}),this._setupEventListeners(),this.initialized=!0,r.Debug.log("ModalManager: Modals initialized",null,2),!0}catch(e){return r.Debug.error("ModalManager: Error initializing modals",e,1),!1}}},{key:"createModal",value:function(e){try{var t=e.id;if(document.getElementById(t))return r.Debug.log("ModalManager: Modal ".concat(t," already exists in DOM"),null,2),!0;var n=e.headerClass||i.default.MODAL.HEADER.name(),o='\n                <div id="'.concat(t,'" class="').concat(i.default.MODAL.CONTAINER.name()).concat(e.modalClass?" "+e.modalClass:"",'" style="display: none;"');if(e.attr&&Object.entries(e.attr).forEach((function(e){var t=c(e,2),n=t[0],r=t[1];o+=" ".concat(n,'="').concat(r,'"')})),o+='>\n                    <div class="'.concat(i.default.MODAL.CONTENT.name(),'">\n                        <div class="').concat(n,'">\n                            <h5 class="').concat(i.default.MODAL.TITLE.name(),'">').concat(e.title,'</h5>\n                            <button class="').concat(i.default.MODAL.CLOSE.name(),'">&times;</button>\n                        </div>'),e.contentId?o+='<div id="'.concat(e.contentId,'" class="').concat(e.contentClass||"",'"></div>'):o+='<div class="'.concat(e.contentClass||"",'"></div>'),e.footerButtons&&e.footerButtons.length>0&&(o+='<div class="'.concat(i.default.MODAL.FOOTER.name()," ").concat(i.default.UTILITY.FLEX.name()," ").concat(i.default.UTILITY.JUSTIFY_CONTENT_BETWEEN.name()," ").concat(i.default.UTILITY.PADDING_3.name(),'">'),e.footerButtons.forEach((function(e){var t=null==e?void 0:e.class.split(" ").includes(i.default.MODAL.CLOSE.name()),n="chevron-right";if(e.class){var r=e.class.split(" ");r.some((function(e){return e.includes("primary")}))||r.some((function(e){return e.includes("success")}))?n="check-circle":r.some((function(e){return e.includes("danger")}))?n="exclamation-triangle":r.some((function(e){return e.includes("warning")}))?n="exclamation-circle":r.some((function(e){return e.includes("info")}))&&(n="info-circle")}e.id&&(e.id.toLowerCase().includes("copy")?n="copy":e.id===i.default.MODAL.CONTINUE_BTN.name()?n="chevron-right":e.id===i.default.MODAL.MERGE_BTN.name()&&(n="exclamation-circle"));var l="";t||(l=a.DOMUtils.getIconHtml(n,{classes:i.default.UTILITY.MARGIN_END_2.name()})),o+='<button id="'.concat(e.id,'" class="').concat(e.class||i.default.UTILITY.BUTTON.name()+" "+i.default.UTILITY.BUTTON_SECONDARY.name(),'"'),e.data&&Object.entries(e.data).forEach((function(e){var t=c(e,2),n=t[0],r=t[1];o+=" data-".concat(n,'="').concat(r,'"')})),t&&!e.text?o+="></button>":o+=">".concat(l,"<span>").concat(e.text||"","</span></button>")})),o+="</div>"),o+="\n                    </div>\n                </div>\n            ",this._appendToBody(t,o),this.modals[t]={element:document.getElementById(t),isOpen:!1,config:e},e.fullscreen){var l=document.getElementById(t);l&&this.setFullscreenSize(l)}if(e.events){var s=document.getElementById(t);Object.entries(e.events).forEach((function(e){var n=c(e,2),o=n[0],a=n[1];("modal"===o?[s]:"close"===o?Array.from(s.querySelectorAll(i.default.MODAL.CLOSE)):Array.from(s.querySelectorAll(o))).forEach((function(e){e&&Object.entries(a).forEach((function(n){var i=c(n,2),a=i[0],l=i[1];e.addEventListener(a,l),r.Debug.log("ModalManager: Attached ".concat(a," event to ").concat(o," in modal ").concat(t),null,3)}))}))}))}return r.Debug.log("ModalManager: Created modal - ".concat(t),null,3),!0}catch(t){return r.Debug.error("ModalManager: Error creating modal - ".concat(e.id),t,1),!1}}},{key:"_getIconNameForButton",value:function(e){var t=e.text.toLowerCase();if(t.includes("continue"))return"chevron-right";if(t.includes("merge"))return"check";if(t.includes("close")||t.includes("cancel"))return"exclamation-circle";if(t.includes("confirm")||t.includes("ok"))return"check-circle";if(t.includes("copy"))return"copy";if(t.includes("download"))return"file";if(t.includes("upload"))return"file-circle-plus";if(t.includes("save"))return"check-circle";if(t.includes("delete"))return"exclamation-triangle";if(t.includes("edit"))return"eye";if(e.class){var n=e.class.toLowerCase();if(n.includes("primary"))return"check";if(n.includes("secondary"))return"chevron-right";if(n.includes("success"))return"check-circle";if(n.includes("danger"))return"exclamation-triangle";if(n.includes("warning"))return"exclamation-circle";if(n.includes("info"))return"info-circle"}return"chevron-right"}},{key:"_appendToBody",value:function(e,t){if(!document.getElementById(e)){var n=document.createElement("div");n.innerHTML=t,document.body.appendChild(n.firstElementChild)}var r=document.getElementById(i.default.MODAL.BACKDROP.name());r||((r=document.createElement("div")).id=i.default.MODAL.BACKDROP.name(),r.style.display="none",document.body.appendChild(r))}},{key:"_setupEventListeners",value:function(){var e=this;document.addEventListener("click",(function(t){if(t.target.matches(i.default.MODAL.CLOSE)){var n=t.target.closest(i.default.MODAL.CONTAINER);null!=n&&n.id&&e.close(n.id)}}));var t=document.getElementById(i.default.MODAL.BACKDROP.name());t&&t.addEventListener("click",(function(){e.activeModal&&e.close(e.activeModal)})),document.addEventListener("keydown",(function(t){"Escape"===t.key&&e.activeModal&&e.close(e.activeModal)}))}},{key:"register",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{var n=document.getElementById(e);return n?(this.modals[e]={element:n,isOpen:!1,options:t},r.Debug.log("ModalManager: Registered modal - ".concat(e),null,3),!0):(r.Debug.warn("ModalManager: Element not found for modal ID ".concat(e),null,2),!1)}catch(t){return r.Debug.error("ModalManager: Error registering modal - ".concat(e),t,1),!1}}},{key:"registerBeforeOpenCallback",value:function(e,t){try{return this.modals[e]||(this.modals[e]={element:document.getElementById(e),isOpen:!1,config:{}}),this.modals[e].beforeOpenCallbacks||(this.modals[e].beforeOpenCallbacks=[]),this.modals[e].beforeOpenCallbacks.push(t),r.Debug.log("ModalManager: Registered before-open callback for modal ".concat(e),null,2),!0}catch(t){return r.Debug.error("ModalManager: Error registering before-open callback for modal ".concat(e),t,1),!1}}},{key:"open",value:function(e){try{var t=this.modals[e];if(!t){r.Debug.warn("ModalManager: Cannot open modal ".concat(e," - not registered"),null,2);var n=document.getElementById(e);return!!n&&(r.Debug.log("ModalManager: Found unregistered modal element ".concat(e,", registering now"),null,2),this.register(e,{element:n}),this._showModal(e),!0)}return t.beforeOpenCallbacks&&t.beforeOpenCallbacks.length>0&&(r.Debug.log("ModalManager: Executing ".concat(t.beforeOpenCallbacks.length," before-open callbacks for modal ").concat(e),null,2),t.beforeOpenCallbacks.forEach((function(t){try{t()}catch(t){r.Debug.error("ModalManager: Error in before-open callback for modal ".concat(e),t,1)}}))),this._showModal(e),!0}catch(t){return r.Debug.error("ModalManager: Error opening modal ".concat(e,":"),t,2),!1}}},{key:"_showModal",value:function(e){var t=this.modals[e];if(t){this.activeModal=e;var n=document.getElementById(i.default.MODAL.BACKDROP.name());n&&(n.style.display="block",setTimeout((function(){n.style.opacity="1"}),10)),t.element.style.display="block",t.element.style.opacity="0",r.Debug.log("ModalManager: Setting modal ".concat(e," display to block"),{modalElement:t.element.id,displayBefore:t.element.style.display},2),setTimeout((function(){t.element.style.opacity="1",r.Debug.log("ModalManager: Fading in modal ".concat(e),null,3)}),10),t.isOpen=!0,e===i.default.MODAL.PREVIEW.name()&&this.setFullscreenSize(t.element),document.body.style.overflow="hidden"}else r.Debug.warn("ModalManager: Modal ".concat(e," not found"),null,2)}},{key:"_hideModal",value:function(e){var t=this,n=this.modals[e];n&&(n.element.style.opacity="0",setTimeout((function(){if(n.element.style.display="none",n.isOpen=!1,t.activeModal===e){var r=document.getElementById(i.default.MODAL.BACKDROP.name());r&&(r.style.opacity="0",setTimeout((function(){r.style.display="none"}),150)),document.body.style.overflow="",t.activeModal=null}}),250))}},{key:"close",value:function(e){try{return this.modals[e]?(this._hideModal(e),r.Debug.log("ModalManager: Closed modal - ".concat(e),null,3),!0):(r.Debug.warn("ModalManager: Modal not found - ".concat(e),null,2),!1)}catch(t){return r.Debug.error("ModalManager: Error closing modal - ".concat(e),t,1),!1}}},{key:"setContent",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{r.Debug.log("ModalManager: Setting content for modal ".concat(e),{contentType:s(t),contentLength:"string"==typeof t?t.length:"Element",contentPreview:"string"==typeof t?t.substring(0,150)+"...":"Element object",targetSelector:n},2);var o,a,l=this.modals[e];if(!l)return r.Debug.error("ModalManager: Modal not found - ".concat(e),null,1),!1;if(n)r.Debug.log("ModalManager: Looking for content container with selector: ".concat(n),null,2),n.startsWith("#")||n.startsWith(".")||(o=document.getElementById(n),r.Debug.log("ModalManager: Tried getElementById with: ".concat(n,", found: ").concat(!!o),null,2)),o||(o=document.querySelector(n),r.Debug.log("ModalManager: Tried querySelector with: ".concat(n,", found: ").concat(!!o),null,2)),r.Debug.log("ModalManager: Container lookup result:",{found:!!o,id:(null===(a=o)||void 0===a?void 0:a.id)||"none",classList:o?Array.from(o.classList):[]},2);else if(o=l.element.querySelector(i.default.MODAL.CONTENT),r.Debug.log("ModalManager: Using default content container:",{found:!!o,selector:i.default.MODAL.CONTENT},2),!o)return r.Debug.error("ModalManager: Content container not found - ".concat(e),null,1),!1;if(!o)return r.Debug.error("ModalManager: Could not find content container with selector: ".concat(n),null,1),!1;if("string"==typeof t){r.Debug.log("ModalManager: Setting HTML content for modal ".concat(e),{contentLength:t.length,containsPre:t.includes("<pre"),container:o.id||o.className},2),o.innerHTML=t;var c=o.querySelectorAll("pre").length>0;r.Debug.log("ModalManager: Content set verification:",{hasPreElements:c,innerHTML:o.innerHTML.substring(0,100)+"..."},2),t.includes("<pre")&&!c&&r.Debug.warn("ModalManager: Content included <pre> tags but none found after setting innerHTML",{innerHtmlLength:o.innerHTML.length},1)}else{if(!(t instanceof Element))return r.Debug.error("ModalManager: Invalid content type - ".concat(s(t)),null,1),!1;r.Debug.log("ModalManager: Setting Element content for modal ".concat(e),{elementType:t.tagName,elementId:t.id||"none"},2),o.innerHTML="",o.appendChild(t)}return r.Debug.log("ModalManager: Content set for modal - ".concat(e),null,3),!0}catch(t){return r.Debug.error("ModalManager: Error setting content - ".concat(e),t,1),!1}}},{key:"setFullscreenSize",value:function(e){try{if(!e)return r.Debug.warn("ModalManager: Modal element not provided for fullscreen",null,2),!1;e.classList.add(i.default.MODAL.FULLSCREEN.name());var t=e.querySelector(i.default.MODAL.HEADER)?e.querySelector(i.default.MODAL.HEADER).offsetHeight:0,n=e.querySelector(i.default.MODAL.CONTENT);return n&&(n.style.height="calc(100% - ".concat(t,"px)")),r.Debug.log("ModalManager: Modal set to fullscreen size",null,3),!0}catch(e){return r.Debug.error("ModalManager: Error setting fullscreen size",e,1),!1}}},{key:"createCopyModal",value:function(e){var t=this,n=i.default.MODAL.CODE_COPY.name(),o=l.TranslationManager.getInstance();this.modals[n]||this.createModal({id:n,title:o.get("copyCode"),contentId:i.default.MODAL.COPY_CONTENT.name(),modalClass:i.default.MODAL.FIXED_FOOTER.name(),headerClass:i.default.MODAL.HEADER_FIXED.name(),footerButtons:[{class:"".concat(i.default.MODAL.CLOSE.name()," ").concat(i.default.UTILITY.BUTTON.name()," ").concat(i.default.UTILITY.BUTTON_SECONDARY.name())}]});var s=this._escapeHtml(e),c='\n            <div class="'.concat(i.default.COPY.MODAL.DIALOG.name(),'">\n                <p class="').concat(i.default.COPY.MODAL.INSTRUCTIONS.name(),'">').concat(o.get("copyInstructions"),'</p>\n                <div class="').concat(i.default.COPY.MODAL.TEXTAREA.name(),'">\n                    <textarea id="').concat(i.default.COPY.MODAL.TEXTAREA_ELEM.name(),'" class="').concat(i.default.COPY.MODAL.TEXTAREA_ELEM.name(),'">').concat(s,'</textarea>\n                </div>\n                <div class="').concat(i.default.COPY.MODAL.ACTIONS.name(),'">\n                    <button id="').concat(i.default.COPY.MODAL.BUTTON.name(),'" class="').concat(i.default.COPY.MODAL.BUTTON.name()," ").concat(i.default.UTILITY.BUTTON.name()," ").concat(i.default.UTILITY.BUTTON_PRIMARY.name(),'">\n                        ').concat(a.DOMUtils.getIconHtml("copy",{classes:i.default.UTILITY.MARGIN_END_2.name()}),"\n                        <span>").concat(o.get("copyToClipboard"),"</span>\n                    </button>\n                </div>\n            </div>\n        ");return this.setContent(n,c,i.default.MODAL.COPY_CONTENT.name()),setTimeout((function(){var e=document.getElementById(i.default.COPY.MODAL.TEXTAREA_ELEM.name()),n=document.getElementById(i.default.COPY.MODAL.BUTTON.name());e&&(e.addEventListener("focus",(function(){this.select()})),e.select()),n&&e&&n.addEventListener("click",function(){var t=this;e.select();try{var o;null!==(o=navigator.clipboard)&&void 0!==o&&o.writeText?navigator.clipboard.writeText(e.value).then((function(){t._showCopySuccess(n),r.Debug.log("ModalManager: Successfully copied using Clipboard API",null,3)})).catch((function(e){document.execCommand("copy")?(t._showCopySuccess(n),r.Debug.log("ModalManager: Successfully copied using execCommand fallback",null,3)):(t._showCopyFailure(n),r.Debug.warn("ModalManager: Copy failed with execCommand fallback",null,2))})):document.execCommand("copy")?(this._showCopySuccess(n),r.Debug.log("ModalManager: Successfully copied using execCommand",null,3)):(this._showCopyFailure(n),r.Debug.warn("ModalManager: Copy failed with execCommand",null,2))}catch(e){this._showCopyFailure(n),r.Debug.error("ModalManager: Error during copy operation",e,2)}}.bind(t))}),300),n}},{key:"_showCopySuccess",value:function(e){var t=l.TranslationManager.getInstance();e.innerHTML=a.DOMUtils.getIconHtml("check-circle",{classes:"vdm-icon--success "+i.default.UTILITY.MARGIN_END_2.name()})+"<span>".concat(t.get("copied"),"</span>"),e.classList.remove(i.default.UTILITY.BUTTON_PRIMARY.name()),e.classList.add(i.default.UTILITY.BUTTON_SUCCESS.name()),setTimeout((function(){e.innerHTML=a.DOMUtils.getIconHtml("copy",{classes:i.default.UTILITY.MARGIN_END_2.name()})+"<span>".concat(t.get("copyToClipboard"),"</span>"),e.classList.remove(i.default.UTILITY.BUTTON_SUCCESS.name()),e.classList.add(i.default.UTILITY.BUTTON_PRIMARY.name())}),2e3)}},{key:"_showCopyFailure",value:function(e){var t=l.TranslationManager.getInstance();e.innerHTML=a.DOMUtils.getIconHtml("exclamation-triangle",{classes:"vdm-icon--danger "+i.default.UTILITY.MARGIN_END_2.name()})+"<span>".concat(t.get("copyFailed"),"</span>"),e.classList.remove(i.default.UTILITY.BUTTON_PRIMARY.name()),e.classList.add(i.default.UTILITY.BUTTON_DANGER.name()),setTimeout((function(){e.innerHTML=a.DOMUtils.getIconHtml("copy",{classes:i.default.UTILITY.MARGIN_END_2.name()})+"<span>".concat(t.get("tryAgain"),"</span>"),e.classList.remove(i.default.UTILITY.BUTTON_DANGER.name()),e.classList.add(i.default.UTILITY.BUTTON_PRIMARY.name())}),2e3)}},{key:"_escapeHtml",value:function(e){return e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):""}},{key:"createAndOpenModal",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{return e.id||(e.id="vdm-modal--dynamic-"+Date.now()),this.createModal(e),t&&this.setContent(e.id,t,n||e.contentId),this.open(e.id),e.id}catch(e){return r.Debug.error("ModalManager: Error creating and opening modal",e,1),null}}},{key:"createConfirmationModal",value:function(e){var t=this,n="vdm-modal--confirmation-"+Date.now();return this.createModal({id:n,title:e.title||"Confirmation",contentId:"vdm-modal__confirmation-content",contentClass:i.default.UTILITY.PADDING_3.name(),footerButtons:[{id:"".concat(n,"-cancel-btn"),text:e.cancelText||"Cancel",class:"".concat(i.default.MODAL.CLOSE.name()," ").concat(i.default.UTILITY.BUTTON.name()," ").concat(i.default.UTILITY.BUTTON_SECONDARY.name()," me-2")},{id:"".concat(n,"-confirm-btn"),text:e.confirmText||"Confirm",class:"".concat(i.default.UTILITY.BUTTON.name()," ").concat(i.default.UTILITY.BUTTON_PRIMARY.name())}],events:f(f({},"#".concat(n,"-confirm-btn"),{click:function(){"function"==typeof e.onConfirm&&e.onConfirm(),t.close(n)}}),"#".concat(n,"-cancel-btn"),{click:function(){"function"==typeof e.onCancel&&e.onCancel(),t.close(n)}})}),this.setContent(n,"<p>".concat(e.message||"","</p>"),"vdm-modal__confirmation-content"),this.open(n),n}},{key:"createAlertModal",value:function(e){var t=this,n="".concat(i.default.MODAL.CONTAINER.name(),"--alert-").concat(Date.now()),r=e.type?"".concat(i.default.UTILITY.ALERT," ").concat(i.default.UTILITY.ALERT_PREFIX).concat(e.type):"".concat(i.default.UTILITY.ALERT," ").concat(i.default.UTILITY.ALERT_INFO);this.createModal({id:n,title:e.title||"Alert",contentId:"".concat(i.default.MODAL.CONTAINER.name(),"__alert-content"),contentClass:i.default.UTILITY.PADDING_3.name(),footerButtons:[{id:"".concat(n,"-ok-btn"),text:e.buttonText||"OK",class:"".concat(i.default.MODAL.CLOSE.name()," ").concat(i.default.UTILITY.BUTTON.name()," ").concat(i.default.UTILITY.BUTTON_PRIMARY.name())}],events:f({},"#".concat(n,"-ok-btn"),{click:function(r){"function"==typeof e.onClose&&e.onClose(r),t.close(n)}})});var o='\n            <div class="'.concat(r,' mb-0">\n                ').concat(e.message||"","\n            </div>\n        ");return this.setContent(n,o,"".concat(i.default.MODAL.CONTAINER.name(),"__alert-content")),this.open(n),n}},{key:"destroy",value:function(){try{this.activeModal&&this.close(this.activeModal),this.modals={},this.activeModal=null,r.Debug.log("ModalManager: Destroyed",null,2)}catch(e){r.Debug.error("ModalManager: Error during destroy",e,1)}}}],u=[{key:"getInstance",value:function(){return b||(b=new t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})),b}}],o&&h(n.prototype,o),u&&h(n,u),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,u}(o.BaseSingleton)},"./src/components/navigator/ConflictNavigator.js":(e,t,n)=>{n.r(t),n.d(t,{ConflictNavigator:()=>f});var r=n("./src/utils/Debug.js"),o=n("./src/utils/NavigationUtils.js"),i=n("./src/constants/Selectors.js");function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function l(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return c(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,d(r.key),r)}}function d(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}var f=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.navigator=t,this.diffViewer=t.diffViewer},t=[{key:"_getUnresolvedChunkInfo",value:function(){var e=Array.from(document.querySelectorAll('[data-chunk-id]:not([data-chunk-id=""])')).filter((function(e){return e.classList.contains(i.default.STATUS.UNRESOLVED.name())}));if(0===e.length)return r.Debug.log("ConflictNavigator: No unresolved elements found",null,2),{unresolvedChunkIds:[],count:0};var t=l(new Set(e.map((function(e){return e.getAttribute("data-chunk-id")}))));return r.Debug.log("ConflictNavigator: Found ".concat(t.length," unresolved chunks"),null,3),{unresolvedChunkIds:t,count:t.length}}},{key:"navigateToFirstConflict",value:function(){var e=this._getUnresolvedChunkInfo(),t=e.unresolvedChunkIds;if(0===e.count)return r.Debug.log("ConflictNavigator: No unresolved chunks found",null,2),!1;var n=this.diffViewer.chunkManager.chunks.findIndex((function(e){return t.includes(String(e.id))}));return n>=0?(r.Debug.log("ConflictNavigator: Navigating to first unresolved chunk at index ".concat(n),null,2),this.navigator.navigateToChunk(n)):(r.Debug.log("ConflictNavigator: No matching chunk found",null,2),!1)}},{key:"navigateToNextConflict",value:function(){var e=this.navigator.currentChunkIndex;r.Debug.log("ConflictNavigator: Current chunk index is ".concat(e),null,3);var t=this._getUnresolvedChunkInfo(),n=t.unresolvedChunkIds;if(0===t.count)return r.Debug.log("ConflictNavigator: No unresolved chunks found",null,2),!1;var o=this.diffViewer.chunkManager.chunks,i=this._findNextChunkIndex(o,n,e);return i>=0?(r.Debug.log("ConflictNavigator: Navigating to next unresolved chunk at index ".concat(i),null,2),this.navigator.navigateToChunk(i)):(r.Debug.log("ConflictNavigator: No matching chunk found",null,2),!1)}},{key:"_findNextChunkIndex",value:function(e,t,n){var r=this._createChunkIndexMap(e,t);if(0===r.size)return-1;var o,i=Array.from(r.values()).sort((function(e,t){return e-t})),a=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(i);try{for(a.s();!(o=a.n()).done;){var l=o.value;if(l>n)return l}}catch(e){a.e(e)}finally{a.f()}return i[0]}},{key:"navigateToPrevConflict",value:function(){var e=this.navigator.currentChunkIndex,t=this._getUnresolvedChunkInfo(),n=t.unresolvedChunkIds;if(0===t.count)return r.Debug.log("ConflictNavigator: No unresolved chunks found",null,2),!1;var o=this.diffViewer.chunkManager.chunks,i=this._findPrevChunkIndex(o,n,e);return i>=0?(r.Debug.log("ConflictNavigator: Navigating to previous unresolved chunk at index ".concat(i),null,2),this.navigator.navigateToChunk(i)):(r.Debug.log("ConflictNavigator: No matching chunk found",null,2),!1)}},{key:"_findPrevChunkIndex",value:function(e,t,n){var r=this._createChunkIndexMap(e,t);if(0===r.size)return-1;for(var o=Array.from(r.values()).sort((function(e,t){return e-t})),i=o.length-1;i>=0;i--)if(o[i]<n)return o[i];return o[o.length-1]}},{key:"_createChunkIndexMap",value:function(e,t){var n=new Map;return e.forEach((function(e,r){e&&e.id&&t.includes(String(e.id))&&n.set(String(e.id),r)})),n}},{key:"navigateToChunk",value:function(e){this.navigator.currentChunkIndex=e;var t=this.diffViewer.chunkManager.chunkElements[e];if(!t)return r.Debug.warn("ConflictNavigator: Cannot scroll - chunk ".concat(e," not found"),null,2),!1;r.Debug.log("ConflictNavigator: Navigating to chunk ".concat(e),null,2);var n=t.closest(i.default.DIFF.PANE_CONTENT);return n?(o.NavigationUtils.scrollElementIntoView(t,n),o.NavigationUtils.addHighlightEffect(t,2e3),this.navigator.navigationCounter.updateCounter(),r.Debug.log("ConflictNavigator: Navigation complete",null,2),!0):(r.Debug.warn("ConflictNavigator: Cannot navigate - chunk ".concat(e," parent not found"),null,2),!1)}}],t&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}()},"./src/components/navigator/NavigationCounter.js":(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,i(r.key),r)}}function i(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}n.r(t),n.d(t,{NavigationCounter:()=>a});var a=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.navigator=t,this.counterElement=null,this.prevButton=null,this.nextButton=null},(t=[{key:"setCounterElement",value:function(e){this.counterElement=e}},{key:"setButtons",value:function(e,t){this.prevButton=e,this.nextButton=t}},{key:"updateCounter",value:function(){var e=this;if(!this.counterElement)return[];var t=this.navigator.diffViewer.chunkManager.chunks,n=this.navigator.diffViewer.chunkManager.selections,r=0,o=0,i=[];if(t.forEach((function(e,t){e.conflict&&!n[e.id]&&(i.push(t),r++)})),this.navigator.currentChunkIndex>=0){var a=i.findIndex((function(t){return t>=e.navigator.currentChunkIndex}));-1!==a&&(o=a+1)}return 0===r?(this.counterElement.textContent="",this.counterElement.title="All conflicts resolved!"):(this.counterElement.textContent="".concat(o||1,"/").concat(r),this.counterElement.title="".concat(r," conflicts remaining")),this.prevButton&&this.nextButton&&(this.prevButton.disabled=0===r,this.nextButton.disabled=0===r),i}}])&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}()},"./src/components/navigator/NavigationUIBuilder.js":(e,t,n)=>{n.r(t),n.d(t,{NavigationUIBuilder:()=>c});var r=n("./src/utils/Debug.js"),o=n("./src/utils/DOMUtils.js"),i=n("./src/constants/Selectors.js");function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}var c=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.navigator=t},(t=[{key:"createNavigationUI",value:function(){r.Debug.log("NavigationUIBuilder: Creating navigation UI",null,2);var e=document.querySelector(i.default.NAVIGATION.CONTAINER);if(e)r.Debug.log("NavigationUIBuilder: Using existing navigation container",null,2),e.innerHTML="",this._createControls(e);else{r.Debug.log("NavigationUIBuilder: No navigation container found, creating one",null,2);var t=document.querySelectorAll(i.default.DIFF.PANE);if(!t||0===t.length)return r.Debug.warn("NavigationUIBuilder: No diff panes found to append navigation container"),null;(e=document.createElement("div")).className=i.default.NAVIGATION.CONTAINER.name(),this._createControls(e),t[0].parentNode&&t[0].parentNode.insertBefore(e,t[0])}return{counter:document.getElementById(i.default.NAVIGATION.COUNTER.name()),prevButton:document.getElementById(i.default.NAVIGATION.PREV_BUTTON.name()),nextButton:document.getElementById(i.default.NAVIGATION.NEXT_BUTTON.name())}}},{key:"_createControls",value:function(e){var t=this,n=document.createElement("div");n.className=i.default.NAVIGATION.NAV_CHUNK.name();var a=document.createElement("span");a.id=i.default.NAVIGATION.COUNTER.name(),a.className=i.default.NAVIGATION.COUNTER_ELEMENT.name();var l=document.createElement("button");l.id=i.default.NAVIGATION.PREV_BUTTON.name(),l.classList.add(i.default.UTILITY.BUTTON.name(),i.default.UTILITY.BUTTON_FLAT.name(),i.default.UTILITY.BUTTON_SMALL.name()),l.innerHTML=o.DOMUtils.getIconHtml("chevron-up"),l.title="Previous change",l.addEventListener("click",(function(){return t.navigator.navigateToPrevConflict()}));var s=document.createElement("button");s.id=i.default.NAVIGATION.NEXT_BUTTON.name(),s.classList.add(i.default.UTILITY.BUTTON.name(),i.default.UTILITY.BUTTON_FLAT.name(),i.default.UTILITY.BUTTON_SMALL.name()),s.innerHTML=o.DOMUtils.getIconHtml("chevron-down"),s.title="Next change",s.addEventListener("click",(function(){return t.navigator.navigateToNextConflict()})),n.appendChild(l),n.appendChild(a),n.appendChild(s),e.appendChild(n),r.Debug.log("NavigationUIBuilder: Navigation controls created",null,2)}},{key:"destroy",value:function(){var e=document.getElementById(i.default.NAVIGATION.PREV_BUTTON.name()),t=document.getElementById(i.default.NAVIGATION.NEXT_BUTTON.name());if(e){var n=e.cloneNode(!0);e.parentNode.replaceChild(n,e)}if(t){var o=t.cloneNode(!0);t.parentNode.replaceChild(o,t)}r.Debug.log("NavigationUIBuilder: Event handlers removed",null,2)}}])&&l(e.prototype,t),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}()},"./src/components/syntax/CopyButton.js":(e,t,n)=>{n.r(t),n.d(t,{CopyButton:()=>d});var r=n("./src/utils/Debug.js"),o=n("./src/utils/DOMUtils.js"),i=n("./src/components/modal/ModalManager.js"),a=n("./src/utils/TranslationManager.js"),l=n("./src/constants/Selectors.js");function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function u(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}var d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t=e,s=[{key:"addCopyButtonsToPreview",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.default.MODAL.PREVIEW_CONTENT_ID.name(),n=a.TranslationManager.getInstance(),i=o.DOMUtils.getElement(t);if(!i){var s=document.getElementById(t),c=document.querySelector("#"+t);return r.Debug.log("CopyButton: Alternative container lookup results",{getElementById:!!s,querySelector:!!c},2),r.Debug.warn("CopyButton: Preview container not found",null,2),!1}var u=i.querySelectorAll("pre");return u&&0!==u.length?(u.forEach((function(t){if(!t.querySelector(l.default.COPY.BUTTON)){var i=o.DOMUtils.createElement("button",null,l.default.COPY.BUTTON.name(),{type:"button",title:n.get("copyCode")});i.innerHTML='<span class="'.concat(l.default.COPY.ICON.name(),'"></span><span class="').concat(l.default.COPY.TEXT.name(),'">').concat(n.get("copy"),"</span>"),t.style.position="relative";var a=t.querySelector("code");a?t.insertBefore(i,a):t.appendChild(i),i.addEventListener("click",(function(n){n.preventDefault(),n.stopPropagation();var o,a=t.querySelector("code");a&&(e._sourceCodeElement=a,a.hasAttribute("data-original-code")?(o=e._decodeHTMLEntities(a.getAttribute("data-original-code")),r.Debug.log("CopyButton: Using original code from attribute",null,3)):(o=(o=a.textContent||"").replace(/\n\n+/g,"\n"),r.Debug.log("CopyButton: Using text content from code element",null,3)),r.Debug.log("CopyButton: Text length: "+o.length,null,3),e._showManualCopyModal(o),e._showProcessingState(i))}))}})),r.Debug.log("CopyButton: Added copy buttons to ".concat(u.length," code blocks"),null,2),!0):(r.Debug.log("CopyButton: No code blocks found in preview",null,3),!1)}},{key:"_showProcessingState",value:function(e){e.classList.add(l.default.COPY.PROCESSING.name());var t=e.querySelector(".".concat(l.default.COPY.TEXT.name()));t&&(t.textContent="Open Copy Dialog..."),setTimeout((function(){e.classList.remove(l.default.COPY.PROCESSING.name()),t&&(t.textContent="Copy")}),1e3)}},{key:"_showCopiedState",value:function(e){e.classList.add(l.default.COPY.COPIED.name());var t=e.querySelector(".".concat(l.default.COPY.TEXT.name()));t&&(t.textContent="Copied!"),setTimeout((function(){e.classList.remove(l.default.COPY.COPIED.name()),t&&(t.textContent="Copy")}),2e3)}},{key:"_showManualCopyModal",value:function(e){var t=i.ModalManager.getInstance(),n=t.createCopyModal(e);t.open(n),r.Debug.log("CopyButton: Showing manual copy modal",null,2)}},{key:"_showCopyFailure",value:function(e){e.innerHTML=o.DOMUtils.getIconHtml("exclamation-triangle",{classes:l.default.UTILITY.MARGIN_END_2.name()})+"Copy Failed",e.classList.remove(l.default.UTILITY.BUTTON_PRIMARY.name(),l.default.UTILITY.BUTTON_SUCCESS.name()),e.classList.add(l.default.UTILITY.BUTTON_DANGER.name()),setTimeout((function(){e.innerHTML=o.DOMUtils.getIconHtml("copy",{classes:l.default.UTILITY.MARGIN_END_2.name()})+"Try Again",e.classList.remove(l.default.UTILITY.BUTTON_DANGER.name()),e.classList.add(l.default.UTILITY.BUTTON_PRIMARY.name())}),2e3)}},{key:"_decodeHTMLEntities",value:function(e){if(!e)return"";var t=document.createElement("textarea");return t.innerHTML=e,t.value}}],(n=null)&&c(t.prototype,n),s&&c(t,s),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,s}()},"./src/components/viewer/BrowserUIManager.js":(e,t,n)=>{n.r(t),n.d(t,{BrowserUIManager:()=>u});var r=n("./src/utils/Debug.js"),o=n("./src/constants/Selectors.js"),i=n("./src/utils/DOMUtils.js"),a=n("./src/utils/TranslationManager.js");function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c(r.key),r)}}function c(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l(t)?t:t+""}var u=function(){return e=function e(t){var n,o,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&t.options?(this.diffViewer=t,this.options=t.options):(this.diffViewer=null,this.options=t||{}),this.container=null,this.elements={themeSwitcher:null,diffContainer:null,mergeControls:null},this.translationManager=a.TranslationManager.getInstance();var l=!(null===(n=window.diffConfig)||void 0===n||!n.translations),s=!(null===(o=this.options)||void 0===o||!o.translations);i=this.translationManager.isInitialized()?"TranslationManager":l?"window.diffConfig":s?"options":"none";var c=this.translationManager.getLanguage();r.Debug.log('BrowserUIManager: Created with "'.concat(c,'" translations from ').concat(i),this.translationManager.getAllTranslations(),2)},t=[{key:"setDiffViewer",value:function(e){return!(!e||!e.options||(this.diffViewer=e,this.options=e.options,r.Debug.log("BrowserUIManager: Updated DiffViewer reference",null,3),0))}},{key:"getTranslations",value:function(){var e,t;return this.translationManager&&this.translationManager.isInitialized()?(r.Debug.log("BrowserUIManager: Using translations from TranslationManager",this.translationManager.getAllTranslations(),3),this.translationManager.getAllTranslations()):null!==(e=window.diffConfig)&&void 0!==e&&e.translations&&"object"===l(window.diffConfig.translations)?(r.Debug.log("BrowserUIManager: Auto-initializing TranslationManager from window.diffConfig",window.diffConfig.translations,3),this.translationManager.initialize(window.diffConfig.lang||"en",window.diffConfig.translations),this.translationManager.getAllTranslations()):null!==(t=this.options)&&void 0!==t&&t.translations&&"object"===l(this.options.translations)?(r.Debug.log("BrowserUIManager: Using translations from local options",this.options.translations,3),this.options.translations):(r.Debug.log("BrowserUIManager: No translations found, using empty object",null,3),{})}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.default.CONTAINER.WRAPPER;return r.Debug.log("BrowserUIManager: Initializing UI components",null,2),this.container=document.querySelector(e),this.container?(this.generateDiffContainer(),this.generateThemeSwitcher(),this.generateMergeControls(),r.Debug.log("BrowserUIManager: UI components generated",null,2),!0):(r.Debug.error("BrowserUIManager: Container element not found",null,2),!1)}},{key:"generateThemeSwitcher",value:function(){r.Debug.log("BrowserUIManager: Generating theme switcher",null,3);var e=o.default.THEME.SWITCHER.name(),t=o.default.THEME.LOADING_INDICATOR.name(),n=o.default.THEME.TOGGLE.name(),a=document.createElement("div");a.id=e,a.className="".concat(o.default.UTILITY.FLEX.name()," ").concat(o.default.UTILITY.JUSTIFY_CONTENT_BETWEEN.name()," ").concat(o.default.UTILITY.PADDING_2.name()),a.style.cssText="display: none !important; position: relative;";var l=document.createElement("div");l.className=o.default.THEME_SWITCHER.WRAPPER.name();var s=i.DOMUtils.getIconHtml("sun",{classes:o.default.UTILITY.MARGIN_END_2.name()}),c=i.DOMUtils.getIconHtml("moon",{classes:o.default.UTILITY.MARGIN_START_2.name()});l.innerHTML='\n            <span class="'.concat(o.default.THEME_SWITCHER.LABEL.name()," ").concat(o.default.UTILITY.MARGIN_END_2.name(),'">').concat(s,'</span>\n            <label class="').concat(o.default.THEME_SWITCHER.CONTROL.name(),'" for="').concat(n,'">\n                <input type="checkbox" id="').concat(n,'" checked>\n                <span class="').concat(o.default.THEME_SWITCHER.SLIDER.name()," ").concat(o.default.THEME_SWITCHER.SLIDER_ROUND.name(),'"></span>\n            </label>\n            <span class="').concat(o.default.THEME_SWITCHER.LABEL.name()," ").concat(o.default.UTILITY.MARGIN_START_2.name(),' ">').concat(c,"</span>\n        "),a.appendChild(l);var u=document.createElement("div");u.id=t,u.style.display="none",u.style.position="absolute",u.style.zIndex="1000",this.container.appendChild(a),document.body.appendChild(u),this.elements.themeSwitcher=a,this.elements.themeLoadingContainer=u;var d=new MutationObserver((function(e){e.forEach((function(){var e=document.getElementById(o.default.DIFF.CONTAINER.name());e&&e.classList.contains("loaded")&&(a&&(a.style.cssText="display: flex !important; position: relative;"),d.disconnect())}))})),f=this.container||document.body;d.observe(f,{subtree:!0,childList:!0,attributes:!0,attributeFilter:["class"]})}},{key:"generateDiffContainer",value:function(){var e=this;r.Debug.log("BrowserUIManager: Generating diff container",null,3);var t=o.default.DIFF.CONTAINER.name(),n=o.default.DIFF.VIEWER.name(),i=document.createElement("div");i.id=t;var a=document.createElement("div");a.id=n,a.className=o.default.UTILITY.MARGIN_TOP_2.name(),a.style.display="none",new MutationObserver((function(t){t.forEach((function(t){"attributes"===t.type&&"style"===t.attributeName&&"none"!==a.style.display&&e.elements.themeSwitcher&&(e.elements.themeSwitcher.style.display="flex")}))})).observe(a,{attributes:!0}),i.appendChild(a),this.container.appendChild(i),this.elements.diffContainer=i;var l=document.getElementById(n);r.Debug.log("BrowserUIManager: Viewer element (".concat(n,") created successfully: ").concat(!!l),null,3)}},{key:"generateMergeControls",value:function(){r.Debug.log("BrowserUIManager: Generating merge controls structure only",null,3);var e=this.getTranslations(),t=o.default.MERGE.BUTTON_PREVIEW.name(),n=o.default.MERGE.DESTINATION_TOGGLE.name(),a=o.default.MERGE.TOGGLE_ICON.name(),l=o.default.MERGE.TOGGLE_TEXT.name(),s=o.default.MERGE.DESTINATION_DROPDOWN.name(),c=o.default.MERGE.BUTTON_APPLY.name(),u=document.createElement("div");u.className="".concat(o.default.MERGE.CONTROLS_ACTIONS.name()," ").concat(o.default.UTILITY.FLEX.name()," ").concat(o.default.UTILITY.ALIGN_ITEMS_CENTER.name()," ").concat(o.default.UTILITY.JUSTIFY_CONTENT_BETWEEN.name()," ").concat(o.default.UTILITY.MARGIN_Y_2.name()," ").concat(o.default.UTILITY.PADDING_2.name());var d=document.createElement("div"),f=document.createElement("button");f.id=t,f.className="".concat(o.default.UTILITY.BUTTON.name()," ").concat(o.default.UTILITY.BUTTON_INFO.name()),f.type="button",f.innerHTML="".concat(i.DOMUtils.getIconHtml("eye",{classes:o.default.UTILITY.MARGIN_END_2.name()})).concat(e.preview||"Preview"),d.appendChild(f);var h=document.createElement("div");h.className="".concat(o.default.UTILITY.FLEX.name()," ").concat(o.default.UTILITY.ALIGN_ITEMS_CENTER.name());var g=document.createElement("div");g.className="".concat(o.default.UTILITY.FLEX.name()," ").concat(o.default.UTILITY.ALIGN_ITEMS_STRETCH.name()," ").concat(o.default.UTILITY.MARGIN_END_3.name()),g.classList.add("vdm-input-group");var m=document.createElement("button");m.id=n,m.className="".concat(o.default.UTILITY.BUTTON.name()," ").concat(o.default.UTILITY.BUTTON_FLAT.name()," vdm-input-group__prepend"),m.type="button";var p=document.createElement("span");p.id=a,p.innerHTML=i.DOMUtils.getIconHtml("plus-circle",{classes:o.default.UTILITY.MARGIN_END_2.name()});var v=document.createElement("span");v.id=l,v.setAttribute("title",e.saveToOriginalTooltip||"Replace the current file with merged content"),v.textContent=e.saveToOriginal||"Save to original",m.appendChild(p),m.appendChild(v);var y=document.createElement("select");y.id=s,y.className="".concat(o.default.UTILITY.FORM_SELECT.name()," vdm-input-group__append vdm-select-auto-width"),g.appendChild(m),g.appendChild(y);var b=document.createElement("button");b.id=c,b.className="".concat(o.default.UTILITY.BUTTON.name()," ").concat(o.default.UTILITY.BUTTON_PRIMARY.name()," vdm-nowrap"),b.type="button",b.innerHTML=(e.applyMerge||"Apply Merge")+" ".concat(i.DOMUtils.getIconHtml("file-circle-plus",{classes:o.default.UTILITY.MARGIN_START_2.name()})),b.style.whiteSpace="nowrap",b.style.display="inline-flex",b.style.alignItems="center",h.appendChild(g),h.appendChild(b),u.appendChild(d),u.appendChild(h),this.container.appendChild(u),this.elements.mergeControls=u,r.Debug.log("BrowserUIManager: Created empty merge controls structure (options will be populated by MergeUIController)",null,2)}},{key:"showThemeLoading",value:function(){var e=this.elements.themeLoadingContainer,t=this.elements.themeSwitcher;if(e&&t){var n=a.TranslationManager.getInstance().get("loadingTheme","Loading theme...");e.innerHTML='\n                <div class="vdm-theme__loading-spinner"></div>\n                <span>'.concat(n,"</span>\n            "),e.className="vdm-theme__loading-indicator";var r=t.getBoundingClientRect(),o=window.pageYOffset||document.documentElement.scrollTop;e.style.top=r.top+o-40+"px",e.style.display="flex"}}},{key:"hideThemeLoading",value:function(){var e=this.elements.themeLoadingContainer;e&&(e.style.display="none")}},{key:"destroy",value:function(){r.Debug.log("BrowserUIManager: Destroying UI components",null,2),this.hideThemeLoading(),this.elements.themeSwitcher&&this.elements.themeSwitcher.parentNode&&this.elements.themeSwitcher.parentNode.removeChild(this.elements.themeSwitcher),this.elements.diffContainer&&this.elements.diffContainer.parentNode&&this.elements.diffContainer.parentNode.removeChild(this.elements.diffContainer),this.elements.mergeControls&&this.elements.mergeControls.parentNode&&this.elements.mergeControls.parentNode.removeChild(this.elements.mergeControls),this.elements={themeSwitcher:null,diffContainer:null,mergeControls:null},this.diffViewer=null,r.Debug.log("BrowserUIManager: UI components destroyed",null,2)}}],t&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}()},"./src/components/viewer/IconMarkerManager.js":(e,t,n)=>{n.r(t),n.d(t,{IconMarkerManager:()=>s});var r=n("./src/utils/Debug.js"),o=n("./src/constants/Selectors.js");function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l(r.key),r)}}function l(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}var s=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.diffViewer=t},(t=[{key:"initializeIconMarkers",value:function(){var e=this,t=this._calculateCellHeight();document.documentElement.style.setProperty("--cell-height","".concat(t,"px")),this.diffViewer.container.querySelectorAll(o.default.DIFF.PANE).forEach((function(t){e._setupIconColumn(t)})),this._updateIconColumnHeights(),this._setupIconHeightUpdater()}},{key:"_setupIconColumn",value:function(e){var t=this,n=e.querySelector(o.default.DIFF.PANE_CONTENT);if(n){var i=n.querySelector(o.default.DIFF.TABLE_WRAPPER);if(i){var a=e.querySelector(":scope > ".concat(o.default.ICONS.COLUMN));a||((a=document.createElement("div")).className=o.default.ICONS.COLUMN.name(),e.appendChild(a));var l=n.querySelectorAll("".concat(o.default.DIFF.LINE_CONTENT,'[data-chunk-id]:not([data-chunk-id=""]), ')+"".concat(o.default.DIFF.LINE_PLACEHOLDER,'[data-chunk-id]:not([data-chunk-id=""]), ')+"".concat(o.default.DIFF.LINE_CONTENT_EMPTY,'[data-chunk-id]:not([data-chunk-id=""])')),s={};if(l.forEach((function(e){var t=e.dataset.chunkId;s[t]||(s[t]=[]),s[t].push(e)})),Object.keys(s).forEach((function(e){s[e].sort((function(e,t){return parseInt(e.dataset.lineId.split("-").pop(),10)-parseInt(t.dataset.lineId.split("-").pop(),10)}));var n=s[e][0];n&&t._createIconMarker(n,a)})),i){var c=i.scrollHeight;e.dataset.tableHeight=c}n.addEventListener("scroll",(function(){requestAnimationFrame((function(){a.style.transform="translateY(-".concat(n.scrollTop,"px)")})),n.scrollLeft>0?e.classList.add(o.default.STATUS.SCROLLED.name()):e.classList.remove(o.default.STATUS.SCROLLED.name())}),{passive:!0}),a.style.transform="translateY(-".concat(n.scrollTop,"px)")}else r.Debug.warn("IconMarkerManager: Code table wrapper not found",null,2)}}},{key:"_createIconMarker",value:function(e,t){var n=e.dataset.lineId;if(n){var r=t.querySelector("".concat(o.default.ICONS.MARKER,'[data-line-id="').concat(n,'"]'));if(!r){(r=document.createElement("div")).className=o.default.ICONS.MARKER.name(),e.classList.contains(o.default.DIFF.LINE_PLACEHOLDER.name())&&r.classList.add(o.default.ICONS.MARKER_PLACEHOLDER.name()),r.dataset.lineId=n;var i=n.split("-").pop();r.dataset.iconIndex=i,r.style.setProperty("--icon-index",i),t.appendChild(r)}}}},{key:"_calculateCellHeight",value:function(){var e=this.diffViewer.container.querySelectorAll(o.default.CODE.LINE_NUMBER);if(!e||0===e.length)return r.Debug.log("IconMarkerManager: No line number cells found, using default height",null,2),20.5;for(var t=[],n=Math.min(5,e.length),i=0;i<n;i++)t.push(e[i].getBoundingClientRect().height);t.sort((function(e,t){return e-t}));var a=t[Math.floor(t.length/2)];return r.Debug.log("IconMarkerManager: Sampled heights: ".concat(t.join(", "),", using median: ").concat(a,"px"),null,3),a}},{key:"_setupIconHeightUpdater",value:function(){var e,t=this;window.addEventListener("resize",(function(){clearTimeout(e),e=setTimeout((function(){t._updateIconColumnHeights()}),100)})),this._updateIconColumnHeights()}},{key:"_updateIconColumnHeights",value:function(){var e=this.diffViewer.container.querySelectorAll(o.default.DIFF.PANE),t={};e.forEach((function(e){var n=e.querySelector(o.default.DIFF.PANE_CONTENT),r=e.querySelector(o.default.ICONS.COLUMN),i=null==n?void 0:n.querySelector(o.default.DIFF.TABLE_WRAPPER);if(r&&i){var a=i.scrollHeight,l=parseInt(r.style.height)||0;Math.abs(l-a)>5&&(r.style.height="".concat(a,"px"),t[e.dataset.side||"pane"]=a)}})),Object.keys(t).length>0&&r.Debug.log("IconMarkerManager: Updated icon column heights:",t,3)}}])&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}()},"./src/components/viewer/LayoutManager.js":(e,t,n)=>{n.r(t),n.d(t,{LayoutManager:()=>d});var r=n("./src/utils/Debug.js"),o=n("./src/utils/DOMUtils.js"),i=n("./src/constants/Selectors.js");function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function l(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function u(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}var d=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.diffViewer=t,this.paneWidth=0},(t=[{key:"initialize",value:function(){var e=this;this.updatePaneWidth(),window.addEventListener("resize",(function(){e.updatePaneWidth()})),this.setupWidthObserver(),r.Debug.log("LayoutManager: Initialized",null,2)}},{key:"updatePaneWidth",value:function(){var e=o.DOMUtils.getElements(i.default.DIFF.PANE,this.diffViewer.container);if(e&&0!==e.length){var t=e[0].clientWidth;t!==this.paneWidth&&(this.paneWidth=t,this.setCSSVariable("--diff-pane-width","".concat(this.paneWidth,"px")),r.Debug.log("LayoutManager: Updated pane width: ".concat(this.paneWidth,"px"),null,3))}}},{key:"setCSSVariable",value:function(e,t){document.documentElement.style.setProperty(e,t)}},{key:"setupWidthObserver",value:function(){var e=this,t=new MutationObserver((function(t){var n,r=!1,o=l(t);try{for(o.s();!(n=o.n()).done;){var i=n.value;if("childList"===i.type||"attributes"===i.type&&("style"===i.attributeName||"class"===i.attributeName)){r=!0;break}}}catch(e){o.e(e)}finally{o.f()}r&&e.updatePaneWidth()}));t.observe(this.diffViewer.container,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["style","class"]}),this.observer=t,r.Debug.log("LayoutManager: Width observer setup complete",null,2)}},{key:"destroy",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null),r.Debug.log("LayoutManager: Destroyed",null,2)}}])&&c(e.prototype,t),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}()},"./src/components/viewer/ScrollSynchronizer.js":(e,t,n)=>{n.r(t),n.d(t,{ScrollSynchronizer:()=>s});var r=n("./src/utils/Debug.js"),o=n("./src/constants/Selectors.js");function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l(r.key),r)}}function l(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}var s=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.diffViewer=t,this.isSyncing=!1},(t=[{key:"setupSynchronizedScrolling",value:function(){var e=this,t=this.diffViewer.container.querySelectorAll(o.default.DIFF.PANE);if(2===t.length){var n=t[0],i=t[1],a=n.querySelector(o.default.DIFF.PANE_CONTENT),l=i.querySelector(o.default.DIFF.PANE_CONTENT);a&&l?(this.leftContent=a,this.rightContent=l,a.addEventListener("scroll",(function(){return e._handleScroll(a,l)}),{passive:!0}),l.addEventListener("scroll",(function(){return e._handleScroll(l,a)}),{passive:!0}),window.addEventListener("resize",(function(){e._updateScrollState(a),e._updateScrollState(l)})),r.Debug.log("ScrollSynchronizer: Horizontal and vertical scroll synchronization set up",null,2)):r.Debug.log("ScrollSynchronizer: Could not find all required scrolling elements",null,2)}else r.Debug.log("ScrollSynchronizer: Could not find both diff panes. Found: ".concat(t.length),null,2)}},{key:"_handleScroll",value:function(e,t){var n=this;this.isSyncing||(this.isSyncing=!0,t.scrollTop=e.scrollTop,t.scrollLeft=e.scrollLeft,this._updateScrollState(e),setTimeout((function(){n.isSyncing=!1}),10))}},{key:"_updateScrollState",value:function(e){var t=e.classList.contains(o.default.STATUS.SCROLLED.name()),n=e.scrollLeft>0;t!==n&&(n?e.classList.add(o.default.STATUS.SCROLLED.name()):e.classList.remove(o.default.STATUS.SCROLLED.name()))}}])&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}()},"./src/constants/Selectors.js":(e,t,n)=>{n.r(t),n.d(t,{default:()=>s});var r=n("./src/utils/Debug.js");function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}var i={get:function(e,t){return"name"===t?function(){return e.startsWith("#")||e.startsWith(".")?e.substring(1):(r.Debug.warn("Selector '".concat(e,"' doesn't start with '.' or '#' but name() was called on it")),e)}:"toString"===t||t===Symbol.toPrimitive?function(){return String(e)}:e[t]}},a=function(e){var t={};for(var n in e)"object"===o(e[n])&&null!==e[n]?t[n]=a(e[n]):"string"==typeof e[n]?t[n]=new Proxy(Object(String(e[n])),i):t[n]=e[n];return t},l={CODE:{LINE_CONTENT:".vdm-code__line-content",LINE_EMPTY:".vdm-code__line--empty",LINE_NUMBER:".vdm-code__line-number",TABLE:".vdm-code__table"},CONTAINER:{ROOT:"#vdm-container",WRAPPER:"#vdm-container__wrapper"},COPY:{BUTTON:".vdm-code__copy-btn",COPIED:".vdm-code__copy--copied",ICON:".vdm-code__copy-icon",MODAL:{ACTIONS:".vdm-modal__copy-actions",BUTTON:".vdm-modal__copy-btn",DIALOG:".vdm-modal__copy-dialog",INSTRUCTIONS:".vdm-modal__copy-instructions",TEXTAREA:".vdm-modal__copy-textarea-container",TEXTAREA_ELEM:".vdm-modal__copy-textarea"},PROCESSING:".vdm-code__copy--processing",TEXT:".vdm-code__copy-text"},DIFF:{CHECK_ALL_BTN:".vdm-check-all-btn",CHUNK:".vdm-diff__chunk",CHUNK_SELECTED:".vdm-diff__chunk--selected",CHUNK_UNSELECTED:".vdm-diff__chunk--unselected",CONTAINER:"#vdm-diff__container",CONTENT_WRAPPER:"#vdm-diff__content-wrapper",LINE_ADD:".vdm-diff__line--add",LINE_CONTENT:".vdm-code__line-content",LINE_CONTENT_EMPTY:".vdm-code__line-content--empty",LINE_DELETE:".vdm-diff__line--delete",LINE_PLACEHOLDER:".vdm-diff__line--placeholder",LINE_REPLACE_LEFT:".vdm-diff__line--replace-left",LINE_REPLACE_RIGHT:".vdm-diff__line--replace-right",PANE:".vdm-diff__pane",PANE_CONTENT:".vdm-diff__pane-content",PANE_HEADER:".vdm-pane-header",PANE_LEFT:"#vdm-diff__pane--left",PANE_RIGHT:"#vdm-diff__pane--right",PANES_CONTAINER:".vdm-diff__panes-container",PLACEHOLDER:".vdm-diff__placeholder",TABLE_WRAPPER:".vdm-diff__table-wrapper",VIEWER:"#vdm-diff__viewer"},ICONS:{COLUMN:".vdm-icon__column",MARKER:".vdm-icon__marker",MARKER_PLACEHOLDER:".vdm-icon__marker--placeholder",SELECT:".vdm-icon__select",SELECT_LEFT:".vdm-icon__select--left",SELECT_RIGHT:".vdm-icon__select--right"},LOADER:{ACTIVE:".vdm-loader--active",CONTAINER:".vdm-loader__container",FULLSCREEN:".vdm-loader--fullscreen",INDICATOR:"#vdm-loader__indicator",INLINE:".vdm-loader--inline",MAIN:"#vdm-diff__loading",SPINNER:".vdm-loader__spinner",TEXT:".vdm-loader__text",WRAPPER:".vdm-loader__wrapper"},MERGE:{BUTTON_APPLY:"#vdm-merge__button--apply",BUTTON_PREVIEW:"#vdm-merge__button--preview",CONFLICT_MODAL:"#vdm-merge__conflict-modal",CONTROLS_ACTIONS:".vdm-merge-controls__actions",DESTINATION_DROPDOWN:"#vdm-merge__destination-dropdown",DESTINATION_TOGGLE:"#vdm-merge__destination-toggle",GET_MERGED_RESULT_BTN:"#vdm-merge__get-merged-result-btn",MODAL:"#vdm-merge__modal",PREVIEW_CONTENT:"#vdm-merge__preview-content",PREVIEW_MODAL:"#vdm-merge__preview-modal",TOGGLE_ICON:"#vdm-merge-controls__toggle-icon",TOGGLE_TEXT:"#vdm-merge-controls__toggle-text"},MODAL:{BACKDROP:"#vdm-modal-backdrop",CLOSE:".vdm-modal__close",CLOSE_BTN:".vdm-modal__close",CODE_COPY:"#vdm-modal--code-copy",CONFIRM:"#vdm-modal--confirm",CONFIRMATION_CONTENT:"#vdm-modal__confirmation-content",CONTAINER:".vdm-modal",CONTENT:".vdm-modal__content",CONTINUE_BTN:"#vdm-modal__continue-btn",COPY_CONTENT:"#vdm-modal__copy-content",FIXED_FOOTER:".vdm-modal--fixed-footer",FOOTER:".vdm-modal__footer",FULLSCREEN:".vdm-modal--fullscreen",HEADER:".vdm-modal__header",HEADER_FIXED:".vdm-modal__header--fixed",MERGE_BTN:"#vdm-modal__merge-btn",MESSAGE:"#vdm-modal__message",PREVIEW:"#vdm-modal--preview",PREVIEW_CONTENT:".vdm-modal__preview-content",PREVIEW_CONTENT_ID:"#vdm-merge__preview-content",PREVIEW_FILENAME:"#vdm-modal__preview-filename",TITLE:".vdm-modal__title"},NAVIGATION:{CONTAINER:".vdm-nav__controls",COUNTER:"#vdm-nav__counter",COUNTER_ELEMENT:".vdm-navigator__counter",HIGHLIGHT:".vdm-highlight",NAV_CHUNK:".vdm-nav__chunk",NEXT_BUTTON:"#vdm-nav__button--next",PREV_BUTTON:"#vdm-nav__button--prev"},STATUS:{LOADED:".vdm-status__loaded",RESOLVED:".vdm-status__resolved",SCROLLED:".vdm-status__scrolled-horizontally",UNRESOLVED:".vdm-status__unresolved"},THEME:{DARK:".vdm-theme--dark",LIGHT:".vdm-theme--light",LOADING_INDICATOR:"#vdm-theme__loading-indicator",MODE_PREFIX:".vdm-theme",SELECTOR:"#vdm-theme__selector",SWITCHER:"#vdm-theme-switcher",TOGGLE:"#vdm-theme__toggle"},THEME_SWITCHER:{CONTROL:".vdm-theme-switcher__control",LABEL:".vdm-theme-switcher__label",SLIDER:".vdm-theme-switcher__slider",SLIDER_ROUND:".vdm-theme-switcher__slider--round",WRAPPER:".vdm-theme-switcher__wrapper"},THEME_SELECTOR:{WRAPPER:".vdm-theme-selector__wrapper"},TOOLTIP:{ARROW:".vdm-tooltip__arrow",CONTAINER:".vdm-tooltip",CONTENT:".vdm-tooltip__content"},UTILITY:function(){var e={BUTTON:".vdm-btn",BUTTON_PRIMARY:".vdm-btn--primary",BUTTON_SECONDARY:".vdm-btn--secondary",BUTTON_INFO:".vdm-btn--info",BUTTON_SUCCESS:".vdm-btn--success",BUTTON_WARNING:".vdm-btn--warning",BUTTON_DANGER:".vdm-btn--danger",BUTTON_FLAT:".vdm-btn--flat",BUTTON_SMALL:".vdm-btn-sm",BUTTON_EXTRA_SMALL:".vdm-btn-xs",BUTTON_LARGE:".vdm-btn-lg",ALERT:".vdm-alert",ALERT_PREFIX:".vdm-alert--",ALERT_INFO:".vdm-alert--info",ALERT_SUCCESS:".vdm-alert--success",ALERT_WARNING:".vdm-alert--warning",ALERT_DANGER:".vdm-alert--danger",FORM_SELECT:".vdm-select",FORM_SELECT_SM:".vdm-select-sm",FLEX:".vdm-d-flex",FLEX_COLUMN:".vdm-flex-column",JUSTIFY_CONTENT_BETWEEN:".vdm-justify-content-between",JUSTIFY_CONTENT_CENTER:".vdm-justify-content-center",ALIGN_ITEMS_CENTER:".vdm-align-items-center",ALIGN_ITEMS_STRETCH:".vdm-align-items-stretch",PADDING_2:".vdm-p-2",PADDING_3:".vdm-p-3",MARGIN_2:".vdm-m-2",MARGIN_TOP_2:".vdm-mt-2",MARGIN_BOTTOM_2:".vdm-mb-2",MARGIN_START_1:".vdm-ms-1",MARGIN_START_2:".vdm-ms-2",MARGIN_END_2:".vdm-me-2",MARGIN_END_3:".vdm-me-3",MARGIN_X_1:".vdm-mx-1",MARGIN_Y_2:".vdm-my-2",MARGIN_END_1:".vdm-me-1"};if(window.diffConfig&&window.diffConfig.ui)try{window.diffConfig.ui.button&&(e.BUTTON="."+window.diffConfig.ui.button),window.diffConfig.ui.buttonPrimary&&(e.BUTTON_PRIMARY="."+window.diffConfig.ui.buttonPrimary),window.diffConfig.ui.buttonSecondary&&(e.BUTTON_SECONDARY="."+window.diffConfig.ui.buttonSecondary),window.diffConfig.ui.buttonInfo&&(e.BUTTON_INFO="."+window.diffConfig.ui.buttonInfo),window.diffConfig.ui.buttonSuccess&&(e.BUTTON_SUCCESS="."+window.diffConfig.ui.buttonSuccess),window.diffConfig.ui.buttonWarning&&(e.BUTTON_WARNING="."+window.diffConfig.ui.buttonWarning),window.diffConfig.ui.buttonDanger&&(e.BUTTON_DANGER="."+window.diffConfig.ui.buttonDanger),window.diffConfig.ui.buttonFlat&&(e.BUTTON_FLAT="."+window.diffConfig.ui.buttonFlat),window.diffConfig.ui.alert&&(e.ALERT="."+window.diffConfig.ui.alert),window.diffConfig.ui.alertInfo&&(e.ALERT_INFO="."+window.diffConfig.ui.alertInfo),window.diffConfig.ui.alertSuccess&&(e.ALERT_SUCCESS="."+window.diffConfig.ui.alertSuccess),window.diffConfig.ui.alertWarning&&(e.ALERT_WARNING="."+window.diffConfig.ui.alertWarning),window.diffConfig.ui.alertDanger&&(e.ALERT_DANGER="."+window.diffConfig.ui.alertDanger),r.Debug.log("Overriding UI selectors with config values",window.diffConfig.ui,2)}catch(e){r.Debug.error("Error applying UI selector overrides from config",e,1)}return e}()};const s=a(l)},"./src/data/highlightjs-languages.json":e=>{e.exports=JSON.parse('{"1c":"1c","abnf":"abnf","accesslog":"accesslog","actionscript-file":"actionscript","adb":"ada","ads":"ada","angelscript":"angelscript","as":"angelscript","apacheconf":"apache","htaccess":"apache","applescript":"applescript","arcade":"arcade","ino":"arduino","arm":"armasm","adoc":"asciidoc","aspectj":"aspectj","ahk":"autohotkey","au3":"autoit","asm":"x86asm","awk":"awk","ax":"axapta","sh":"bash","bash":"bash","zsh":"bash","bas":"basic","bnf":"bnf","bf":"brainfuck","c":"c","h":"c","cal":"cal","capnp":"capnproto","ceylon":"ceylon","icl":"clean","dcl":"clean","clj":"clojure","cljs":"clojure","cmake":"cmake","cmakein":"cmake","coffee":"coffeescript","coq":"coq","cos":"cos","cls":"cos","cpp":"cpp","cc":"cpp","cplus":"cpp","hplus":"cpp","hpp":"cpp","hh":"cpp","hxx":"cpp","cxx":"cpp","crm":"crmsh","cr":"crystal","cs":"csharp","csx":"csharp","csp":"csp","css":"css","d":"d","dart":"dart","dpr":"delphi","dfm":"delphi","pas":"delphi","pascal":"delphi","diff":"diff","patch":"diff","django":"django","jinja":"django","dns":"dns","zone":"dns","bind":"dns","dockerfile":"dockerfile","docker":"dockerfile","bat":"dos","cmd":"dos","dts":"dts","dust":"dust","dst":"dust","ebnf":"ebnf","ex":"elixir","exs":"elixir","elm":"elm","erb":"erb","erl":"erlang","hrl":"erlang","xlsx":"excel","xls":"excel","fix":"fix","flix":"flix","f":"fortran","for":"fortran","f90":"fortran","f95":"fortran","fs":"fsharp","fsi":"fsharp","fsx":"fsharp","gms":"gams","gss":"gauss","gcode":"gcode","nc":"gcode","feature":"gherkin","glsl":"glsl","vert":"glsl","frag":"glsl","gml":"gml","go":"go","golo":"golo","gradle":"gradle","graphql":"graphql","gql":"graphql","groovy":"groovy","haml":"haml","handlebars":"handlebars","hbs":"handlebars","hs":"haskell","hx":"haxe","hsp":"hsp","http":"http","https":"http","hy":"hy","i7":"inform7","ini":"ini","toml":"ini","editorconfig":"ini","gitconfig":"ini","irpf90":"irpf90","isbl":"isbl","java":"java","js":"javascript","mjs":"javascript","cli":"jboss-cli","json":"json","jl":"julia","kt":"kotlin","kts":"kotlin","lasso":"lasso","lassoscript":"lasso","tex":"latex","latex":"latex","ldif":"ldif","leaf":"leaf","less":"less","lisp":"lisp","cl":"lisp","el":"lisp","lc":"livecodeserver","ls":"livescript","ll":"llvm","lsl":"lsl","lua":"lua","mk":"makefile","mak":"makefile","make":"makefile","md":"markdown","mkdown":"markdown","mkd":"markdown","mathematica":"mathematica","mma":"mathematica","wl":"mathematica","matlab":"matlab","m":"matlab","maxima":"maxima","mel":"mel","mercury":"mercury","mips":"mipsasm","mizar":"mizar","mojolicious":"mojolicious","monkey":"monkey","moon":"moonscript","n1ql":"n1ql","nt":"nestedtext","nginx":"nginx","nginxconf":"nginx","nim":"nim","nix":"nix","nsi":"nsis","nsh":"nsis","mm":"objectivec","ml":"ocaml","scad":"openscad","oxygene":"oxygene","parser3":"parser3","pl":"perl","pm":"perl","perl":"perl","pf":"pf","pfconf":"pf","pgsql":"pgsql","postgres":"pgsql","postgresql":"pgsql","php":"php","php3":"php","php4":"php","php5":"php","php7":"php","phps":"php","phtml":"php-template","txt":"plaintext","text":"plaintext","pony":"pony","ps1":"powershell","psm1":"powershell","psd1":"powershell","pde":"processing","profile":"profile","prolog":"prolog","plg":"prolog","properties":"properties","prop":"properties","proto":"protobuf","pp":"puppet","pb":"purebasic","pbi":"purebasic","py":"python","pyw":"python","pyc":"python","pyd":"python","pyo":"python","q":"q","qml":"qml","r":"r","rsource":"r","re":"reasonml","rei":"reasonml","rib":"rib","roboconf":"roboconf","routeros":"routeros","mikrotik":"routeros","rsl":"rsl","rb":"ruby","ruby":"ruby","gemspec":"ruby","podspec":"ruby","thor":"ruby","irb":"ruby","rs":"rust","rust":"rust","sas":"sas","scala":"scala","sc":"scala","scm":"scheme","ss":"scheme","sci":"scilab","sce":"scilab","scss":"scss","shellscript":"shell","fish":"shell","smali":"smali","st":"smalltalk","sml":"sml","sqf":"sqf","sql":"sql","stan":"stan","ado":"stata","do":"stata","p21":"step21","step":"step21","stp":"step21","styl":"stylus","subunit":"subunit","swift":"swift","taggerscript":"taggerscript","tap":"tap","tcl":"tcl","tk":"tcl","thrift":"thrift","tp":"tp","twig":"twig","ts":"typescript","tsx":"typescript","vala":"vala","vb":"vbnet","vbs":"vbscript","v":"verilog","sv":"verilog","svh":"verilog","vhd":"vhdl","vhdl":"vhdl","vim":"vim","wasm":"wasm","wren":"wren","nasm":"x86asm","xl":"xl","tao":"xl","xml":"xml","xhtml":"xml","rss":"xml","atom":"xml","xjb":"xml","xsd":"xml","xsl":"xml","plist":"xml","svg":"xml","html":"xml","htm":"xml","xq":"xquery","xquery":"xquery","yml":"yaml","yaml":"yaml"}')},"./src/data/highlightjs-themes.json":e=>{e.exports=JSON.parse('{"a11y":{"dark":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/a11y-dark.min.css","light":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/a11y-light.min.css"},"atom-one":{"dark":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/atom-one-dark.min.css","light":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/atom-one-light.min.css"},"gradient":{"dark":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/gradient-dark.min.css","light":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/gradient-light.min.css"},"isbl-editor":{"dark":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/isbl-editor-dark.min.css","light":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/isbl-editor-light.min.css"},"kimbie":{"dark":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/kimbie-dark.min.css","light":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/kimbie-light.min.css"},"nnfx":{"dark":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/nnfx-dark.min.css","light":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/nnfx-light.min.css"},"panda-syntax":{"dark":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/panda-syntax-dark.min.css","light":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/panda-syntax-light.min.css"},"paraiso":{"dark":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/paraiso-dark.min.css","light":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/paraiso-light.min.css"},"qtcreator":{"dark":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/qtcreator-dark.min.css","light":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/qtcreator-light.min.css"},"stackoverflow":{"dark":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/stackoverflow-dark.min.css","light":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/stackoverflow-light.min.css"},"tokyo-night":{"dark":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/tokyo-night-dark.min.css","light":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/tokyo-night-light.min.css"},"rose-pine":{"dark":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/rose-pine-moon.min.css","light":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/rose-pine-dawn.min.css"},"atelier-cave":{"dark":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/atelier-cave.min.css","light":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/atelier-cave-light.min.css"},"atelier-dune":{"dark":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/atelier-dune.min.css","light":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/atelier-dune-light.min.css"},"atelier-estuary":{"dark":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/atelier-estuary.min.css","light":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/atelier-estuary-light.min.css"},"atelier-forest":{"dark":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/atelier-forest.min.css","light":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/atelier-forest-light.min.css"},"atelier-heath":{"dark":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/atelier-heath.min.css","light":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/atelier-heath-light.min.css"},"atelier-lakeside":{"dark":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/atelier-lakeside.min.css","light":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/atelier-lakeside-light.min.css"},"atelier-plateau":{"dark":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/atelier-plateau.min.css","light":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/atelier-plateau-light.min.css"},"atelier-savanna":{"dark":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/atelier-savanna.min.css","light":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/atelier-savanna-light.min.css"},"atelier-seaside":{"dark":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/atelier-seaside.min.css","light":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/atelier-seaside-light.min.css"},"atelier-sulphurpool":{"dark":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/atelier-sulphurpool.min.css","light":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/atelier-sulphurpool-light.min.css"},"brush-trees":{"dark":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/brush-trees-dark.min.css","light":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/brush-trees.min.css"},"classic":{"dark":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/classic-dark.min.css","light":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/classic-light.min.css"},"default-base16":{"dark":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/default-dark.min.css","light":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/default-light.min.css"},"edge":{"dark":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/edge-dark.min.css","light":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/edge-light.min.css"},"equilibrium":{"dark":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/equilibrium-dark.min.css","light":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/equilibrium-light.min.css"},"equilibrium-gray":{"dark":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/equilibrium-gray-dark.min.css","light":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/equilibrium-gray-light.min.css"},"eva":{"dark":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/eva-dim.min.css","light":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/eva.min.css"},"google":{"dark":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/google-dark.min.css","light":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/google-light.min.css"},"grayscale-base16":{"dark":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/grayscale-dark.min.css","light":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/grayscale-light.min.css"},"gruvbox-hard":{"dark":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/gruvbox-dark-hard.min.css","light":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/gruvbox-light-hard.min.css"},"gruvbox-medium":{"dark":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/gruvbox-dark-medium.min.css","light":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/gruvbox-light-medium.min.css"},"gruvbox-soft":{"dark":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/gruvbox-dark-soft.min.css","light":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/gruvbox-light-soft.min.css"},"harmonic16":{"dark":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/harmonic16-dark.min.css","light":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/harmonic16-light.min.css"},"heetch":{"dark":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/heetch-dark.min.css","light":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/heetch-light.min.css"},"horizon":{"dark":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/horizon-dark.min.css","light":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/horizon-light.min.css"},"humanoid":{"dark":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/humanoid-dark.min.css","light":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/humanoid-light.min.css"},"ia":{"dark":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/ia-dark.min.css","light":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/ia-light.min.css"},"material":{"dark":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/material-darker.min.css","light":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/material-lighter.min.css"},"one":{"dark":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/onedark.min.css","light":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/one-light.min.css"},"papercolor":{"dark":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/papercolor-dark.min.css","light":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/papercolor-light.min.css"},"solar-flare":{"dark":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/solar-flare.min.css","light":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/solar-flare-light.min.css"},"solarized":{"dark":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/solarized-dark.min.css","light":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/solarized-light.min.css"},"summerfruit":{"dark":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/summerfruit-dark.min.css","light":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/summerfruit-light.min.css"},"synth-midnight-terminal":{"dark":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/synth-midnight-terminal-dark.min.css","light":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/synth-midnight-terminal-light.min.css"},"tomorrow":{"dark":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/tomorrow-night.min.css","light":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/tomorrow.min.css"},"unikitty":{"dark":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/unikitty-dark.min.css","light":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/unikitty-light.min.css"},"windows-10":{"dark":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/windows-10.min.css","light":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/windows-10-light.min.css"},"windows-95":{"dark":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/windows-95.min.css","light":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/windows-95-light.min.css"},"windows-high-contrast":{"dark":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/windows-high-contrast.min.css","light":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/windows-high-contrast-light.min.css"},"windows-nt":{"dark":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/windows-nt.min.css","light":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/windows-nt-light.min.css"},"ros-pine-base16":{"dark":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/ros-pine-moon.min.css","light":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/ros-pine-dawn.min.css"},"silk":{"dark":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/silk-dark.min.css","light":"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/base16/silk-light.min.css"}}')},"./src/utils/AlertManager.js":(e,t,n)=>{n.r(t),n.d(t,{AlertManager:()=>y,default:()=>b});var r=n("./src/constants/Selectors.js"),o=n("./src/utils/BaseSingleton.js"),i=n("./src/utils/Debug.js"),a=n("./src/utils/TranslationManager.js");function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return(t=f(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,f(r.key),r)}}function f(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l(t)?t:t+""}function h(e,t,n){return t=m(t),function(e,t){if(t&&("object"==l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,g()?Reflect.construct(t,n||[],m(e).constructor):t.apply(e,n))}function g(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(g=function(){return!!e})()}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}var v=null,y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),h(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(t,e),n=t,o=[{key:"initialize",value:function(){this.initialized||(this.containerId="vdm-alert-container",this.activeAlert=null,this.timeoutId=null,this.container=this._ensureContainer(),this.initialized=!0,i.Debug.log("AlertManager: Initialized",null,2))}},{key:"_ensureContainer",value:function(){var e=document.getElementById(this.containerId);return e||((e=document.createElement("div")).id=this.containerId,e.className="vdm-alert-container",e.style.position="fixed",e.style.top="20px",e.style.left="50%",e.style.transform="translateX(-50%)",e.style.zIndex="9999",e.style.width="auto",e.style.maxWidth="90%",document.body.appendChild(e),i.Debug.log("AlertManager: Created alert container",null,2)),e}},{key:"showAlert",value:function(e,t){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i.Debug.log("AlertManager.showAlert called with type",t,2),i.Debug.log("AlertManager.showAlert message",e,3);var l=c(c({},{timeout:5e3,dismissable:!0,translate:!0,className:"",container:null,targetElement:null,placement:"before"}),o),s=!l.targetElement&&(l.container||this.container);i.Debug.log("AlertManager placement options",{hasTargetElement:!!l.targetElement,placement:l.placement,useContainer:!!s},3);var u=document.createElement("div"),d=r.default.UTILITY.ALERT?r.default.UTILITY.ALERT.toString().substring(1):"vdm-alert",f=d;if(t){var h="info"===t&&r.default.UTILITY.ALERT_INFO?r.default.UTILITY.ALERT_INFO.toString().substring(1):"".concat(d,"--").concat(t);f+=" ".concat(h)}l.className&&(f+=" ".concat(l.className)),u.className=f,i.Debug.log("Alert classnames",u.className,3),i.Debug.log("Alert selector values",{selectorBase:r.default.UTILITY.ALERT?r.default.UTILITY.ALERT.toString():"vdm-alert",selectorType:t?"".concat(d,"--").concat(t):"none"},3);var g=e;if(l.translate&&void 0!==a.TranslationManager){var m=a.TranslationManager.getInstance();m&&"function"==typeof m.get&&(g=m.get(e,e))}if(u.innerHTML=g,l.dismissable){var p=document.createElement("button");p.className="vdm-alert__close",p.innerHTML="&times;",p.setAttribute("aria-label","Close"),p.setAttribute("type","button"),u.appendChild(p),p.addEventListener("click",(function(){return n.hideAlert(u)})),i.Debug.log("Close button",p?"found":"not found",3)}return l.targetElement?(i.Debug.log("AlertManager: Placing alert relative to target element",{target:l.targetElement,placement:l.placement},3),"before"===l.placement?l.targetElement.parentNode.insertBefore(u,l.targetElement):"after"===l.placement&&(l.targetElement.nextSibling?l.targetElement.parentNode.insertBefore(u,l.targetElement.nextSibling):l.targetElement.parentNode.appendChild(u))):s?(s.appendChild(u),i.Debug.log("Alert appended to container",null,3)):(document.body.appendChild(u),i.Debug.log("Alert appended to body",null,3)),this.activeAlert=u,l.timeout>0&&(this.timeoutId=setTimeout((function(){n.hideAlert(u)}),l.timeout)),i.Debug.log("Returning alert element",u,3),u}},{key:"hideAlert",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null),null!=t&&t.parentNode)return t.parentNode.removeChild(t),i.Debug.log("AlertManager: Hiding specific alert",null,3),void(this.activeAlert===t&&(this.activeAlert=null));null!==(e=this.activeAlert)&&void 0!==e&&e.parentNode&&(this.activeAlert.parentNode.removeChild(this.activeAlert),this.activeAlert=null,i.Debug.log("AlertManager: Hiding active alert",null,3))}},{key:"showInfo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.showAlert(e,"info",t)}},{key:"showSuccess",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.showAlert(e,"success",t)}},{key:"showWarning",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.showAlert(e,"warning",t)}},{key:"showError",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.showAlert(e,"danger",t)}}],l=[{key:"getInstance",value:function(){return v||(v=new t).initialize(),v}}],o&&d(n.prototype,o),l&&d(n,l),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,l}(o.BaseSingleton);const b=y},"./src/utils/BaseSingleton.js":(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,i(r.key),r)}}function i(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}n.r(t),n.d(t,{BaseSingleton:()=>a});var a=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},n=[{key:"getInstance",value:function(){throw new Error("getInstance() must be implemented by subclass")}}],(t=[{key:"_isFirstInstance",value:function(e){return!e}}])&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}()},"./src/utils/ChunkUtils.js":(e,t,n)=>{n.r(t),n.d(t,{ChunkUtils:()=>m});var r=n("./src/constants/Selectors.js"),o=n("./src/utils/Debug.js");function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e,t,n){return(t=c(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c(r.key),r)}}function c(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}var u={},d={},f={},h=null,g={elementCacheHits:0,elementCacheMisses:0,iconMarkerCacheHits:0,iconMarkerCacheMisses:0,rowCacheHits:0,rowCacheMisses:0},m=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t=e,i=[{key:"clearCache",value:function(){Object.keys(u).forEach((function(e){return delete u[e]})),Object.keys(d).forEach((function(e){return delete d[e]})),Object.keys(f).forEach((function(e){return delete f[e]})),h=null,o.Debug.log("ChunkUtils: Cache cleared",null,2)}},{key:"getCacheStats",value:function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},g)}},{key:"preloadChunks",value:function(){var t=performance.now();e.clearCache(),h={byId:{},byLineId:{},allChunkIds:new Set};var n=document.querySelectorAll("".concat(r.default.DIFF.CHUNK,"[data-chunk-id]"));o.Debug.log("ChunkUtils: Preloading ".concat(n.length," chunk elements"),null,2),n.forEach((function(e){var t=e.getAttribute("data-chunk-id"),n=e.getAttribute("data-side"),r=e.getAttribute("data-line-id");if(t){if(h.allChunkIds.add(t),h.byId[t]||(h.byId[t]={elements:{all:[],left:[],right:[]},lineIds:new Set}),h.byId[t].elements.all.push(e),"left"===n?h.byId[t].elements.left.push(e):"right"===n&&h.byId[t].elements.right.push(e),r){h.byId[t].lineIds.add(r),h.byLineId[r]={chunkId:t,element:e};var o=e.closest("tr");o&&(f[e.dataset.lineId]=o)}var i="".concat(t,":both");if(u[i]||(u[i]=[]),u[i].push(e),n){var a="".concat(t,":").concat(n);u[a]||(u[a]=[]),u[a].push(e)}}}));var i=document.querySelectorAll("".concat(r.default.ICONS.MARKER,"[data-line-id]"));o.Debug.log("ChunkUtils: Preloading ".concat(i.length," icon markers"),null,2),i.forEach((function(e){var t=e.getAttribute("data-line-id");if(t&&(d[t]=e,h.byLineId[t])){var n=h.byLineId[t].chunkId;h.byId[n].iconMarkers||(h.byId[n].iconMarkers=[]),h.byId[n].iconMarkers.push(e)}}));var a=performance.now()-t;return o.Debug.log("ChunkUtils: Preloaded ".concat(Object.keys(h.byId).length," chunks in ").concat(a.toFixed(2),"ms"),null,2),h}},{key:"getAllChunkIds",value:function(){return h||e.preloadChunks(),Array.from(h.allChunkIds)}},{key:"sortElementsByLineNumber",value:function(e){return Array.from(e).sort((function(e,t){var n,r;return parseInt((null===(n=e.dataset.lineId)||void 0===n?void 0:n.split("-").pop())||"0",10)-parseInt((null===(r=t.dataset.lineId)||void 0===r?void 0:r.split("-").pop())||"0",10)}))}},{key:"getChunkElements",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e)return[];var n,o,i="".concat(e,":").concat(t||"both");return u[i]?(g.elementCacheHits++,u[i]):(g.elementCacheMisses++,h&&h.byId[e]?(n="left"===t?h.byId[e].elements.left:"right"===t?h.byId[e].elements.right:h.byId[e].elements.all,u[i]=n,n):(o=t?Array.from(document.querySelectorAll("".concat(r.default.DIFF.CHUNK,'[data-chunk-id="').concat(e,'"][data-side="').concat(t,'"]'))):Array.from(document.querySelectorAll("".concat(r.default.DIFF.CHUNK,'[data-chunk-id="').concat(e,'"]'))),u[i]=o,o))}},{key:"getChunkIconMarkers",value:function(t){if(!t)return[];if(h&&h.byId[t])return h.byId[t].iconMarkers||[];var n=e.getChunkElements(t),r=[];return n.forEach((function(t){var n=t.dataset.lineId;if(n){var o=e.getIconMarker(n);o&&r.push(o)}})),r}},{key:"getIconMarker",value:function(e){if(!e)return null;if(d[e])return g.iconMarkerCacheHits++,d[e];if(g.iconMarkerCacheMisses++,h&&h.byLineId[e]){var t=h.byLineId[e].chunkId;if(h.byId[t].iconMarkers){var n=h.byId[t].iconMarkers.find((function(t){return t.getAttribute("data-line-id")===e}));if(n)return d[e]=n,n}}var o=document.querySelector("".concat(r.default.ICONS.MARKER,'[data-line-id="').concat(e,'"]'));return o&&(d[e]=o),o}},{key:"getParentRow",value:function(e){if(!e)return null;var t=e.dataset.lineId;if(t&&f[t])return g.rowCacheHits++,f[t];g.rowCacheMisses++;var n=e.closest("tr");return t&&n&&(f[t]=n),n}},{key:"generateFileContent",value:function(e){return e.filter((function(e){return"content"===e.type})).map((function(e){return e.line})).join("\n")}}],(n=null)&&s(t.prototype,n),i&&s(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,i}()},"./src/utils/ConfigUtils.js":(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,i(r.key),r)}}function i(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}n.r(t),n.d(t,{ConfigUtils:()=>a});var a=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},n=[{key:"mergeConfigurations",value:function(){for(var e={},t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];for(var i=0,a=n;i<a.length;i++){var l=a[i];if(l&&"object"===r(l))for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&("object"!==r(e[s])||null===e[s]||Array.isArray(e[s])||"object"!==r(l[s])||null===l[s]||Array.isArray(l[s])?e[s]=l[s]:e[s]=this.mergeConfigurations(e[s],l[s]))}return e}},{key:"validateConfig",value:function(e){var t={isValid:!0,error:null};return e?(e.diffData?e.diffData.chunks||(t.isValid=!1,t.error="Missing chunks in diff data",e.diffData.chunks=[],console.warn("ConfigUtils: Missing chunks in diffData",{diffDataKeys:Object.keys(e.diffData)})):(t.isValid=!1,t.error="No diff data in configuration",e.diffData={old:[],new:[],chunks:[]},console.warn("ConfigUtils: Missing diffData in configuration",{configKeys:Object.keys(e),oldData:e.old?"present":"missing",newData:e.new?"present":"missing"})),t):(t.isValid=!1,t.error="No configuration found - window.diffConfig is not defined",t)}},{key:"getConfigSummary",value:function(e){var t;return{debug:!(null==e||!e.debug),chunks:Array.isArray(null==e||null===(t=e.diffData)||void 0===t?void 0:t.chunks)?e.diffData.chunks.length:0}}},{key:"getFileExtension",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"php";return e&&e.split(".").pop()||t}},{key:"getThemePreferences",value:function(e){var t,n;return{mode:localStorage.getItem("diffViewerTheme")||(null==e||null===(t=e.theme)||void 0===t?void 0:t.defaultMode)||"light",family:localStorage.getItem("diffViewerThemeFamily")||(null==e||null===(n=e.theme)||void 0===n?void 0:n.defaultFamily)||"atom-one"}}}],(t=null)&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}()},"./src/utils/DOMUtils.js":(e,t,n)=>{n.r(t),n.d(t,{DOMUtils:()=>m});var r=n("./src/constants/Selectors.js"),o=n("./src/utils/Debug.js"),i=n("./src/utils/IconRegistry.js"),a=n("./src/utils/AlertManager.js");function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||u(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){if(e){if("string"==typeof e)return d(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}function h(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l(t)?t:t+""}var g=new Map,m=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t=e,l=[{key:"setupButtonHandler",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=document.getElementById(e);if(!r)return o.Debug.warn("DOMUtils: Button ".concat(e," not found"),null,2),null;var i=Date.now();if(r._handlerId&&r._handlerId!==i){var a=r.cloneNode(!0);return r.parentNode&&r.parentNode.replaceChild(a,r),o.Debug.log("DOMUtils: Cleaned up previous handler for ".concat(n||e),null,2),t(a),a._handlerId=i,{element:a,id:i}}return r._handlerId=i,t(r),{element:r,id:i}}},{key:"getElement",value:function(e){if(!e)return o.Debug.error("DOMUtils.getElement: Empty ID provided",null,1),null;if(g.has(e))return g.get(e);var t=document.getElementById(e);if(!t)try{t=e.includes("#")||e.includes(".")?document.querySelector(e):document.querySelector("#"+e)}catch(e){o.Debug.error("DOMUtils.getElement: Error with selector: ".concat(e.message),null,1)}return t?g.set(e,t):o.Debug.error("DOMUtils.getElement: Element with ID '".concat(e,"' not found"),null,1),t}},{key:"updateToggleButton",value:function(e,t,n){var r=t.toggleBtn,i=t.toggleIcon,a=t.toggleText,l=n.firstOption,s=n.secondOption,c=n.firstClass,u=n.secondClass,d=n.firstText,f=n.secondText,h=n.firstTooltip,g=n.secondTooltip;r&&i&&a?(o.Debug.log("DOMUtils: Updating toggle button to ".concat(e),null,2),e===l?(i.className=c,a.textContent=d,r.title=h||d,r.setAttribute("data-value",l)):e===s?(i.className=u,a.textContent=f,r.title=g||f,r.setAttribute("data-value",s)):o.Debug.warn("DOMUtils: Invalid toggle value: ".concat(e))):o.Debug.warn("DOMUtils: Missing elements for toggle button update")}},{key:"showMessage",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"info",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},l=document.getElementById(e);if(!l)return o.Debug.warn("DOMUtils: Container #".concat(e," not found for message"),null,2),!1;i._iconName;var s=i.className,c=void 0===s?"mt-5":s,u=i.elementId,d=void 0===u?"":u,f=i.keepExisting,h=void 0!==f&&f,g=a.default.getInstance();h||(l.innerHTML="");var m="";try{r.default.UTILITY&&r.default.UTILITY.HAS_ICON?m=r.default.UTILITY.HAS_ICON.name():(m="vdm-has-icon",o.Debug.log("DOMUtils: Using fallback icon class because Selectors.UTILITY.HAS_ICON is undefined",null,2))}catch(e){m="vdm-has-icon",o.Debug.warn("DOMUtils: Error getting icon class, using fallback",e,2)}var p=g.showAlert(t,n,{timeout:0,translate:!1,className:"".concat(m," ").concat(c)});return d&&(p.id=d),l.appendChild(p),!0}},{key:"toggleVisibility",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"block",r=document.getElementById(e);return r?(r.style.display=t?n:"none",!0):(o.Debug.warn("DOMUtils: Element #".concat(e," not found for visibility toggle"),null,2),!1)}},{key:"toggleClass",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=document.getElementById(e);return r?(n?r.classList.add(t):r.classList.remove(t),!0):(o.Debug.warn("DOMUtils: Element #".concat(e," not found for class toggle"),null,2),!1)}},{key:"createElement",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=document.createElement(n);return r&&(a.id=r),o&&(e=Array.isArray(o)?o:"string"==typeof o?o.split(/\s+/).filter(Boolean):[]).length>0&&(t=a.classList).add.apply(t,c(e)),Object.entries(i).forEach((function(e){var t=s(e,2),n=t[0],r=t[1];null!=r&&a.setAttribute(n,r)})),a}},{key:"createAndAppendElement",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i="string"==typeof n?document.getElementById(n):n;if(!i)return o.Debug.warn("DOMUtils: Container not found for createAndAppendElement",null,2),null;var a=r.id,l=void 0===a?null:a,s=r.classes,c=void 0===s?[]:s,u=r.attributes,d=void 0===u?{}:u,f=r.content,h=void 0===f?null:f,g=e.createElement(t,l,c,d);return null!==h&&("string"==typeof h?g.innerHTML=h:h instanceof Node&&g.appendChild(h)),i.appendChild(g),g}},{key:"setContent",value:function(e,t){var n=document.getElementById(e);return n?(n.innerHTML=t,!0):(o.Debug.warn("DOMUtils: Element #".concat(e," not found for content update"),null,2),!1)}},{key:"getElements",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,n="string"==typeof t?document.getElementById(t):t;return n?n.querySelectorAll(e):(o.Debug.warn("DOMUtils: Context not found for selector: ".concat(e),null,2),null)}},{key:"appendContent",value:function(e,t){var n=document.getElementById(e);return n?(n.insertAdjacentHTML("beforeend",t),!0):(o.Debug.warn("DOMUtils: Element #".concat(e," not found for content append"),null,2),!1)}},{key:"removeElement",value:function(e){var t="string"==typeof e?document.getElementById(e):t;return null!=t&&t.parentNode?(t.parentNode.removeChild(t),!0):(o.Debug.warn("DOMUtils: Element not found or has no parent for removal",null,2),!1)}},{key:"setupEventHandlers",value:function(t,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=o.context,a=void 0===i?document:i,l=o.removeExisting,c=void 0!==l&&l,u=o.styles,d=void 0===u?null:u,f=e.getElements(t,a);return f?(c&&f.forEach((function(e){e.removeEventListener(n,r)})),f.forEach((function(e){e.addEventListener(n,r),d&&Object.entries(d).forEach((function(t){var n=s(t,2),r=n[0],o=n[1];e.style[r]=o}))})),f.length):0}},{key:"createIcon",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i.IconRegistry.createIcon(e,t)}},{key:"getIconHtml",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i.IconRegistry.getIcon(e,t)}}],(n=null)&&f(t.prototype,n),l&&f(t,l),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,l}()},"./src/utils/Debug.js":(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l(r.key),r)}}function l(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}n.r(t),n.d(t,{Debug:()=>s});var s=new(function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.enabled=!1,this.logHistory=[],this.maxLogHistory=100,this.prefix="[DiffViewer]",this.logLevel=1},t=[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"[DiffViewer]",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.enabled=e,this.prefix=t,this.logLevel=e?n:1,console.error("Debug initialized",{enabled:this.enabled,level:this.logLevel}),this.log("Debug initialized",{enabled:this.enabled,level:this.logLevel})}},{key:"shouldLog",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return((null===(e=window.diffConfig)||void 0===e?void 0:e.debug)||this.enabled)&&t<=this.logLevel}},{key:"log",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.shouldLog(n)&&(null!==t?(console.log("".concat(this.prefix," ").concat(e),t),this._addToHistory("log",[e,t],n)):(console.log("".concat(this.prefix," ").concat(e)),this._addToHistory("log",[e],n)))}},{key:"warn",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;null!==t?(console.warn("".concat(this.prefix," ").concat(e),t),this._addToHistory("warn",[e,t],n)):(console.warn("".concat(this.prefix," ").concat(e)),this._addToHistory("warn",[e],n))}},{key:"error",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;null!==t?(console.error("".concat(this.prefix," ").concat(e),t),this._addToHistory("error",[e,t],n)):(console.error("".concat(this.prefix," ").concat(e)),this._addToHistory("error",[e],n))}},{key:"getLogHistory",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.logLevel;return e>=this.logLevel?o(this.logHistory):this.logHistory.filter((function(t){return t.level<=e}))}},{key:"clearLogHistory",value:function(){this.logHistory=[],this.log("Log history cleared")}},{key:"_addToHistory",value:function(e,t,n){this.logHistory.push({timestamp:new Date,type:e,message:t,level:n}),this.logHistory.length>this.maxLogHistory&&this.logHistory.shift()}}],t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}())},"./src/utils/DiffConfigManager.js":(e,t,n)=>{n.r(t),n.d(t,{DiffConfigManager:()=>p,default:()=>E});var r=n("./src/utils/Debug.js");function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return(t=c(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c(r.key),r)}}function c(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}function u(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function d(e,t){return e.get(h(e,t))}function f(e,t,n){return e.set(h(e,t),n),n}function h(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}var g=new WeakMap,m=new WeakSet,p=function(){function e(){var t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),u(t=this,n=m),n.add(t),function(e,t,n){u(e,t),t.set(e,n)}(this,g,{}),"undefined"!=typeof window&&window.diffConfig?(r.Debug.log("DiffConfigManager: Initializing with existing window.diffConfig",window.diffConfig,2),f(g,this,a({},window.diffConfig))):f(g,this,{debug:!1,logLevel:1,old:{},new:{}}),h(m,this,v).call(this)}return t=e,n=[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.Debug.log("DiffConfigManager: Initializing with config",e,2),f(g,this,a(a({},d(g,this)),e)),h(m,this,v).call(this)}},{key:"getDiffConfig",value:function(){return d(g,this)}},{key:"setDiffConfig",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.Debug.log("DiffConfigManager: Setting new diffConfig",e,2),f(g,this,a({},e)),h(m,this,v).call(this)}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.Debug.log("DiffConfigManager: Resetting diffConfig with overrides",e,2),f(g,this,a({debug:!1,logLevel:1,old:{},new:{}},e)),h(m,this,v).call(this)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.Debug.log("DiffConfigManager: Updating diffConfig with",e,3),e&&e.config&&"object"===o(e.config)?(r.Debug.log("DiffConfigManager: Extracting nested config property",e.config,3),f(g,this,h(m,this,y).call(this,d(g,this),e.config))):f(g,this,h(m,this,y).call(this,d(g,this),e)),h(m,this,v).call(this)}},{key:"set",value:function(e,t){r.Debug.log("DiffConfigManager: Setting ".concat(e),t,3),d(g,this)[e]=t,h(m,this,v).call(this)}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e in d(g,this)?d(g,this)[e]:t}},{key:"remove",value:function(e){e in d(g,this)&&(r.Debug.log("DiffConfigManager: Removing ".concat(e),null,3),delete d(g,this)[e],h(m,this,v).call(this))}}],i=[{key:"getInstance",value:function(){return w._||(w._=new e),w._}}],n&&s(t.prototype,n),i&&s(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,i}();function v(){"undefined"!=typeof window&&(window.diffConfig=a({},d(g,this)))}function y(e,t){var n=this,r=a({},e);return h(m,this,b).call(this,e)&&h(m,this,b).call(this,t)&&Object.keys(t).forEach((function(o){h(m,n,b).call(n,t[o])?r[o]=o in e?h(m,n,y).call(n,e[o],t[o]):t[o]:r[o]=t[o]})),r}function b(e){return e&&"object"===o(e)&&!Array.isArray(e)}var w={_:null};const E=p},"./src/utils/EndpointDiscovery.js":(e,t,n)=>{n.r(t),n.d(t,{EndpointDiscovery:()=>M});var r=n("./src/utils/Debug.js"),o=n("./src/utils/BaseSingleton.js");function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return l(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function s(){s=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},l=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var i=t&&t.prototype instanceof b?t:b,a=Object.create(i.prototype),l=new j(r||[]);return o(a,"_invoke",{value:S(e,n,l)}),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=f;var g="suspendedStart",m="suspendedYield",p="executing",v="completed",y={};function b(){}function w(){}function E(){}var T={};d(T,l,(function(){return this}));var I=Object.getPrototypeOf,C=I&&I(I(_([])));C&&C!==n&&r.call(C,l)&&(T=C);var M=E.prototype=b.prototype=Object.create(T);function L(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function D(e,t){function n(o,a,l,s){var c=h(e[o],e,a);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==i(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,l,s)}),(function(e){n("throw",e,l,s)})):t.resolve(d).then((function(e){u.value=e,l(u)}),(function(e){return n("throw",e,l,s)}))}s(c.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function S(t,n,r){var o=g;return function(i,a){if(o===p)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var l=r.delegate;if(l){var s=O(l,r);if(s){if(s===y)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===g)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=p;var c=h(t,n,r);if("normal"===c.type){if(o=r.done?v:m,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(o=v,r.method="throw",r.arg=c.arg)}}}function O(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,O(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=h(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function _(t){if(t||""===t){var n=t[l];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(i(t)+" is not iterable")}return w.prototype=E,o(M,"constructor",{value:E,configurable:!0}),o(E,"constructor",{value:w,configurable:!0}),w.displayName=d(E,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,d(e,u,"GeneratorFunction")),e.prototype=Object.create(M),e},t.awrap=function(e){return{__await:e}},L(D.prototype),d(D.prototype,c,(function(){return this})),t.AsyncIterator=D,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new D(f(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},L(M),d(M,u,"Generator"),d(M,l,(function(){return this})),d(M,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=_,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return l.type="throw",l.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],l=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;N(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:_(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function c(e,t,n,r,o,i,a){try{var l=e[i](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){c(i,r,o,a,l,"next",e)}function l(e){c(i,r,o,a,l,"throw",e)}a(void 0)}))}}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,f(r.key),r)}}function f(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}function h(e,t,n){return t=m(t),function(e,t){if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,g()?Reflect.construct(t,n||[],m(e).constructor):t.apply(e,n))}function g(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(g=function(){return!!e})()}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function v(e,t,n){y(e,t),t.set(e,n)}function y(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function b(e,t,n){return e.set(E(e,t),n),n}function w(e,t){return e.get(E(e,t))}function E(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}var T=new WeakMap,I=new WeakMap,C=new WeakSet,M=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return e=h(this,t,[].concat(i)),y(n=e,r=C),r.add(n),v(e,T,null),v(e,I,null),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(t,e),n=t,o=[{key:"discoverEndpoint",value:(c=u(s().mark((function e(){var t,n,o,i,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!w(T,this)){e.next=3;break}return r.Debug.log("EndpointDiscovery: Using cached API endpoint",w(T,this),2),e.abrupt("return",w(T,this));case 3:if(e.prev=3,null===(t=window.diffConfig)||void 0===t||!t.apiEndpoint){e.next=8;break}return r.Debug.log("EndpointDiscovery: Using configured API endpoint",window.diffConfig.apiEndpoint,2),b(T,this,window.diffConfig.apiEndpoint),e.abrupt("return",w(T,this));case 8:if(!(n=E(C,this,L).call(this))){e.next=13;break}return r.Debug.log("EndpointDiscovery: Determined API endpoint from script location",n,2),b(T,this,n),e.abrupt("return",w(T,this));case 13:return r.Debug.log("EndpointDiscovery: Discovering API endpoint from endpoint-config.php",null,2),o=E(C,this,D).call(this),r.Debug.log("EndpointDiscovery: Fetching from",o,2),e.next=18,fetch(o);case 18:if((i=e.sent).ok){e.next=21;break}throw new Error("Failed to fetch endpoint config: ".concat(i.statusText));case 21:return e.next=23,i.json();case 23:if(a=e.sent,r.Debug.log("EndpointDiscovery: Endpoint discovery response",a,2),void 0===(null==a?void 0:a.apiEndpoint)){e.next=31;break}return b(T,this,a.apiEndpoint),r.Debug.log("EndpointDiscovery: Successfully discovered API endpoint",w(T,this),1),e.abrupt("return",w(T,this));case 31:throw new Error("Invalid endpoint config response: apiEndpoint not found");case 32:e.next=40;break;case 34:return e.prev=34,e.t0=e.catch(3),r.Debug.log("EndpointDiscovery: Error discovering endpoint",e.t0,1),b(T,this,"./api/"),r.Debug.log("EndpointDiscovery: Using fallback endpoint",w(T,this),1),e.abrupt("return",w(T,this));case 40:case"end":return e.stop()}}),e,this,[[3,34]])}))),function(){return c.apply(this,arguments)})},{key:"getEndpoint",value:(l=u(s().mark((function e(t){var n,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w(T,this)){e.next=13;break}if(!w(I,this)){e.next=6;break}return e.next=4,w(I,this);case 4:e.next=13;break;case 6:return b(I,this,this.discoverEndpoint()),e.prev=7,e.next=10,w(I,this);case 10:return e.prev=10,b(I,this,null),e.finish(10);case 13:if(t){e.next=15;break}return e.abrupt("return",w(T,this));case 15:return(n={ajaxDiffMerge:"ajax-diff-merge.php",diffProcessor:"diff-processor.php",getFileContent:"get-file-content.php",endpointsConfig:"endpoint-config.php",endpoints:"endpoints-config.php"}[t])||(n=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()+".php"),o=w(T,this).endsWith("/")?w(T,this):w(T,this)+"/",r.Debug.log("EndpointDiscovery: Resolved ".concat(t," to endpoint"),o+n,2),e.abrupt("return",o+n);case 21:case"end":return e.stop()}}),e,this,[[7,,10,13]])}))),function(e){return l.apply(this,arguments)})},{key:"getApiUrl",value:(a=u(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getEndpoint();case 2:return n=e.sent,e.abrupt("return","".concat(n).concat(t));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})}],i=[{key:"getInstance",value:function(){return S._||(S._=new t),S._}}],o&&d(n.prototype,o),i&&d(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,i,a,l,c}(o.BaseSingleton);function L(){try{var e,t=document.querySelectorAll("script"),n=null,o=a(t);try{for(o.s();!(e=o.n()).done;){var i=e.value;if(i.src&&(i.src.includes("diff-viewer.js")||i.src.includes("diff-viewer.min.js"))){n=i.src;break}}}catch(e){o.e(e)}finally{o.f()}if(!n)return null;var l=n.substring(0,n.lastIndexOf("/")+1);return l.endsWith("/dist/")&&(l=l.substring(0,l.length-5)),"".concat(l,"api/")}catch(e){return r.Debug.log("EndpointDiscovery: Error determining endpoint from script",e,2),null}}function D(){var e=window.location.href.substring(0,window.location.href.lastIndexOf("/")+1);return e.includes("/diff-viewer/")?"".concat(e.substring(0,e.lastIndexOf("/diff-viewer/")),"api/endpoint-config.php"):"".concat(e,"api/endpoint-config.php")}var S={_:null}},"./src/utils/IconRegistry.js":(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,i(r.key),r)}}function i(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}n.r(t),n.d(t,{IconRegistry:()=>a});var a=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},n=[{key:"getIcon",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.classes,r=void 0===n?"":n,o=t.width,i=void 0===o?16:o,a=t.height,l=void 0===a?16:a,s=t.title,c=void 0===s?"":s,u=t.ariaHidden,d=void 0===u||u,f=this._getIconPathData(e);if(!f)return console.warn("Icon not found: ".concat(e)),"";var h=c?"<title>".concat(c,"</title>"):"";return'<svg\n            class="vdm-icon '.concat(r,'"\n            width="').concat(i,'"\n            height="').concat(l,'"\n            viewBox="').concat(f.viewBox||"0 0 512 512",'"\n            ').concat(d?'aria-hidden="true"':'role="img"','\n            focusable="false"\n        >\n            ').concat(h,"\n            ").concat(f.paths,"\n        </svg>")}},{key:"_getIconPathData",value:function(e){return{"chevron-up":{viewBox:"0 0 512 512",paths:'<path d="M233.4 105.4c12.5-12.5 32.8-12.5 45.3 0l192 192c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L256 173.3 86.6 342.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l192-192z"/>'},"chevron-down":{viewBox:"0 0 512 512",paths:'<path d="M233.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L256 338.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l192 192z"/>'},eye:{viewBox:"0 0 576 512",paths:'<path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z"/>'},sun:{viewBox:"0 0 512 512",paths:'<path d="M361.5 1.2c5 2.1 8.6 6.6 9.6 11.9L391 121l107.9 19.8c5.3 1 9.8 4.6 11.9 9.6s1.5 10.7-1.6 15.2L446.9 256l62.3 90.3c3.1 4.5 3.7 10.2 1.6 15.2s-6.6 8.6-11.9 9.6L391 391 371.1 498.9c-1 5.3-4.6 9.8-9.6 11.9s-10.7 1.5-15.2-1.6L256 446.9l-90.3 62.3c-4.5 3.1-10.2 3.7-15.2 1.6s-8.6-6.6-9.6-11.9L121 391 13.1 371.1c-5.3-1-9.8-4.6-11.9-9.6s-1.5-10.7 1.6-15.2L65.1 256 2.8 165.7c-3.1-4.5-3.7-10.2-1.6-15.2s6.6-8.6 11.9-9.6L121 121 140.9 13.1c1-5.3 4.6-9.8 9.6-11.9s10.7-1.5 15.2 1.6L256 65.1 346.3 2.8c4.5-3.1 10.2-3.7 15.2-1.6zM160 256a96 96 0 1 1 192 0 96 96 0 1 1 -192 0zm224 0a128 128 0 1 0 -256 0 128 128 0 1 0 256 0z"/>'},moon:{viewBox:"0 0 384 512",paths:'<path d="M223.5 32C100 32 0 132.3 0 256S100 480 223.5 480c60.6 0 115.5-24.2 155.8-63.4c5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6c-96.9 0-175.5-78.8-175.5-176c0-65.8 36-123.1 89.3-153.3c6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z"/>'},file:{viewBox:"0 0 384 512",paths:'<path d="M0 64C0 28.7 28.7 0 64 0H224V128c0 17.7 14.3 32 32 32H384V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V64zm384 64H256V0L384 128z"/>'},"file-circle-plus":{viewBox:"0 0 576 512",paths:'<path d="M0 64C0 28.7 28.7 0 64 0H224V128c0 17.7 14.3 32 32 32H384v38.6C310.1 219.5 256 287.4 256 368c0 59.1 29.1 111.3 73.7 143.3c-3.2 .5-6.4 .7-9.7 .7H64c-35.3 0-64-28.7-64-64V64zm384 64H256V0L384 128zM288 368a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-80c-8.8 0-16 7.2-16 16v48H368c-8.8 0-16 7.2-16 16s7.2 16 16 16h48v48c0 8.8 7.2 16 16 16s16-7.2 16-16V384h48c8.8 0 16-7.2 16-16s-7.2-16-16-16H448V304c0-8.8-7.2-16-16-16z"/>'},"file-lines":{viewBox:"0 0 384 512",paths:'<path d="M64 0C28.7 0 0 28.7 0 64V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V160H256c-17.7 0-32-14.3-32-32V0H64zM256 0V128H384L256 0zM112 256H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16zm0 64H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16zm0 64H272c8.8 0 16 7.2 16 16s-7.2 16-16 16H112c-8.8 0-16-7.2-16-16s7.2-16 16-16z"/>'},"file-copy":{viewBox:"0 0 576 512",paths:'<path d="M384 480h48c20.9 0 38.7-13.4 45.3-32H416c-8.8 0-16-7.2-16-16V192c0-8.8 7.2-16 16-16h61.3C470.7 157.4 452.9 144 432 144H384V64c0-35.3-28.7-64-64-64H64C28.7 0 0 28.7 0 64V448c0 35.3 28.7 64 64 64H384zM128 64H320V144H128V64zM400 240V416H144V192H352c26.5 0 48 21.5 48 48zm176-48c0-8.8-7.2-16-16-16H432c-8.8 0-16 7.2-16 16V416c0 8.8 7.2 16 16 16H560c8.8 0 16-7.2 16-16V192z"/>'},"plus-circle":{viewBox:"0 0 512 512",paths:'<path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM232 344V280H168c-13.3 0-24-10.7-24-24s10.7-24 24-24h64V168c0-13.3 10.7-24 24-24s24 10.7 24 24v64h64c13.3 0 24 10.7 24 24s-10.7 24-24 24H280v64c0 13.3-10.7 24-24 24s-24-10.7-24-24z"/>'},"exclamation-triangle":{viewBox:"0 0 512 512",paths:'<path d="M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24V296c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"/>'},copy:{viewBox:"0 0 512 512",paths:'<path d="M272 0H396.1c12.7 0 24.9 5.1 33.9 14.1l67.9 67.9c9 9 14.1 21.2 14.1 33.9V336c0 26.5-21.5 48-48 48H272c-26.5 0-48-21.5-48-48V48c0-26.5 21.5-48 48-48zM48 128H192v64H64V448H256V416h64v48c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V176c0-26.5 21.5-48 48-48z"/>'},"check-circle":{viewBox:"0 0 512 512",paths:'<path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM369 209L241 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L335 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"/>'},"chevron-right":{viewBox:"0 0 320 512",paths:'<path d="M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"/>'},download:{viewBox:"0 0 512 512",paths:'<path d="M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32V274.7l-73.4-73.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l128 128c12.5 12.5 32.8 12.5 45.3 0l128-128c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L288 274.7V32zM64 352c-35.3 0-64 28.7-64 64v32c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V416c0-35.3-28.7-64-64-64H346.5l-45.3 45.3c-25 25-65.5 25-90.5 0L165.5 352H64zm368 56a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"/>'},"uncheck-circle":{viewBox:"0 0 512 512",paths:'<path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm0-384c13.3 0 24 10.7 24 24v112c0 13.3-10.7 24-24 24s-24-10.7-24-24V152c0-13.3 10.7-24 24-24zm-32 224a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"/>'},"info-circle":{viewBox:"0 0 512 512",paths:'<path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336h24V272H216c-13.3 0-24-10.7-24-24s10.7-24 24-24h48c13.3 0 24 10.7 24 24v88h8c13.3 0 24 10.7 24 24s-10.7 24-24 24H216c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"/>'},"exclamation-circle":{viewBox:"0 0 512 512",paths:'<path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM256 128c13.3 0 24 10.7 24 24V264c0 13.3-10.7 24-24 24s-24-10.7-24-24V152c0-13.3 10.7-24 24-24zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"/>'},"checkbox-unchecked":{viewBox:"0 0 24 24",paths:'<path d="M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"/>'},"checkbox-checked":{viewBox:"0 0 24 24",paths:'<path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>'}}[e]||null}},{key:"createIcon",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getIcon(e,t);if(!n)return null;var r=document.createElement("template");return r.innerHTML=n.trim(),r.content.firstChild}}],(t=null)&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}()},"./src/utils/LoaderManager.js":(e,t,n)=>{n.r(t),n.d(t,{LoaderManager:()=>T,default:()=>I});var r=n("./src/constants/Selectors.js"),o=n("./src/utils/Debug.js"),i=n("./src/utils/BaseSingleton.js"),a=n("./src/utils/TranslationManager.js");function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function s(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||u(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){if(e){if("string"==typeof e)return d(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return(t=p(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p(r.key),r)}}function p(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l(t)?t:t+""}function v(e,t,n){return t=b(t),function(e,t){if(t&&("object"==l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,y()?Reflect.construct(t,n||[],b(e).constructor):t.apply(e,n))}function y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(y=function(){return!!e})()}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function w(e,t){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},w(e,t)}var E=null,T=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),v(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}(t,e),n=t,i=[{key:"initialize",value:function(){this.initialized||(this.activeLoaders=new Map,this.loaderIdCounter=0,this.isMainLoaderActive=!1,this.mainLoaderId=null,this.recentlyRemovedLoaders=new Set,this.operationLog=[],this.maxLogEntries=20,this.verboseLogging=!!o.Debug.isInitialized&&o.Debug.logLevel>2,this.initialized=!0)}},{key:"_logOperation",value:function(e,t){this.operationLog.length>=this.maxLogEntries&&this.operationLog.shift(),this.operationLog.push({timestamp:(new Date).toISOString(),operation:e,details:t})}},{key:"_createLoaderElement",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e&&"string"==typeof e&&e.startsWith("$")&&a.TranslationManager.getInstance().isInitialized()){var n=e.substring(1),r=a.TranslationManager.getInstance().get(n);r&&(e=r)}var o=document.createElement("div");o.className="vdm-loader",t.fullscreen&&o.classList.add("vdm-loader--fullscreen"),t.inline&&o.classList.add("vdm-loader--inline"),t.small&&o.classList.add("vdm-loader--small"),t.container&&o.classList.add("vdm-loader--container"),t.className&&o.classList.add(t.className),t.zIndex&&(o.style.zIndex=t.zIndex);var i=document.createElement("div");if(i.className="vdm-loader__spinner",o.appendChild(i),e){var l=document.createElement("div");l.className="vdm-loader__message",l.textContent=e,o.appendChild(l)}return o}},{key:"showLoader",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Loading...",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.isMainLoaderActive&&this.mainLoaderId&&t.fullscreen)return o.Debug.log("LoaderManager: Reusing main loader for fullscreen request",{message:e},3),this.updateLoaderMessage(this.mainLoaderId,e),this.mainLoaderId;o.Debug.log("LoaderManager: Showing loader",{message:e,options:t},3);var n="loader-".concat(++this.loaderIdCounter),r=this._createLoaderElement(e,t);return r.setAttribute("data-loader-id",n),t.target&&t.target instanceof HTMLElement?("static"===window.getComputedStyle(t.target).getPropertyValue("position")&&(t.target.style.position="relative"),t.target.appendChild(r)):document.body.appendChild(r),this.activeLoaders.set(n,{element:r,target:t.target||document.body,fullscreen:!!t.fullscreen,timestamp:Date.now()}),this.recentlyRemovedLoaders.delete(n),this._logOperation("show",{id:n,message:e,type:"regular"}),setTimeout((function(){r.parentNode&&r.classList.add("vdm-loader--showing")}),10),n}},{key:"showMainLoader",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Loading...",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(o.Debug.log("LoaderManager: Showing main loader",{message:e},2),this.isMainLoaderActive&&this.mainLoaderId&&this.activeLoaders.has(this.mainLoaderId))return o.Debug.log("LoaderManager: Main loader already active, updating message",{currentId:this.mainLoaderId,message:e},2),this.updateLoaderMessage(this.mainLoaderId,e),this.mainLoaderId;this._hideAllInlineLoaders();var n=document.getElementById(r.default.LOADER.MAIN.name());if(n){n.style.display="flex",n.classList.add(r.default.LOADER.ACTIVE.name());var i=n.querySelector(".vdm-loader__message");if(i)i.textContent=e;else if(e){var a=document.createElement("div");a.className="vdm-loader__message",a.textContent=e,n.appendChild(a)}var l="main-loader-".concat(++this.loaderIdCounter);return this.activeLoaders.set(l,{element:n,target:document.body,isMainLoader:!0,timestamp:Date.now()}),this.isMainLoaderActive=!0,this.mainLoaderId=l,this.recentlyRemovedLoaders.delete(l),this._logOperation("show",{id:l,message:e,type:"main-existing"}),l}var s=this.showLoader(e,h({fullscreen:!0,className:r.default.LOADER.MAIN.name(),zIndex:9999},t)),c=this.activeLoaders.get(s);return c&&(c.isMainLoader=!0,c.element.id=r.default.LOADER.MAIN.name()),this.isMainLoaderActive=!0,this.mainLoaderId=s,this._logOperation("show",{id:s,message:e,type:"main-new"}),s}},{key:"showEarlyLoader",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Loading...",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o.Debug.isInitialized&&o.Debug.log("LoaderManager: Showing early loader",{message:e},2);var n=this.showLoader(e,h({fullscreen:!0,className:r.default.LOADER.MAIN.name(),zIndex:9999},t)),i=this.activeLoaders.get(n);return i&&(i.isMainLoader=!0,i.isEarlyLoader=!0,i.element.id=r.default.LOADER.MAIN.name()),this.isMainLoaderActive=!0,this.mainLoaderId=n,this._logOperation("show",{id:n,message:e,type:"early-loader"}),n}},{key:"adoptEarlyLoader",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.isMainLoaderActive&&this.mainLoaderId?(e&&this.updateLoaderMessage(this.mainLoaderId,e),o.Debug.isInitialized&&o.Debug.log("LoaderManager: Adopted early loader as main loader",{id:this.mainLoaderId},2),this.mainLoaderId):(o.Debug.isInitialized&&o.Debug.log("LoaderManager: No early loader to adopt, creating new main loader",null,2),this.showMainLoader(e))}},{key:"hideMainLoader",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(o.Debug.log("LoaderManager: Hiding main loader",{loaderId:e},2),e&&this.recentlyRemovedLoaders.has(e))return o.Debug.log("LoaderManager: Main loader was recently removed",{loaderId:e},2),!0;if(!this.isMainLoaderActive)return o.Debug.log("LoaderManager: Main loader not active, nothing to hide",null,2),!0;if(e&&e!==this.mainLoaderId){var t=this.activeLoaders.get(e);null!=t&&t.isMainLoader||(o.Debug.log("LoaderManager: Using stored main loader ID",{providedId:e,actualMainId:this.mainLoaderId},2),e=this.mainLoaderId)}else e||(e=this.mainLoaderId);if(!e||!this.activeLoaders.has(e)){var n=document.getElementById(r.default.LOADER.MAIN.name());return n&&(n.style.display="none",n.parentNode&&n.parentNode.removeChild(n),o.Debug.log("LoaderManager: Removed main loader by element ID",null,2)),this.isMainLoaderActive=!1,this.mainLoaderId=null,!0}var i=this._hideSpecificLoader(e);return i&&(this.recentlyRemovedLoaders.add(e),this.isMainLoaderActive=!1,this.mainLoaderId=null,this._logOperation("hide",{id:e,type:"main"})),i}},{key:"_hideAllInlineLoaders",value:function(){var e=this;o.Debug.log("LoaderManager: Hiding all inline loaders",null,3),Array.from(this.activeLoaders.entries()).filter((function(e){var t=c(e,2),n=(t[0],t[1]);return!n.isMainLoader&&!n.fullscreen})).map((function(e){return c(e,1)[0]})).forEach((function(t){e._hideSpecificLoader(t),e.recentlyRemovedLoaders.add(t),e._logOperation("hide",{id:t,type:"inline-batch"})})),document.querySelectorAll(".vdm-loader--inline").forEach((function(t){e._removeLoaderElement(t),e._logOperation("hide",{element:"untracked-inline",type:"dom-query"})}))}},{key:"hideLoader",value:function(e){var t=this;if(!e){o.Debug.log("LoaderManager: Hiding all loaders",null,3);var n=Array.from(this.activeLoaders.keys()),r=!0;return n.forEach((function(e){t._hideSpecificLoader(e)||(r=!1),t.recentlyRemovedLoaders.add(e),t._logOperation("hide",{id:e,type:"all-batch"})})),this.isMainLoaderActive=!1,this.mainLoaderId=null,r}if(this.recentlyRemovedLoaders.has(e))return o.Debug.log("LoaderManager: Loader was recently removed",{loaderId:e},2),!0;if(e===this.mainLoaderId)return this.hideMainLoader(e);o.Debug.log("LoaderManager: Hiding loader",{loaderId:e},3);var i=this._hideSpecificLoader(e);return i&&(this.recentlyRemovedLoaders.add(e),this._logOperation("hide",{id:e,type:"specific"})),i}},{key:"_hideSpecificLoader",value:function(e){var t;if(this.recentlyRemovedLoaders.has(e))return o.Debug.log("LoaderManager: Loader was recently removed (in _hideSpecificLoader)",{loaderId:e},3),!0;var n=this.activeLoaders.get(e);return n?(n.isMainLoader&&(this.isMainLoaderActive=!1,this.mainLoaderId=null),null!==(t=n.element)&&void 0!==t&&t.parentNode?(this._removeLoaderElement(n.element),this.activeLoaders.delete(e),this.recentlyRemovedLoaders.add(e),!0):(this.activeLoaders.delete(e),o.Debug.log("LoaderManager: Loader element was already removed from DOM",{loaderId:e},3),!0)):(o.Debug.log("LoaderManager: No loader found to hide",{loaderId:e},2),!1)}},{key:"_removeLoaderElement",value:function(e){e.classList.remove("vdm-loader--showing"),setTimeout((function(){e.parentNode&&e.parentNode.removeChild(e)}),300)}},{key:"showLoaderInContainer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.showLoader(t,h({target:e,container:!0,small:!0},n));return this._logOperation("show",{id:r,message:t,type:"container"}),r}},{key:"updateLoaderMessage",value:function(e,t){var n;if(e&&this.recentlyRemovedLoaders.has(e))return!0;!e&&this.isMainLoaderActive&&this.mainLoaderId&&(e=this.mainLoaderId,o.Debug.log("LoaderManager: Using main loader ID for message update",{mainLoaderId:e},3));var r=this.activeLoaders.get(e);if(!r)return this.verboseLogging&&o.Debug.log("LoaderManager: No loader found to update message",{loaderId:e},2),!1;if(null===(n=r.element)||void 0===n||!n.parentNode)return o.Debug.log("LoaderManager: Loader element was removed from DOM",{loaderId:e},3),this.activeLoaders.delete(e),this.recentlyRemovedLoaders.add(e),!1;var i=r.element.querySelector(".vdm-loader__message");if(i)return i.textContent=t,this._logOperation("update",{id:e,message:t,type:"existing-element"}),!0;if(t){var a=document.createElement("div");return a.className="vdm-loader__message",a.textContent=t,r.element.appendChild(a),this._logOperation("update",{id:e,message:t,type:"new-element"}),!0}return!1}},{key:"hasLoader",value:function(e){return this.activeLoaders.has(e)&&!this.recentlyRemovedLoaders.has(e)}},{key:"_cleanupOldRemovedLoaders",value:function(){this.recentlyRemovedLoaders.size>20&&this.recentlyRemovedLoaders.clear()}},{key:"getLoaderInfo",value:function(e){var t;if(!e)return null;var n=this.activeLoaders.get(e);return n?{exists:!0,isMain:!!n.isMainLoader,fullscreen:!!n.fullscreen,message:null===(t=n.element.querySelector(".vdm-loader__message"))||void 0===t?void 0:t.textContent,age:Date.now()-(n.timestamp||0),inDom:!!n.element.parentNode}:{exists:!1,wasRemoved:this.recentlyRemovedLoaders.has(e)}}},{key:"getLoaderStatus",value:function(){return this._cleanupOldRemovedLoaders(),{activeCount:this.activeLoaders.size,recentlyRemovedCount:this.recentlyRemovedLoaders.size,mainLoaderActive:this.isMainLoaderActive,mainLoaderId:this.mainLoaderId,operations:s(this.operationLog),loaders:Array.from(this.activeLoaders.entries()).map((function(e){var t,n=c(e,2),r=n[0],o=n[1];return{id:r,isMain:!!o.isMainLoader,fullscreen:!!o.fullscreen,message:null===(t=o.element.querySelector(".vdm-loader__message"))||void 0===t?void 0:t.textContent,age:Date.now()-(o.timestamp||0),inDom:!!o.element.parentNode}}))}}}],l=[{key:"getInstance",value:function(){return E||(E=new t).initialize(),E}}],i&&m(n.prototype,i),l&&m(n,l),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,l}(i.BaseSingleton);const I=T},"./src/utils/MergeContentFormatter.js":(e,t,n)=>{n.r(t),n.d(t,{MergeContentFormatter:()=>s});var r=n("./src/utils/StringUtils.js"),o=n("./src/utils/Debug.js");function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l(r.key),r)}}function l(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t=e,i=[{key:"formatPreview",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t)return o.Debug.warn("MergeContentFormatter: Empty content for preview formatting",null,2),"<pre><code>No content available</code></pre>";var a=t,l=r.StringUtils.escapeHtml(t),s=e.getLanguageClass(n),c="<pre ".concat(i?'data-line-numbers="true"':"",'><code class="').concat(s,'" data-original-code="').concat(r.StringUtils.escapeAttribute(a),'">').concat(l,"</code></pre>");return o.Debug.log("MergeContentFormatter: Preview HTML generated",{preview:c.substring(0,150)+"..."},2),c}},{key:"getLanguageClass",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e?{js:"javascript",ts:"typescript",py:"python",rb:"ruby",java:"java",cs:"csharp",php:"php",html:"html",css:"css",json:"json",xml:"xml",yml:"yaml",yaml:"yaml",md:"markdown",sql:"sql"}[e.toLowerCase()]||e.toLowerCase():""}},{key:"formatUnresolvedCount",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return 1===e?(t.unresolvedChunkSingular||"There is %COUNT% unresolved chunk remaining.").replace("%COUNT%",e):(t.unresolvedChunksPlural||"There are %COUNT% unresolved chunks remaining.").replace("%COUNT%",e)}},{key:"prepareCode",value:function(e){return e.replace(/\r\n/g,"\n")}},{key:"resetHighlighting",value:function(e){if(!e)return null;e.hasAttribute("data-highlighted")&&e.removeAttribute("data-highlighted");var t=e.textContent;return e.textContent=t,t}}],(n=null)&&a(t.prototype,n),i&&a(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,i}()},"./src/utils/NavigationUtils.js":(e,t,n)=>{n.r(t),n.d(t,{NavigationUtils:()=>d});var r=n("./src/constants/Selectors.js"),o=n("./src/utils/Debug.js");function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return(t=u(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function u(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}var d=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},n=[{key:"scrollElementIntoView",value:function(e,t){if(!e||!t)return o.Debug.warn("NavigationUtils: Missing element or container for scrolling",null,2),!1;var n=e.offsetTop-t.clientHeight/2+e.offsetHeight/2;return t.scrollTo({top:n,behavior:"smooth"}),!0}},{key:"addHighlightEffect",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3;e&&(e.classList.add(r.default.NAVIGATION.HIGHLIGHT.name()),setTimeout((function(){e.classList.remove(r.default.NAVIGATION.HIGHLIGHT.name())}),t))}},{key:"makeDraggable",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e){var n,r,o=l(l({},{handleSelector:null,ignoreSelector:".nav-button, .nav-counter",positionStyle:"fixed",dragClass:"dragging"}),t),i=!1,a=function(t){if((!o.ignoreSelector||!t.target.matches(o.ignoreSelector))&&(!o.handleSelector||t.target.matches(o.handleSelector))){i=!0,e.classList.add(o.dragClass);var a=e.getBoundingClientRect();n=a.right-t.clientX,r=a.bottom-t.clientY,t.preventDefault()}},s=function(t){if(i){var o=e.parentElement.getBoundingClientRect(),a=o.right-t.clientX-n,l=o.bottom-t.clientY-r;a=Math.max(0,Math.min(a,o.width-e.offsetWidth)),l=Math.max(0,Math.min(l,o.height-e.offsetHeight)),e.style.right="".concat(a,"px"),e.style.bottom="".concat(l,"px"),e.style.left="auto",e.style.top="auto"}},c=function(){i&&(i=!1,e.classList.remove(o.dragClass))};return e.addEventListener("mousedown",a),document.addEventListener("mousemove",s),document.addEventListener("mouseup",c),{destroy:function(){e.removeEventListener("mousedown",a),document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",c)}}}}}],(t=null)&&c(e.prototype,t),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}()},"./src/utils/ResourceLoader.js":(e,t,n)=>{n.r(t),n.d(t,{ResourceLoader:()=>p});var r=n("./src/utils/Debug.js"),o=n("./src/utils/BaseSingleton.js");function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(){a=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},l="function"==typeof Symbol?Symbol:{},s=l.iterator||"@@iterator",c=l.asyncIterator||"@@asyncIterator",u=l.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var i=t&&t.prototype instanceof b?t:b,a=Object.create(i.prototype),l=new j(r||[]);return o(a,"_invoke",{value:S(e,n,l)}),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=f;var g="suspendedStart",m="suspendedYield",p="executing",v="completed",y={};function b(){}function w(){}function E(){}var T={};d(T,s,(function(){return this}));var I=Object.getPrototypeOf,C=I&&I(I(_([])));C&&C!==n&&r.call(C,s)&&(T=C);var M=E.prototype=b.prototype=Object.create(T);function L(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function D(e,t){function n(o,a,l,s){var c=h(e[o],e,a);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==i(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,l,s)}),(function(e){n("throw",e,l,s)})):t.resolve(d).then((function(e){u.value=e,l(u)}),(function(e){return n("throw",e,l,s)}))}s(c.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function S(t,n,r){var o=g;return function(i,a){if(o===p)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var l=r.delegate;if(l){var s=O(l,r);if(s){if(s===y)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===g)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=p;var c=h(t,n,r);if("normal"===c.type){if(o=r.done?v:m,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(o=v,r.method="throw",r.arg=c.arg)}}}function O(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,O(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=h(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function _(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(i(t)+" is not iterable")}return w.prototype=E,o(M,"constructor",{value:E,configurable:!0}),o(E,"constructor",{value:w,configurable:!0}),w.displayName=d(E,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,d(e,u,"GeneratorFunction")),e.prototype=Object.create(M),e},t.awrap=function(e){return{__await:e}},L(D.prototype),d(D.prototype,c,(function(){return this})),t.AsyncIterator=D,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new D(f(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},L(M),d(M,u,"Generator"),d(M,s,(function(){return this})),d(M,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=_,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return l.type="throw",l.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],l=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;N(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:_(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function l(e,t,n,r,o,i,a){try{var l=e[i](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){l(i,r,o,a,s,"next",e)}function s(e){l(i,r,o,a,s,"throw",e)}a(void 0)}))}}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function u(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}function d(e,t){if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(f=function(){return!!e})()}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}var m=null,p=function(e){function t(){var e,n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=h(r=t),(e=d(n,f()?Reflect.construct(r,o||[],h(n).constructor):r.apply(n,o)))._isFirstInstance(m)?(e.config=null,e.loadedResources=new Set,e.loadedLanguages=new Set,e.loadedThemes=new Set,e.CDN_BASE="https://cdnjs.cloudflare.com/ajax/libs",e.HLJS_VERSION="11.11.1",e.LINE_NUMBERS_VERSION="2.8.0",m=e,e):d(e)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(t,e),n=t,o=[{key:"configure",value:function(e){return r.Debug.log("ResourceLoader: Configuring",{config:e},2),this.config=e,r.Debug.log("ResourceLoader configured"),r.Debug.log("ResourceLoader: Configuration complete",null,2),this}},{key:"loadDependencies",value:(p=s(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadSyntaxHighlighterCore();case 2:return e.next=4,this.loadLanguage(this.config.language||"php");case 4:return e.abrupt("return",!0);case 5:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"loadSyntaxHighlighterCore",value:(u=s(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.config){e.next=3;break}throw r.Debug.error("ResourceLoader: Must be configured before loading dependencies",null,2),new Error("ResourceLoader must be configured before loading dependencies");case 3:if(e.prev=3,r.Debug.log("ResourceLoader: Loading syntax highlighter core (NO THEME)",null,2),!window.hljs){e.next=9;break}r.Debug.log("ResourceLoader: highlight.js already loaded",null,2),e.next=15;break;case 9:return r.Debug.log("ResourceLoader: Loading highlight.js from CDN",null,2),e.next=12,this.loadScript("".concat(this.CDN_BASE,"/highlight.js/").concat(this.HLJS_VERSION,"/highlight.min.js"));case 12:return r.Debug.log("ResourceLoader: Loading line numbers plugin",null,2),e.next=15,this.loadScript("".concat(this.CDN_BASE,"/highlightjs-line-numbers.js/").concat(this.LINE_NUMBERS_VERSION,"/highlightjs-line-numbers.min.js"));case 15:return r.Debug.log("ResourceLoader: Syntax highlighter core loaded successfully",null,2),e.abrupt("return",!0);case 19:return e.prev=19,e.t0=e.catch(3),r.Debug.error("ResourceLoader: Failed to load syntax highlighter core:",e.t0,2),e.abrupt("return",!1);case 23:case"end":return e.stop()}}),e,this,[[3,19]])}))),function(){return u.apply(this,arguments)})},{key:"loadLanguage",value:(l=s(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={markup:"xml",html:"xml",htm:"xml",javascript:"javascript",js:"javascript",typescript:"typescript",ts:"typescript",jsx:"javascript",tsx:"typescript"}[t.toLowerCase()]||t.toLowerCase(),!this.loadedLanguages.has(n)){e.next=4;break}return e.abrupt("return",!0);case 4:return r.Debug.log("ResourceLoader: Loading language ".concat(n),null,2),e.prev=5,e.next=8,this.loadScript("".concat(this.CDN_BASE,"/highlight.js/").concat(this.HLJS_VERSION,"/languages/").concat(n,".min.js"));case 8:return this.loadedLanguages.add(n),r.Debug.log("ResourceLoader: Language ".concat(n," loaded from CDN successfully"),null,2),e.abrupt("return",!0);case 13:return e.prev=13,e.t0=e.catch(5),r.Debug.warn("ResourceLoader: Failed to load language ".concat(n,", falling back to built-in languages"),{error:e.t0},2),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,this,[[5,13]])}))),function(e){return l.apply(this,arguments)})},{key:"_cacheResource",value:function(e,t){return this.resourceCache||(this.resourceCache=new Map),this.resourceCache.has(e)||this.resourceCache.set(e,t),this.resourceCache.get(e)}},{key:"loadScript",value:function(e){var t=this;return this._cacheResource(e,new Promise((function(n,o){if(t.loadedResources.has(e))n();else{r.Debug.log("ResourceLoader: Loading script: ".concat(e),null,2);var i=document.createElement("script");i.src=e,i.async=!0,i.onload=function(){t.loadedResources.add(e),n()},i.onerror=function(){r.Debug.error("ResourceLoader: Failed to load script: ".concat(e),null,2),o(new Error("Failed to load script: ".concat(e)))},document.head.appendChild(i)}})))}},{key:"loadCSS",value:function(e){var t=this;return this.loadedThemes.has(e)?Promise.resolve():(r.Debug.log("ResourceLoader: Loading CSS: ".concat(e),null,2),new Promise((function(n,o){var i=document.createElement("link");i.rel="stylesheet",i.href=e,i.onload=function(){t.loadedThemes.add(e),n()},i.onerror=function(){r.Debug.error("ResourceLoader: Failed to load CSS: ".concat(e),null,2),o(new Error("Failed to load CSS: ".concat(e)))},document.head.appendChild(i)})))}}],i=[{key:"getInstance",value:function(){return m||(m=new t),m}}],o&&c(n.prototype,o),i&&c(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,i,l,u,p}(o.BaseSingleton)},"./src/utils/StringUtils.js":(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,i(r.key),r)}}function i(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}n.r(t),n.d(t,{StringUtils:()=>a});var a=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},n=[{key:"escapeHtml",value:function(e){return e&&"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/\//g,"&#x2F;").replace(/\\/g,"&#x5C;").replace(/`/g,"&#x60;"):""}},{key:"escapeAttribute",value:function(e){return e?e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):""}}],(t=null)&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}()},"./src/utils/TranslationManager.js":(e,t,n)=>{n.r(t),n.d(t,{TranslationManager:()=>g});var r=n("./src/utils/BaseSingleton.js"),o=n("./src/utils/Debug.js");function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}function s(e,t,n){return t=u(t),function(e,t){if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,c()?Reflect.construct(t,n||[],u(e).constructor):t.apply(e,n))}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(c=function(){return!!e})()}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function f(e,t,n){return(t=h(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}var g=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=s(this,t)).translations={},e.lang="en",e.initialized=!1,e._initializeFromGlobalConfig(),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(t,e),n=t,r=[{key:"_initializeFromGlobalConfig",value:function(){return!(!window.diffConfig||!window.diffConfig.translations||(o.Debug.log("TranslationManager: Auto-initializing from window.diffConfig",window.diffConfig.translations,2),this.initialize(window.diffConfig.lang||"en",window.diffConfig.translations),0))}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.lang=e,this.translations=t,this.initialized=!0,o.Debug.log('TranslationManager: Initialized with "'.concat(e,'" language'),this.translations,2)}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.initialized||this._initializeFromGlobalConfig(),this.translations[this.lang]&&this.translations[this.lang][e]?this.translations[this.lang][e]:this.translations.en&&this.translations.en[e]?(o.Debug.log('TranslationManager: Key "'.concat(e,'" not found in "').concat(this.lang,'", using English fallback'),null,2),this.translations.en[e]):null!==t?t:e}},{key:"isInitialized",value:function(){return this.initialized||this._initializeFromGlobalConfig(),this.initialized}},{key:"getLanguage",value:function(){return this.initialized||this._initializeFromGlobalConfig(),this.lang}},{key:"getAllTranslations",value:function(){return this.initialized||this._initializeFromGlobalConfig(),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.translations)}}],i=[{key:"getInstance",value:function(){return t._instance||(t._instance=new t,o.Debug.log("TranslationManager: Instance created",null,2)),t._instance}}],r&&l(n.prototype,r),i&&l(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(r.BaseSingleton);f(g,"_instance",null)}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return(()=>{n.r(r),n.d(r,{BrowserUIManager:()=>u.BrowserUIManager,DiffConfigManager:()=>m.DiffConfigManager,DiffViewer:()=>e.DiffViewer,EndpointDiscovery:()=>d.EndpointDiscovery,LoaderManager:()=>f.LoaderManager});var e=n("./src/components/DiffViewer.js"),t=n("./src/utils/ResourceLoader.js"),o=n("./src/data/highlightjs-themes.json"),i=n("./src/components/ThemeManager.js"),a=n("./src/utils/Debug.js"),l=n("./src/utils/ConfigUtils.js"),s=n("./src/utils/DOMUtils.js"),c=n("./src/constants/Selectors.js"),u=n("./src/components/viewer/BrowserUIManager.js"),d=n("./src/utils/EndpointDiscovery.js"),f=n("./src/utils/LoaderManager.js"),h=n("./src/utils/TranslationManager.js"),g=n("./src/utils/AlertManager.js"),m=n("./src/utils/DiffConfigManager.js");function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function v(){v=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof b?t:b,a=Object.create(i.prototype),l=new j(r||[]);return o(a,"_invoke",{value:S(e,n,l)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var f="suspendedStart",h="suspendedYield",g="executing",m="completed",y={};function b(){}function w(){}function E(){}var T={};c(T,a,(function(){return this}));var I=Object.getPrototypeOf,C=I&&I(I(_([])));C&&C!==n&&r.call(C,a)&&(T=C);var M=E.prototype=b.prototype=Object.create(T);function L(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function D(e,t){function n(o,i,a,l){var s=d(e[o],e,i);if("throw"!==s.type){var c=s.arg,u=c.value;return u&&"object"==p(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,l)}),(function(e){n("throw",e,a,l)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,l)}))}l(s.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function S(t,n,r){var o=f;return function(i,a){if(o===g)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var l=r.delegate;if(l){var s=O(l,r);if(s){if(s===y)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=g;var c=d(t,n,r);if("normal"===c.type){if(o=r.done?m:h,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(o=m,r.method="throw",r.arg=c.arg)}}}function O(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,O(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=d(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function _(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(p(t)+" is not iterable")}return w.prototype=E,o(M,"constructor",{value:E,configurable:!0}),o(E,"constructor",{value:w,configurable:!0}),w.displayName=c(E,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,c(e,s,"GeneratorFunction")),e.prototype=Object.create(M),e},t.awrap=function(e){return{__await:e}},L(D.prototype),c(D.prototype,l,(function(){return this})),t.AsyncIterator=D,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new D(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},L(M),c(M,s,"Generator"),c(M,a,(function(){return this})),c(M,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=_,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return l.type="throw",l.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],l=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;N(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:_(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function y(e,t,n,r,o,i,a){try{var l=e[i](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function b(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){y(i,r,o,a,l,"next",e)}function l(e){y(i,r,o,a,l,"throw",e)}a(void 0)}))}}var w=null,E=d.EndpointDiscovery.getInstance();function T(){document.querySelectorAll(".vdm-form").forEach((function(e){if(!e.parentNode.querySelector(".vdm-copyright-link")){var t=document.createElement("div");t.className="vdm-copyright-link",t.style.cssText="text-align: right; font-size: 11px; margin-top: 4px; opacity: 0.7;",t.innerHTML='<a href="https://visual-diff-merge.miglisoft.com/" rel="noopener" target="_blank" style="text-decoration: none; color: inherit;">Powered by Visual-Diff-Merge</a>',e.parentNode.insertBefore(t,e.nextSibling)}}))}document.addEventListener("DOMContentLoaded",T),window.addEventListener("load",T),window.enableDiffViewer=b(v().mark((function n(){var r,d,m,p,y,b,I,C,M,L,D,S,O,k,N,j,_,x,A,P,U,R,F,B,H,V,G,z,Y,W,q,K,X,J;return v().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(p=(null===(r=window.diffConfig)||void 0===r?void 0:r.debug)||!1,y=(null===(d=window.diffConfig)||void 0===d?void 0:d.logLevel)||1,a.Debug.initialize(p,"[DiffViewer]",y),b=f.LoaderManager.getInstance(),I=h.TranslationManager.getInstance(),T(),null!==(m=window.diffConfig)&&void 0!==m&&m.translations&&!I.isInitialized()&&(C=window.diffConfig.lang||"en",a.Debug.log("Initializing TranslationManager with language: ".concat(C),null,2),I.initialize(C,window.diffConfig.translations)),M=I.get("loadingDiff","Loading diff..."),L=b.adoptEarlyLoader(M),n.prev=9,a.Debug.log("INITIALIZATION - PHASE 1: PREPARATION",null,1),b.updateLoaderMessage(L,I.get("loadingContent","Loading content...")),null===(D=window.diffConfig)||void 0===D||!D.isIdentical){n.next=17;break}return O=I.get("filesIdenticalMessage","The files are identical. No differences found."),s.DOMUtils.showMessage(c.default.DIFF.CONTENT_WRAPPER.name(),O,"info"),b.hideMainLoader(L),n.abrupt("return");case 17:return window.diffConfig&&(void 0===window.diffConfig.serverSaveEnabled?(window.diffConfig.serverSaveEnabled=!1,a.Debug.log("Setting default serverSaveEnabled=false in diffConfig",null,2)):(window.diffConfig.serverSaveEnabled=!!window.diffConfig.serverSaveEnabled,a.Debug.log("Found serverSaveEnabled=".concat(window.diffConfig.serverSaveEnabled," in diffConfig"),null,2))),n.prev=18,b.updateLoaderMessage(L,I.get("discoveringEndpoints","Discovering API endpoints...")),n.next=22,E.getEndpoint();case 22:k=n.sent,a.Debug.log("API endpoint discovered",k,2),window.diffConfig&&!window.diffConfig.apiEndpoint&&(window.diffConfig.apiEndpoint=k),n.next=30;break;case 27:n.prev=27,n.t0=n.catch(18),a.Debug.warn("API endpoint discovery failed, using fallbacks",n.t0,1);case 30:if(null===(S=window.diffConfig)||void 0===S||!S.isIdentical){n.next=35;break}return N=I.get("filesIdenticalMessage","The files are identical. No differences found."),s.DOMUtils.showMessage(c.default.DIFF.CONTENT_WRAPPER.name(),N,"info"),b.hideMainLoader(L),n.abrupt("return");case 35:if(!window.diffViewer){n.next=42;break}if(a.Debug.log("Cleaning up previous instance",null,1),b.updateLoaderMessage(L,I.get("cleaningUpPrevious","Cleaning up previous instance...")),"function"!=typeof window.diffViewer.destroy){n.next=41;break}return n.next=41,window.diffViewer.destroy();case 41:window.diffViewer=null;case 42:if(window.vdmBrowserUIManager&&(a.Debug.log("Cleaning up browser UI manager",null,1),"function"==typeof window.vdmBrowserUIManager.destroy&&window.vdmBrowserUIManager.destroy(),window.vdmBrowserUIManager=null),a.Debug.log("INITIALIZATION - STARTING",null,1),b.updateLoaderMessage(L,I.get("validatingConfig","Validating configuration...")),(j=l.ConfigUtils.validateConfig(window.diffConfig)).isValid){n.next=50;break}return a.Debug.error(j.error),b.hideMainLoader(L),n.abrupt("return");case 50:if(a.Debug.log("CONFIGURATION SUMMARY",l.ConfigUtils.getConfigSummary(window.diffConfig),1),a.Debug.log("INITIALIZATION - PHASE 2: SERVICES",null,1),b.updateLoaderMessage(L,I.get("initializingServices","Initializing services...")),_=l.ConfigUtils.getThemePreferences(window.diffConfig),(x=t.ResourceLoader.getInstance()).configure({availableThemes:o,currentTheme:_.mode,currentThemeFamily:_.family,language:l.ConfigUtils.getFileExtension(window.diffConfig.filepath,"php")}),(A=i.ThemeManager.getInstance()).initialize({theme:window.diffConfig.theme},x),a.Debug.log("INITIALIZATION - PHASE 2.5: UI PREPARATION",null,1),b.updateLoaderMessage(L,I.get("preparingUI","Preparing UI elements...")),P=document.getElementById(c.default.CONTAINER.WRAPPER.name()),U=document.getElementById(c.default.DIFF.CONTAINER.name()),!(R=P&&!U)){n.next=71;break}return a.Debug.log("Creating browser UI elements before DiffViewer initialization",null,1),(F=new u.BrowserUIManager({options:window.diffConfig||{}})).initialize(),w=F,window.vdmBrowserUIManager=F,n.next=71,new Promise((function(e){return setTimeout(e,50)}));case 71:if(a.Debug.log("INITIALIZATION - PHASE 3: COMPONENTS",null,1),b.updateLoaderMessage(L,I.get("initializingComponents","Initializing components...")),B=document.querySelector(c.default.DIFF.VIEWER),H=0,V=5,!R){n.next=85;break}case 77:if(B||!(H<V)){n.next=85;break}return a.Debug.log("Container element ".concat(c.default.DIFF.VIEWER," not found, attempt ").concat(H+1,"/").concat(V),null,2),n.next=81,new Promise((function(e){return setTimeout(e,100)}));case 81:B=document.querySelector(c.default.DIFF.VIEWER),H++,n.next=77;break;case 85:if(B){n.next=89;break}return a.Debug.error("Container element ".concat(c.default.DIFF.VIEWER," not found after ").concat(H," attempts")),b.hideMainLoader(L),n.abrupt("return");case 89:return(G=document.querySelector(c.default.LOADER.MAIN))&&(G.style.display="none",a.Debug.log("Loading element hidden",null,2)),B&&(B.style.display="flex",a.Debug.log("Container element shown",null,2)),z=new e.DiffViewer({diffData:window.diffConfig.diffData,serverSaveEnabled:window.diffConfig.serverSaveEnabled||!1,fileRefId:window.diffConfig.fileRefId||"",oldFileRefId:window.diffConfig.oldFileRefId||"",newFileName:window.diffConfig.newFileName||"",oldFileName:window.diffConfig.oldFileName||"",isIdentical:window.diffConfig.isIdentical||!1,filepath:window.diffConfig.filepath,resourceLoader:x,themeManager:A,endpointDiscovery:E,mainLoaderId:L}),window.diffViewer=z,R&&w&&(w.setDiffViewer(z),z.setBrowserUIManager(w)),a.Debug.log("INITIALIZATION - PHASE 4: RESOURCES",null,1),b.updateLoaderMessage(L,I.get("loadingResources","Loading resources...")),n.next=99,x.loadSyntaxHighlighterCore();case 99:return b.updateLoaderMessage(L,I.get("loadingTheme","Loading theme...")),n.next=102,A.loadInitialTheme();case 102:return a.Debug.log("INITIALIZATION - PHASE 5: UI",null,1),b.updateLoaderMessage(L,I.get("initializingUI","Initializing UI...")),n.next=106,z.initialize();case 106:return(Y=document.querySelector(c.default.DIFF.CONTAINER))&&Y.classList.add(c.default.STATUS.LOADED.name()),a.Debug.log("INITIALIZATION - COMPLETE",null,1),b.hideMainLoader(L),n.abrupt("return",z);case 113:n.prev=113,n.t1=n.catch(9),a.Debug.error("Error initializing diff viewer:",n.t1),(W=document.querySelector(c.default.DIFF.VIEWER))&&(q=g.default.getInstance(),K=I.get("errorLoadingDiff","Error loading diff"),X="\n                <h4>".concat(K,"</h4>\n                <p>").concat(n.t1 instanceof Error?n.t1.message:String(n.t1),"</p>\n            "),J=q.showError(X,{timeout:0,translate:!1,className:"vdm-w-100"}),W.innerHTML="",W.appendChild(J),W.style.display="flex"),b.hideMainLoader(L);case 119:case"end":return n.stop()}}),n,null,[[9,113],[18,27]])}))),window.BrowserUIManager=u.BrowserUIManager,window.LoaderManager=f.LoaderManager,window.TranslationManager=h.TranslationManager,window.AlertManager=g.default,window.DiffConfigManager=m.DiffConfigManager})(),r=r.default})()));
//# sourceMappingURL=diff-viewer.min.js.map